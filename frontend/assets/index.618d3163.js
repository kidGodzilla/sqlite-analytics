import{c as Ve,o as M,a as R,b as u,t as q,u as O,d as ee,e as he,r as J,f as _e,w,n as oe,g as Be,v as We,h as le,F as we,i as Te,j as Q,k as Ie,m as qe,l as Ke,p as Ae,q as De,s as Ue,x as U,y as Le,z as Fe,A as He,B as Ye,C as Ge}from"./vendor.a79dc407.js";const Xe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function l(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=l(i);fetch(i.href,a)}};Xe();function me(e){e==parseInt(e)&&(e=parseInt(e));const t=new Date;return t.setDate(t.getDate()-e)}function Se(e){return Math.floor((+new Date-+new Date(e))/(25*60*60*1e3))}function ae(e){let t=`?host=${e.host}&range=${e.range}`;e.os&&(t+=`&os=${e.os}`),e.path&&(t+=`&path=${e.path}`),e.device&&(t+=`&device=${e.device}`),e.is_bot!==""&&(t+=`&is_bot=${e.is_bot}`),e.is_new!==""&&(t+=`&is_new=${e.is_new}`),e.browser&&(t+=`&browser=${e.browser}`),e.language&&(t+=`&language=${e.language}`),e.referrer&&(t+=`&referrer=${e.referrer}`),e.utm_source!==""&&(t+=`&utm_source=${e.utm_source}`),e.utm_medium!==""&&(t+=`&utm_medium=${e.utm_medium}`),e.utm_campaign!==""&&(t+=`&utm_campaign=${e.utm_campaign}`),e.country!==""&&(t+=`&country=${e.country}`),location.search!==t&&window.history.pushState("","",t)}var Ze=Ve({state(){return{publicKey:"",domains:[],host:"",path:"",key:"",start:me(0),end:me(0),comparisonStart:me(0),comparisonEnd:me(0),range:"1",rangeString:"Latest",liveVisitors:0,showVisitors:!0,summary:{},dark:!1,os:"",device:"",is_bot:"",is_new:"",browser:"",language:"",referrer:"",utm_source:"",utm_medium:"",utm_campaign:"",country:""}},getters:{domains:e=>e.domains,dark:e=>e.dark,key:e=>e.key,publicKey:e=>e.publicKey,host:e=>e.host,path:e=>e.path,start:e=>e.start,end:e=>e.end,comparisonStart:e=>e.comparisonStart,comparisonEnd:e=>e.comparisonEnd,range:e=>e.range,rangeString:e=>e.rangeString,liveVisitors:e=>e.liveVisitors,showVisitors:e=>e.showVisitors,summary:e=>e.summary,os:e=>e.os,device:e=>e.device,is_bot:e=>e.is_bot,is_new:e=>e.is_new,browser:e=>e.browser,language:e=>e.language,referrer:e=>e.referrer,utm_source:e=>e.utm_source,utm_medium:e=>e.utm_medium,utm_campaign:e=>e.utm_campaign,country:e=>e.country},mutations:{setDark(e,t){e.dark=t},setKey(e,t){e.key=t},setPublicKey(e,t){e.publicKey=t},setDomains(e,t){e.domains=t},setHost(e,t){e.host=t,ae(e)},setPath(e,t){e.path=t,ae(e)},setOs(e,t){e.os=t,ae(e)},setDevice(e,t){e.device=t,ae(e)},setIs_bot(e,t){e.is_bot=t,ae(e)},setIs_new(e,t){e.is_new=t,ae(e)},setBrowser(e,t){e.browser=t,ae(e)},setLanguage(e,t){e.language=t,ae(e)},setReferrer(e,t){e.referrer=t,ae(e)},setUtm_source(e,t){e.utm_source=t,ae(e)},setUtm_medium(e,t){e.utm_medium=t,ae(e)},setUtm_campaign(e,t){e.utm_campaign=t,ae(e)},setCountry(e,t){e.country=t,ae(e)},setStart(e,t){e.start=t},setEnd(e,t){e.end=t},setComparisonStart(e,t){e.comparisonStart=t},setComparisonEnd(e,t){e.comparisonEnd=t},setLiveVisitors(e,t){e.liveVisitors=t},setShowVisitors(e,t){e.showVisitors=t},setSummary(e,t){e.summary=t},setRangeString(e,t){e.rangeString=t},setRange(e,t){t||(t="1");let s={"-1":["Yesterday",1,1],"1":["Latest",0,0],"7":["Last 7 Days",7,0],"14":["1 week ago",14,7],"21":["2 weeks ago",21,14],"28":["3 weeks ago",28,21],"30":["Last 30 Days",30,0]}[t];if(t<-1&&t>-32){let a=t*-1;s=[`${new Date(me(a)).toDateString()}`,a,a]}if(t.length===7){let a=Se(t),o=new Date(t);o=o.setMonth(o.getMonth()+1);let m=Se(o);m<0&&(m=0),s=[`${t}`,a,m]}if(t>1e3&&t<3e3){let a=Se(t),o=new Date(t);o=o.setFullYear(o.getFullYear()+1);let m=Se(o);m<0&&(m=0),s=[`${t}`,a,m]}e.rangeString=s[0],e.start=me(s[1]),e.end=me(s[2]);const i=e.end-e.start;e.comparisonEnd=e.start,e.comparisonStart=e.start-i,parseInt(t)==t&&(t=parseInt(t)),e.range=t,ae(e)}}});const je={class:"text-center mt-3"},Je=ee(" Copyright \xA9 2021-"),Qe={class:"year"},et=ee(),tt=u("a",{href:"https://jamesfuthey.com/",target:"_blank"},"James Futhey",-1),st=ee(". \xA0All Rights Reserved. "),it={setup(e){const t=new Date().getFullYear();return(l,s)=>(M(),R("p",je,[Je,u("span",Qe,q(O(t)),1),et,tt,st]))}},at={class:"container"},nt=u("a",{class:"navbar-brand",href:"/"},"Website Analytics",-1),ot=u("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[u("span",{class:"navbar-toggler-icon"})],-1),rt={class:"collapse navbar-collapse",id:"navbarColor01"},lt={class:"navbar-nav me-auto"},ct={class:"nav-item"},ut={class:"d-none d-md-inline-block form-check form-switch float-right"},dt={setup(e){const t=he(),l=J(!1);return _e(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(l.value=!0)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{l.value=s.matches}),w(l,()=>{t.commit("setDark",l.value),document.querySelector("#theme").href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/${l.value?"superhero":"zephyr"}/bootstrap.min.css`,l.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),(s,i)=>(M(),R("nav",{class:oe(["navbar navbar-expand-lg navbar-dark",{"mt-1":l.value,"bg-primary":!l.value}])},[u("div",at,[nt,ot,u("div",rt,[u("ul",lt,[u("li",ct,[u("a",{class:oe(["nav-link cp",{"btn-dark":l.value,nudge:l.value}]),"data-bs-toggle":"modal","data-bs-target":"#embedScript"},"Add to your Website",2)])])]),u("div",ut,[Be(u("input",{class:"form-check-input",type:"checkbox",id:"themer","onUpdate:modelValue":i[0]||(i[0]=a=>l.value=a)},null,512),[[We,l.value]]),u("label",{class:oe(["form-check-label",{"text-white":!l.value}]),for:"themer",style:{"user-select":"none"}},"Dark mode",2)])])],2))}},fe=()=>{const e=he();return Object.fromEntries(Object.keys(e.getters).map(t=>[t,le(()=>e.getters[t])]))},ht={class:"modal",id:"embedScript",tabindex:"-1"},mt={class:"modal-dialog modal-lg"},ft=u("div",{class:"modal-header"},[u("h5",{class:"modal-title"},"Add to your Website"),u("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),pt={class:"modal-body"},vt=u("h5",null,"Embed Code",-1),gt=u("p",null,"Embed this script on your website, and your analytics data will appear here.",-1),yt={rows:"4",spellcheck:"false",class:"form-control",id:"script","data-clipboard-target":"#script",style:{resize:"none","font-family":"monospace"}},_t=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#script"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),bt=u("br",null,null,-1),kt=u("h5",null,"URL to View Analytics",-1),wt=u("p",null,"You will need the following URL to access (and decrypt) your analytics:",-1),St={rows:"3",spellcheck:"false",class:"form-control",id:"url","data-clipboard-target":"#url",style:{resize:"none","font-family":"monospace"}},xt=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#url"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),$t=u("p",null,[u("small",null,[u("strong",null,"Save your URL."),ee(" If you lose this, you will need to reinstall analytics with a new encryption key.")])],-1),Ct=u("div",{class:"modal-footer"},[u("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),Bt={setup(e){const{key:t,publicKey:l,dark:s}=fe();let i={};location.search.slice(1).split("&").map(B=>B.split("=")).forEach(B=>i[B[0]]=B[1]);let a="https://analytics.servers.do",o=le(()=>l.value?`&lt;script>window.__analytics_encryption_key = '${l.value}';&lt;/script>
`:"");const m=le(()=>r(`&lt;!-- Servers.do Analytics -->
${o.value}&lt;script src='${a}/a.js'>&lt;/script>`)),y=le(()=>`${a}?host=${i.host}&range=${i.range}&key=${encodeURIComponent(t.value)}&pkey=${l.value}`);function r(B){return window.$("<textarea />").html(B).text()}return(B,g)=>(M(),R("div",ht,[u("div",mt,[u("div",{class:oe(["modal-content",{"bg-dark":O(s)}])},[ft,u("div",pt,[vt,gt,u("p",null,[u("textarea",yt,q(O(m)),1),_t]),bt,kt,wt,u("p",null,[u("textarea",St,q(O(y)),1),xt]),$t]),Ct],2)])]))}};const Tt={class:"row"},Dt={key:0,class:"col-12 mb-3"},Lt=["onClick"],Et=ee(" = \xA0"),Ot=ee(" \xA0 "),It=u("a",null,"\u2715",-1),At={class:"col-6"},Ft={class:"nav nav-pills mb-1 d-inline-block"},Mt={class:"nav-item dropdown ms-auto"},zt={class:"nav-link dropdown-toggle cp","data-bs-toggle":"dropdown",role:"button"},Rt=["src"],Nt={class:"d-inline pt-2 mb-0 name"},Pt={class:"dropdown-menu websites left"},Vt=["onClick"],Wt=u("span",{class:"text-success d-none d-md-inline-block dot"},"\xB7",-1),qt={class:"current-visitors d-none d-md-inline-block"},Kt={class:"col-6"},Ut={class:"nav nav-pills mb-1"},Ht={class:"nav-item dropdown ms-auto"},Yt={class:"dropdown-menu right"},Gt=u("div",{class:"dropdown-divider"},null,-1),Xt=u("div",{class:"dropdown-divider"},null,-1),Zt=u("div",{class:"dropdown-divider"},null,-1),jt={setup(e){const t=J(new Date),l=J(!1),s=J("month"),i=J("month"),a=J("month"),o={to:new Date(new Date().setDate(new Date().getDate()-32)),from:new Date,preventDisableDateSelection:!0},{host:m,path:y,os:r,device:B,is_bot:g,is_new:k,browser:c,language:b,referrer:n,utm_source:d,utm_medium:_,utm_campaign:$,country:z,domains:V,range:X,rangeString:G,liveVisitors:I}=fe(),T=he(),D=J({path:y,os:r,device:B,is_bot:g,is_new:k,browser:c,language:b,referrer:n,utm_source:d,utm_medium:_,utm_campaign:$,country:z}),L="path, os, device, is_bot, is_new, browser, language, referrer, utm_source, utm_medium, utm_campaign, country".split(", "),N=J([]);le(()=>location.search);function x(){N.value=[],L.forEach(A=>{D.value[A]!==""&&(N.value.includes(A)||N.value.push(A))})}w(r,x),w(y,x),w(B,x),w(g,x),w(k,x),w(c,x),w(b,x),w(n,x),w(d,x),w(_,x),w($,x),w(z,x),x();function S(A,F){T.commit("setRange",A),F||(l.value=!1)}const h=A=>A.charAt(0).toUpperCase()+A.slice(1);function f(){var A=prompt("Enter domain name");if(A){if(A=A.toLowerCase().trim().replace("www.",""),A&&window.history.pushState("","",`?host=${A}&range=${X.value}`),A&&!(V.value||[]).includes(A)){let F=V.value;Array.isArray(F)||(F=[]),F.includes(A)||F.push(A),localStorage.setItem("__analytics_hosts",JSON.stringify(F)),T.commit("setDomains",F)}A&&p(A)}}function p(A){window.history.pushState("","",`?host=${A}&range=${X.value}`),T.commit("setHost",A)}function v(A){A==="month"?(s.value="month",i.value="month",a.value="month",T.commit("setRangeString","Custom month:")):A==="year"?(s.value="year",i.value="year",a.value="year",T.commit("setRangeString","Custom year:")):A==="day"&&(s.value="day",i.value="day",a.value="day",T.commit("setRangeString","Custom day:")),document.querySelector(".dropdown-menu.right.show").classList.remove("show"),l.value=!0,setTimeout(()=>{document.querySelector(".vuejs3-datepicker__value").click()},123)}function Y(A){if(s.value==="year"){let K=new Date(A).getFullYear();S(K)}else if(s.value==="month"){let F=new Date(A),K=F.getMonth()+1;S(`${F.getFullYear()}-${K<10?"0":""}${K}`)}else if(s.value==="day"){t.value=new Date(A);let F=new Date-new Date(A),K=Math.floor(F/864e5)*-1;S(K)}}function Z(A){T.commit(A,"")}function W(A){return"set"+A[0].toUpperCase()+A.substring(1)}return(A,F)=>(M(),R("div",Tt,[N.value.length?(M(),R("div",Dt,[(M(!0),R(we,null,Te(N.value,K=>(M(),R("button",{type:"button",class:"btn btn-dark mr-5 mb-1",onClick:ue=>Z(W(K))},[u("strong",null,q(h(K)),1),Et,u("code",null,q(D.value[K]),1),Ot,It],8,Lt))),256))])):Q("",!0),u("div",At,[u("ul",Ft,[u("li",Mt,[u("a",zt,[O(m)?(M(),R("img",{key:0,class:"favicon",src:`https://logo.clearbit.com/${O(m)}`,onerror:"this.src='default.png';"},null,8,Rt)):Q("",!0),u("h5",Nt,q(h(O(m))||"Select a Domain"),1)]),u("div",Pt,[(M(!0),R(we,null,Te(O(V),K=>(M(),R("a",{class:"dropdown-item cp",onClick:ue=>p(K)},q(h(K)),9,Vt))),256)),u("a",{class:"dropdown-item cp",onClick:f},"Add Domain")])])]),Wt,u("span",qt,"\xA0"+q(O(I)?`${O(I)} current visitor${O(I)==1?"":"s"}`:"No current visitors"),1)]),u("div",Kt,[u("ul",Ut,[u("li",Ht,[u("a",{class:oe(["nav-link right cp",{"dropdown-toggle":!l.value}]),"data-bs-toggle":"dropdown",role:"button"},q(O(G)),3),u("div",Yt,[u("a",{class:"dropdown-item cp",onClick:F[0]||(F[0]=K=>S(1))},"Latest"),u("a",{class:"dropdown-item cp",onClick:F[1]||(F[1]=K=>S(-1))},"Yesterday"),u("a",{class:"dropdown-item cp",onClick:F[2]||(F[2]=K=>{v("day")})},"Custom Day"),Gt,u("a",{class:"dropdown-item cp",onClick:F[3]||(F[3]=K=>S(7))},"Last 7 Days"),u("a",{class:"dropdown-item cp",onClick:F[4]||(F[4]=K=>S(14))},"1 week ago"),u("a",{class:"dropdown-item cp",onClick:F[5]||(F[5]=K=>S(21))},"2 weeks ago"),u("a",{class:"dropdown-item cp",onClick:F[6]||(F[6]=K=>S(28))},"3 weeks ago"),Xt,u("a",{class:"dropdown-item cp",onClick:F[7]||(F[7]=K=>S(30))},"Last 30 Days"),Zt,u("a",{class:"dropdown-item cp",onClick:F[8]||(F[8]=K=>{v("month")})},"Custom Month"),u("a",{class:"dropdown-item cp",onClick:F[9]||(F[9]=K=>{v("year")})},"Custom Year")])]),l.value?(M(),Ie(O(qe),{key:0,name:"datepick",value:t.value,"disabled-dates":i.value=="day"?o:null,"initial-view":s.value,"minimum-view":i.value,"maximum-view":a.value,onInput:Y},null,8,["value","disabled-dates","initial-view","minimum-view","maximum-view"])):Q("",!0)])])]))}};var H=H||function(e,t){var l={},s=l.lib={},i=function(){},a=s.Base={extend:function(c){i.prototype=this;var b=new i;return c&&b.mixIn(c),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var b in c)c.hasOwnProperty(b)&&(this[b]=c[b]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}},o=s.WordArray=a.extend({init:function(c,b){c=this.words=c||[],this.sigBytes=b!=t?b:4*c.length},toString:function(c){return(c||y).stringify(this)},concat:function(c){var b=this.words,n=c.words,d=this.sigBytes;if(c=c.sigBytes,this.clamp(),d%4)for(var _=0;_<c;_++)b[d+_>>>2]|=(n[_>>>2]>>>24-8*(_%4)&255)<<24-8*((d+_)%4);else if(65535<n.length)for(_=0;_<c;_+=4)b[d+_>>>2]=n[_>>>2];else b.push.apply(b,n);return this.sigBytes+=c,this},clamp:function(){var c=this.words,b=this.sigBytes;c[b>>>2]&=4294967295<<32-8*(b%4),c.length=e.ceil(b/4)},clone:function(){var c=a.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var b=[],n=0;n<c;n+=4)b.push(4294967296*e.random()|0);return new o.init(b,c)}}),m=l.enc={},y=m.Hex={stringify:function(c){var b=c.words;c=c.sigBytes;for(var n=[],d=0;d<c;d++){var _=b[d>>>2]>>>24-8*(d%4)&255;n.push((_>>>4).toString(16)),n.push((_&15).toString(16))}return n.join("")},parse:function(c){for(var b=c.length,n=[],d=0;d<b;d+=2)n[d>>>3]|=parseInt(c.substr(d,2),16)<<24-4*(d%8);return new o.init(n,b/2)}},r=m.Latin1={stringify:function(c){var b=c.words;c=c.sigBytes;for(var n=[],d=0;d<c;d++)n.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return n.join("")},parse:function(c){for(var b=c.length,n=[],d=0;d<b;d++)n[d>>>2]|=(c.charCodeAt(d)&255)<<24-8*(d%4);return new o.init(n,b)}},B=m.Utf8={stringify:function(c){try{return decodeURIComponent(escape(r.stringify(c)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(c){return r.parse(unescape(encodeURIComponent(c)))}},g=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(c){typeof c=="string"&&(c=B.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var b=this._data,n=b.words,d=b.sigBytes,_=this.blockSize,$=d/(4*_),$=c?e.ceil($):e.max(($|0)-this._minBufferSize,0);if(c=$*_,d=e.min(4*c,d),c){for(var z=0;z<c;z+=_)this._doProcessBlock(n,z);z=n.splice(0,c),b.sigBytes-=d}return new o.init(z,d)},clone:function(){var c=a.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0});s.Hasher=g.extend({cfg:a.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(b,n){return new c.init(n).finalize(b)}},_createHmacHelper:function(c){return function(b,n){return new k.HMAC.init(c,n).finalize(b)}}});var k=l.algo={};return l}(Math);(function(){var e=H,t=e.lib.WordArray;e.enc.Base64={stringify:function(l){var s=l.words,i=l.sigBytes,a=this._map;l.clamp(),l=[];for(var o=0;o<i;o+=3)for(var m=(s[o>>>2]>>>24-8*(o%4)&255)<<16|(s[o+1>>>2]>>>24-8*((o+1)%4)&255)<<8|s[o+2>>>2]>>>24-8*((o+2)%4)&255,y=0;4>y&&o+.75*y<i;y++)l.push(a.charAt(m>>>6*(3-y)&63));if(s=a.charAt(64))for(;l.length%4;)l.push(s);return l.join("")},parse:function(l){var s=l.length,i=this._map,a=i.charAt(64);a&&(a=l.indexOf(a),a!=-1&&(s=a));for(var a=[],o=0,m=0;m<s;m++)if(m%4){var y=i.indexOf(l.charAt(m-1))<<2*(m%4),r=i.indexOf(l.charAt(m))>>>6-2*(m%4);a[o>>>2]|=(y|r)<<24-8*(o%4),o++}return t.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(g,k,c,b,n,d,_){return g=g+(k&c|~k&b)+n+_,(g<<d|g>>>32-d)+k}function l(g,k,c,b,n,d,_){return g=g+(k&b|c&~b)+n+_,(g<<d|g>>>32-d)+k}function s(g,k,c,b,n,d,_){return g=g+(k^c^b)+n+_,(g<<d|g>>>32-d)+k}function i(g,k,c,b,n,d,_){return g=g+(c^(k|~b))+n+_,(g<<d|g>>>32-d)+k}for(var a=H,o=a.lib,m=o.WordArray,y=o.Hasher,o=a.algo,r=[],B=0;64>B;B++)r[B]=4294967296*e.abs(e.sin(B+1))|0;o=o.MD5=y.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,k){for(var c=0;16>c;c++){var b=k+c,n=g[b];g[b]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var c=this._hash.words,b=g[k+0],n=g[k+1],d=g[k+2],_=g[k+3],$=g[k+4],z=g[k+5],V=g[k+6],X=g[k+7],G=g[k+8],I=g[k+9],T=g[k+10],D=g[k+11],L=g[k+12],N=g[k+13],x=g[k+14],S=g[k+15],h=c[0],f=c[1],p=c[2],v=c[3],h=t(h,f,p,v,b,7,r[0]),v=t(v,h,f,p,n,12,r[1]),p=t(p,v,h,f,d,17,r[2]),f=t(f,p,v,h,_,22,r[3]),h=t(h,f,p,v,$,7,r[4]),v=t(v,h,f,p,z,12,r[5]),p=t(p,v,h,f,V,17,r[6]),f=t(f,p,v,h,X,22,r[7]),h=t(h,f,p,v,G,7,r[8]),v=t(v,h,f,p,I,12,r[9]),p=t(p,v,h,f,T,17,r[10]),f=t(f,p,v,h,D,22,r[11]),h=t(h,f,p,v,L,7,r[12]),v=t(v,h,f,p,N,12,r[13]),p=t(p,v,h,f,x,17,r[14]),f=t(f,p,v,h,S,22,r[15]),h=l(h,f,p,v,n,5,r[16]),v=l(v,h,f,p,V,9,r[17]),p=l(p,v,h,f,D,14,r[18]),f=l(f,p,v,h,b,20,r[19]),h=l(h,f,p,v,z,5,r[20]),v=l(v,h,f,p,T,9,r[21]),p=l(p,v,h,f,S,14,r[22]),f=l(f,p,v,h,$,20,r[23]),h=l(h,f,p,v,I,5,r[24]),v=l(v,h,f,p,x,9,r[25]),p=l(p,v,h,f,_,14,r[26]),f=l(f,p,v,h,G,20,r[27]),h=l(h,f,p,v,N,5,r[28]),v=l(v,h,f,p,d,9,r[29]),p=l(p,v,h,f,X,14,r[30]),f=l(f,p,v,h,L,20,r[31]),h=s(h,f,p,v,z,4,r[32]),v=s(v,h,f,p,G,11,r[33]),p=s(p,v,h,f,D,16,r[34]),f=s(f,p,v,h,x,23,r[35]),h=s(h,f,p,v,n,4,r[36]),v=s(v,h,f,p,$,11,r[37]),p=s(p,v,h,f,X,16,r[38]),f=s(f,p,v,h,T,23,r[39]),h=s(h,f,p,v,N,4,r[40]),v=s(v,h,f,p,b,11,r[41]),p=s(p,v,h,f,_,16,r[42]),f=s(f,p,v,h,V,23,r[43]),h=s(h,f,p,v,I,4,r[44]),v=s(v,h,f,p,L,11,r[45]),p=s(p,v,h,f,S,16,r[46]),f=s(f,p,v,h,d,23,r[47]),h=i(h,f,p,v,b,6,r[48]),v=i(v,h,f,p,X,10,r[49]),p=i(p,v,h,f,x,15,r[50]),f=i(f,p,v,h,z,21,r[51]),h=i(h,f,p,v,L,6,r[52]),v=i(v,h,f,p,_,10,r[53]),p=i(p,v,h,f,T,15,r[54]),f=i(f,p,v,h,n,21,r[55]),h=i(h,f,p,v,G,6,r[56]),v=i(v,h,f,p,S,10,r[57]),p=i(p,v,h,f,V,15,r[58]),f=i(f,p,v,h,N,21,r[59]),h=i(h,f,p,v,$,6,r[60]),v=i(v,h,f,p,D,10,r[61]),p=i(p,v,h,f,d,15,r[62]),f=i(f,p,v,h,I,21,r[63]);c[0]=c[0]+h|0,c[1]=c[1]+f|0,c[2]=c[2]+p|0,c[3]=c[3]+v|0},_doFinalize:function(){var g=this._data,k=g.words,c=8*this._nDataBytes,b=8*g.sigBytes;k[b>>>5]|=128<<24-b%32;var n=e.floor(c/4294967296);for(k[(b+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,k[(b+64>>>9<<4)+14]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,g.sigBytes=4*(k.length+1),this._process(),g=this._hash,k=g.words,c=0;4>c;c++)b=k[c],k[c]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;return g},clone:function(){var g=y.clone.call(this);return g._hash=this._hash.clone(),g}}),a.MD5=y._createHelper(o),a.HmacMD5=y._createHmacHelper(o)})(Math);(function(){var e=H,t=e.lib,l=t.Base,s=t.WordArray,t=e.algo,i=t.EvpKDF=l.extend({cfg:l.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,o){for(var m=this.cfg,y=m.hasher.create(),r=s.create(),B=r.words,g=m.keySize,m=m.iterations;B.length<g;){k&&y.update(k);var k=y.update(a).finalize(o);y.reset();for(var c=1;c<m;c++)k=y.finalize(k),y.reset();r.concat(k)}return r.sigBytes=4*g,r}});e.EvpKDF=function(a,o,m){return i.create(m).compute(a,o)}})();H.lib.Cipher||function(e){var t=H,l=t.lib,s=l.Base,i=l.WordArray,a=l.BufferedBlockAlgorithm,o=t.enc.Base64,m=t.algo.EvpKDF,y=l.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(n,d){return this.create(this._ENC_XFORM_MODE,n,d)},createDecryptor:function(n,d){return this.create(this._DEC_XFORM_MODE,n,d)},init:function(n,d,_){this.cfg=this.cfg.extend(_),this._xformMode=n,this._key=d,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(d,_,$){return(typeof _=="string"?b:c).encrypt(n,d,_,$)},decrypt:function(d,_,$){return(typeof _=="string"?b:c).decrypt(n,d,_,$)}}}});l.StreamCipher=y.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var r=t.mode={},B=function(n,d,_){var $=this._iv;$?this._iv=e:$=this._prevBlock;for(var z=0;z<_;z++)n[d+z]^=$[z]},g=(l.BlockCipherMode=s.extend({createEncryptor:function(n,d){return this.Encryptor.create(n,d)},createDecryptor:function(n,d){return this.Decryptor.create(n,d)},init:function(n,d){this._cipher=n,this._iv=d}})).extend();g.Encryptor=g.extend({processBlock:function(n,d){var _=this._cipher,$=_.blockSize;B.call(this,n,d,$),_.encryptBlock(n,d),this._prevBlock=n.slice(d,d+$)}}),g.Decryptor=g.extend({processBlock:function(n,d){var _=this._cipher,$=_.blockSize,z=n.slice(d,d+$);_.decryptBlock(n,d),B.call(this,n,d,$),this._prevBlock=z}}),r=r.CBC=g,g=(t.pad={}).Pkcs7={pad:function(n,d){for(var _=4*d,_=_-n.sigBytes%_,$=_<<24|_<<16|_<<8|_,z=[],V=0;V<_;V+=4)z.push($);_=i.create(z,_),n.concat(_)},unpad:function(n){n.sigBytes-=n.words[n.sigBytes-1>>>2]&255}},l.BlockCipher=y.extend({cfg:y.cfg.extend({mode:r,padding:g}),reset:function(){y.reset.call(this);var n=this.cfg,d=n.iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var _=n.createEncryptor;else _=n.createDecryptor,this._minBufferSize=1;this._mode=_.call(n,this,d&&d.words)},_doProcessBlock:function(n,d){this._mode.processBlock(n,d)},_doFinalize:function(){var n=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){n.pad(this._data,this.blockSize);var d=this._process(!0)}else d=this._process(!0),n.unpad(d);return d},blockSize:4});var k=l.CipherParams=s.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),r=(t.format={}).OpenSSL={stringify:function(n){var d=n.ciphertext;return n=n.salt,(n?i.create([1398893684,1701076831]).concat(n).concat(d):d).toString(o)},parse:function(n){n=o.parse(n);var d=n.words;if(d[0]==1398893684&&d[1]==1701076831){var _=i.create(d.slice(2,4));d.splice(0,4),n.sigBytes-=16}return k.create({ciphertext:n,salt:_})}},c=l.SerializableCipher=s.extend({cfg:s.extend({format:r}),encrypt:function(n,d,_,$){$=this.cfg.extend($);var z=n.createEncryptor(_,$);return d=z.finalize(d),z=z.cfg,k.create({ciphertext:d,key:_,iv:z.iv,algorithm:n,mode:z.mode,padding:z.padding,blockSize:n.blockSize,formatter:$.format})},decrypt:function(n,d,_,$){return $=this.cfg.extend($),d=this._parse(d,$.format),n.createDecryptor(_,$).finalize(d.ciphertext)},_parse:function(n,d){return typeof n=="string"?d.parse(n,this):n}}),t=(t.kdf={}).OpenSSL={execute:function(n,d,_,$){return $||($=i.random(8)),n=m.create({keySize:d+_}).compute(n,$),_=i.create(n.words.slice(d),4*_),n.sigBytes=4*d,k.create({key:n,iv:_,salt:$})}},b=l.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:t}),encrypt:function(n,d,_,$){return $=this.cfg.extend($),_=$.kdf.execute(_,n.keySize,n.ivSize),$.iv=_.iv,n=c.encrypt.call(this,n,d,_.key,$),n.mixIn(_),n},decrypt:function(n,d,_,$){return $=this.cfg.extend($),d=this._parse(d,$.format),_=$.kdf.execute(_,n.keySize,n.ivSize,d.salt),$.iv=_.iv,c.decrypt.call(this,n,d,_.key,$)}})}();(function(){for(var e=H,t=e.lib.BlockCipher,G=e.algo,l=[],s=[],i=[],a=[],o=[],m=[],y=[],r=[],B=[],g=[],k=[],c=0;256>c;c++)k[c]=128>c?c<<1:c<<1^283;for(var b=0,n=0,c=0;256>c;c++){var d=n^n<<1^n<<2^n<<3^n<<4,d=d>>>8^d&255^99;l[b]=d,s[d]=b;var _=k[b],$=k[_],z=k[$],V=257*k[d]^16843008*d;i[b]=V<<24|V>>>8,a[b]=V<<16|V>>>16,o[b]=V<<8|V>>>24,m[b]=V,V=16843009*z^65537*$^257*_^16843008*b,y[d]=V<<24|V>>>8,r[d]=V<<16|V>>>16,B[d]=V<<8|V>>>24,g[d]=V,b?(b=_^k[k[k[z^_]]],n^=k[k[n]]):b=n=1}var X=[0,1,2,4,8,16,32,64,128,27,54],G=G.AES=t.extend({_doReset:function(){for(var I=this._key,T=I.words,D=I.sigBytes/4,I=4*((this._nRounds=D+6)+1),L=this._keySchedule=[],N=0;N<I;N++)if(N<D)L[N]=T[N];else{var x=L[N-1];N%D?6<D&&N%D==4&&(x=l[x>>>24]<<24|l[x>>>16&255]<<16|l[x>>>8&255]<<8|l[x&255]):(x=x<<8|x>>>24,x=l[x>>>24]<<24|l[x>>>16&255]<<16|l[x>>>8&255]<<8|l[x&255],x^=X[N/D|0]<<24),L[N]=L[N-D]^x}for(T=this._invKeySchedule=[],D=0;D<I;D++)N=I-D,x=D%4?L[N]:L[N-4],T[D]=4>D||4>=N?x:y[l[x>>>24]]^r[l[x>>>16&255]]^B[l[x>>>8&255]]^g[l[x&255]]},encryptBlock:function(I,T){this._doCryptBlock(I,T,this._keySchedule,i,a,o,m,l)},decryptBlock:function(I,T){var D=I[T+1];I[T+1]=I[T+3],I[T+3]=D,this._doCryptBlock(I,T,this._invKeySchedule,y,r,B,g,s),D=I[T+1],I[T+1]=I[T+3],I[T+3]=D},_doCryptBlock:function(I,T,D,L,N,x,S,h){for(var f=this._nRounds,p=I[T]^D[0],v=I[T+1]^D[1],Y=I[T+2]^D[2],Z=I[T+3]^D[3],W=4,A=1;A<f;A++)var F=L[p>>>24]^N[v>>>16&255]^x[Y>>>8&255]^S[Z&255]^D[W++],K=L[v>>>24]^N[Y>>>16&255]^x[Z>>>8&255]^S[p&255]^D[W++],ue=L[Y>>>24]^N[Z>>>16&255]^x[p>>>8&255]^S[v&255]^D[W++],Z=L[Z>>>24]^N[p>>>16&255]^x[v>>>8&255]^S[Y&255]^D[W++],p=F,v=K,Y=ue;F=(h[p>>>24]<<24|h[v>>>16&255]<<16|h[Y>>>8&255]<<8|h[Z&255])^D[W++],K=(h[v>>>24]<<24|h[Y>>>16&255]<<16|h[Z>>>8&255]<<8|h[p&255])^D[W++],ue=(h[Y>>>24]<<24|h[Z>>>16&255]<<16|h[p>>>8&255]<<8|h[v&255])^D[W++],Z=(h[Z>>>24]<<24|h[p>>>16&255]<<16|h[v>>>8&255]<<8|h[Y&255])^D[W++],I[T]=F,I[T+1]=K,I[T+2]=ue,I[T+3]=Z},keySize:8});e.AES=t._createHelper(G)})();H.mode.CTR=function(){var e=H.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(l,s){var i=this._cipher,a=i.blockSize,o=this._iv,m=this._counter;o&&(m=this._counter=o.slice(0),this._iv=void 0);var y=m.slice(0);i.encryptBlock(y,0),m[a-1]=m[a-1]+1|0;for(var r=0;r<a;r++)l[s+r]^=y[r]}});return e.Decryptor=t,e}();(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},t.bitshift=function(l,s){var i=0,a=l.words,o,m=0,y;if(s>0){for(;s>31;)a.splice(0,1),a.push(0),s-=32,m++;if(s==0)return i;for(var r=a.length-m-1;r>=0;r--)o=a[r],a[r]<<=s,a[r]|=i,i=o>>>32-s}else if(s<0){for(;s<-31;)a.splice(0,0,0),a.length--,s+=32,m++;if(s==0)return i;s=-s,y=(1<<s)-1;for(var r=m;r<a.length;r++)o=a[r]&y,a[r]>>>=s,a[r]|=i,i=o<<32-s}return i},t.neg=function(l){for(var s=l.words,i=0;i<s.length;i++)s[i]=~s[i];return l},t.xor=function(l,s){for(var i=0;i<l.words.length;i++)l.words[i]^=s.words[i];return l},t.bitand=function(l,s){for(var i=l.clone(),a=i.words,o=s.words,m=0;m<a.length;m++)a[m]&=o[m];return i}})(H);(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},e.lib.Base;var l=e.lib.WordArray;e.algo.AES,t.const_Zero=l.create([0,0,0,0]),t.const_One=l.create([0,0,0,1]),t.const_Rb=l.create([0,0,0,135]),t.const_Rb_Shifted=l.create([2147483648,0,0,67]),t.const_nonMSB=l.create([4294967295,4294967295,2147483647,2147483647]),t.isWordArray=function(s){return s&&typeof s.clamp=="function"&&typeof s.concat=="function"&&typeof s.words=="array"},e.pad.OneZeroPadding={pad:function(s,i){for(var a=i*4,o=a-s.sigBytes%a,m=[],y=0;y<o;y+=4){var r=0;y===0&&(r=2147483648),m.push(r)}var B=l.create(m,o);s.concat(B)},unpad:function(){}},e.pad.NoPadding={pad:function(){},unpad:function(){}},t.leftmostBytes=function(s,i){var a=s.clone();return a.sigBytes=i,a.clamp(),a},t.rightmostBytes=function(s,i){s.clamp();var a=32,o=s.clone(),m=(o.sigBytes-i)*8;if(m>=a){var y=Math.floor(m/a);m-=y*a,o.words.splice(0,y),o.sigBytes-=y*a/8}return m>0&&(t.bitshift(o,m),o.sigBytes-=m/8),o},t.popWords=function(s,i){var a=t.leftmostBytes(s,i*4);return s.words=s.words.slice(i),s.sigBytes-=i*4,a},t.shiftBytes=function(s,i){i=i||16;var a=i%4;i-=a;for(var o=l.create(),m=0;m<i;m+=4)o.words.push(s.words.shift()),s.sigBytes-=4,o.sigBytes+=4;return a>0&&(o.words.push(s.words[0]),o.sigBytes+=a,t.bitshift(s,a*8),s.sigBytes-=a),o},t.xorendBytes=function(s,i){return t.leftmostBytes(s,s.sigBytes-i.sigBytes).concat(t.xor(t.rightmostBytes(s,i.sigBytes),i))},t.dbl=function(s){var i=t.msb(s);return t.bitshift(s,1),t.xor(s,i===1?t.const_Rb:t.const_Zero),s},t.inv=function(s){var i=s.words[4]&1;return t.bitshift(s,-1),t.xor(s,i===1?t.const_Rb_Shifted:t.const_Zero),s},t.equals=function(s,i){if(!i||!i.words||s.sigBytes!==i.sigBytes)return!1;s.clamp(),i.clamp();for(var a=0,o=0;o<s.words.length;o++)a|=s.words[o]^i.words[o];return a===0},t.msb=function(s){return s.words[0]>>>31}})(H);(function(e){var t=e.lib.Base,l=e.lib.WordArray,s=e.algo.AES,i=e.ext,a=e.pad.OneZeroPadding;function o(y,r){var B=s.createEncryptor(y,{iv:l.create(),padding:e.pad.NoPadding}),g=B.finalize(r);return g}var m=e.algo.CMAC=t.extend({init:function(y){var r=o(y,i.const_Zero),B=r.clone();if(i.dbl(B),this._isTwo){var g=r.clone();i.inv(g)}else{var g=B.clone();i.dbl(g)}this._K1=B,this._K2=g,this._K=y,this._const_Bsize=16,this.reset()},reset:function(){this._x=i.const_Zero.clone(),this._counter=0,this._buffer=l.create()},update:function(y){if(!y)return this;var r=this._buffer,B=this._const_Bsize;for(typeof y=="string"&&(y=e.enc.Utf8.parse(y)),r.concat(y);r.sigBytes>B;){var g=i.shiftBytes(r,B);i.xor(this._x,g),this._x.clamp(),this._x=o(this._K,this._x),this._counter++}return this},finalize:function(y){this.update(y);var r=this._buffer,B=this._const_Bsize,g=r.clone();return r.sigBytes===B?i.xor(g,this._K1):(a.pad(g,B/4),i.xor(g,this._K2)),i.xor(g,this._x),this.reset(),o(this._K,g)},_isTwo:!1});e.CMAC=function(y,r){return m.create(y).finalize(r)},e.algo.OMAC1=m,e.algo.OMAC2=m.extend({_isTwo:!0})})(H);(function(e){var t=e.lib.Base,l=e.lib.WordArray;e.algo.AES;var s=e.ext,i=e.pad.OneZeroPadding,a=e.algo.CMAC,o=e.algo.S2V=t.extend({init:function(m){this._blockSize=16,this._cmacAD=a.create(m),this._cmacPT=a.create(m),this.reset()},reset:function(){this._buffer=l.create(),this._cmacAD.reset(),this._cmacPT.reset(),this._d=this._cmacAD.finalize(s.const_Zero),this._empty=!0,this._ptStarted=!1},updateAAD:function(m){return this._ptStarted?this:m?(typeof m=="string"&&(m=e.enc.Utf8.parse(m)),this._d=s.xor(s.dbl(this._d),this._cmacAD.finalize(m)),this._empty=!1,this):this},update:function(m){if(!m)return this;this._ptStarted=!0;var y=this._buffer,r=this._blockSize,B=r/4,g=this._cmacPT;for(typeof m=="string"&&(m=e.enc.Utf8.parse(m)),y.concat(m);y.sigBytes>=2*r;){this._empty=!1;var k=s.popWords(y,B);g.update(k)}return this},finalize:function(m){this.update(m);var y=this._blockSize,r=this._buffer;if(this._empty&&r.sigBytes===0)return this._cmacAD.finalize(s.const_One);var B;return r.sigBytes>=y?B=s.xorendBytes(r,this._d):(i.pad(r,y),B=s.xor(s.dbl(this._d),r)),this._cmacPT.finalize(B)}});e.SIV=t.extend({init:function(m){var y=m.sigBytes/2;this._s2vKey=s.shiftBytes(m,y),this._ctrKey=m},encrypt:function(m,y){!y&&m&&(y=m,m=[]);var r=o.create(this._s2vKey);Array.prototype.forEach.call(m,function(c){r.updateAAD(c)});var B=r.finalize(y),g=s.bitand(B,s.const_nonMSB),k=e.AES.encrypt(y,this._ctrKey,{iv:g,mode:e.mode.CTR,padding:e.pad.NoPadding});return B.concat(k.ciphertext)},decrypt:function(m,y){!y&&m&&(y=m,m=[]);var r=s.shiftBytes(y,16),B=s.bitand(r,s.const_nonMSB),g=e.AES.decrypt({ciphertext:y},this._ctrKey,{iv:B,mode:e.mode.CTR,padding:e.pad.NoPadding}),k=o.create(this._s2vKey);Array.prototype.forEach.call(m,function(b){k.updateAAD(b)});var c=k.finalize(g);return s.equals(r,c)?g:!1}})})(H);const Jt=new URL("/assets/sqlite.worker.710c9469.js",self.location),Qt=new URL("/assets/sql-wasm.dd613b12.wasm",self.location),es=()=>Math.random().toString(36).substr(2,9);let Me=0;async function ts(){if(window._worker)return window._worker;if(Me)return new Promise((t,l)=>{function s(){setTimeout(()=>{if(window._worker){t(window._worker);return}s()},50)}s()});Me=1;async function e(){return await Ke.exports.createDbWorker([{from:"inline",config:{serverMode:"full",url:`${location.protocol}//${location.host}/analytics.sqlite3.png`,requestChunkSize:1024*32}}],Jt.toString(),Qt.toString())}return window._worker=await e(),window._worker}async function se(e){let t=await ts(),l=es();console.time("query time "+l);let s=await t.db.query(e);return console.log("query",e,s),console.timeEnd("query time "+l),s}function be(e){return e||(e=new Date),(typeof e!="object"||!e.toISOString)&&(e=new Date(e)),e.toISOString().slice(0,10)}function pe(e,t,l){let s=[],i;if(e.state.key&&(i=H.SIV.create(H.enc.Hex.parse(e.state.key))),e.state.host){let a=`host = '${e.state.host}'`;if(i){let o=i.encrypt(e.state.host).toString();a=`(${a} OR host = '${o}')`}s.push(a)}if(e.state.path){let a=`pathname = '${e.state.path}'`;if(i){let o=i.encrypt(e.state.path).toString();a=`(${a} OR pathname = '${o}')`}s.push(a)}if(e.state.referrer!==""){let a=e.state.referrer||"",o=`referer_host = '${a}'`;if(i&&a){let m=i.encrypt(a).toString();o=`(${o} OR referer_host = '${m}')`}s.push(o)}if(e.state.utm_source!==""){let a=e.state.utm_source||null,o=a?`utm_source = '${a}'`:"utm_source is null";if(i&&a){let m=i.encrypt(a).toString();o=`(${o} OR utm_source = '${m}')`}s.push(o)}if(e.state.utm_medium!==""){let a=e.state.utm_medium||null,o=a?`utm_medium = '${a}'`:"utm_medium is null";if(i&&a){let m=i.encrypt(a).toString();o=`(${o} OR utm_medium = '${m}')`}s.push(o)}if(e.state.utm_campaign!==""){let a=e.state.utm_campaign||null,o=a?`utm_campaign = '${a}'`:"utm_campaign is null";if(i&&a){let m=i.encrypt(a).toString();o=`(${o} OR utm_campaign = '${m}')`}s.push(o)}return e.state.os&&s.push(`os = '${e.state.os}'`),e.state.device&&s.push(`device_type = '${e.state.device}'`),e.state.is_bot!==""&&s.push(`bot = '${e.state.is_bot}'`),e.state.is_new!==""&&s.push(`is_new = '${e.state.is_new}'`),e.state.browser&&s.push(`browser = '${e.state.browser}'`),e.state.language&&s.push(`lang = '${e.state.language}'`),e.state.country&&s.push(`country_code = '${e.state.country}'`),l?s.push(`date BETWEEN '${be(e.state.comparisonStart)}' AND '${be(e.state.comparisonEnd)}'`):t||s.push(`date BETWEEN '${be(e.state.start)}' AND '${be(e.state.end)}'`),(s.length?" WHERE ":"")+(s.join(" AND ")||"")}async function ss(e){if(!e.state.host)return[];const t=e.state.key?H.SIV.create(H.enc.Hex.parse(e.state.key)):null;let l=`SELECT pathname, AVG(load_time) as AvgLoadTime from visits${pe(e)} GROUP BY pathname ORDER BY AvgLoadTime DESC LIMIT 10;`,s=await se(l);return t&&s.forEach(i=>{try{let a=t.decrypt(H.enc.Hex.parse(i.pathname)).toString(H.enc.Utf8);a&&a!="false"&&(i.pathname=a)}catch{}}),s}async function ze(e,t="hour",l=10){if(!e.state.host)return[];const s=e.state.key?H.SIV.create(H.enc.Hex.parse(e.state.key)):null,i=e.state.showVisitors?"count(DISTINCT ip)":"count(*)";let a=t==="hour"||t==="date",o=a?t:i,m=a?"ASC":"DESC",y=a?"":` LIMIT ${l}`,r=`SELECT ${t}, ${i} FROM visits${pe(e)} GROUP BY ${t} ORDER BY ${o} ${m}${y};`,B=await se(r);return s&&B.forEach(g=>{try{let k=s.decrypt(H.enc.Hex.parse(g[t])).toString(H.enc.Utf8);k&&k!="false"&&(g[t]=k)}catch{}}),B}async function Re(e,t="pathname",l="EntrypageCount",s=10){if(!e.state.host)return[];const i=e.state.key?H.SIV.create(H.enc.Hex.parse(e.state.key)):null;let a=`SELECT ${t},
    COUNT(CASE WHEN ts = First THEN 1 END) AS EntrypageCount,
    COUNT(CASE WHEN ts = Last THEN 1 END) AS ExitPagecount
FROM (SELECT *,
    MIN(ts) OVER (PARTITION BY ip, 'date') AS First,
    MAX(ts) OVER (PARTITION BY ip, 'date') AS Last
    FROM visits) T
${pe(e)}
GROUP BY ${t}
ORDER BY ${l} DESC LIMIT ${s}`,o=await se(a);return o=o.filter(m=>m[l]>0),i&&o.forEach(m=>{try{let y=i.decrypt(H.enc.Hex.parse(m[t])).toString(H.enc.Utf8);y&&y!="false"&&(m[t]=y)}catch{}}),o}const ne={toObject:function(e){return typeof e=="string"?JSON.parse(e):e},toBoolean:function(e){return typeof e=="string"?e==="true":e},toInt:function(e){return typeof e=="string"?parseInt(e):e}},C={id:{type:String,required:!0},data:{type:[String,Array],required:!0},barColors:{type:[String,Array,Function],required:!1},xkey:{type:String,required:!1,default:"key"},ykeys:{type:[String,Array],required:!1,default:function(){return["value"]}},labels:{type:[String,Array],required:!1,default:function(){return["Value"]}},hoverCallback:{type:Function,required:!1},axes:{type:[Boolean,String],required:!1,default:!0},hideHover:{type:String,required:!1},stacked:{type:[Boolean,String],required:!1},resize:{type:[Boolean,String],required:!1},horizontal:{type:[Boolean,String],required:!1,default:!1},grid:{type:[Boolean,String],required:!1,default:!0},gridTextColor:{type:String,required:!1,default:"#888"},gridTextSize:{type:[Number,String],required:!1,default:12},gridTextFamily:{type:String,required:!1,default:"sans-serif"},gridTextWeight:{type:String,required:!1,default:"normal"},colors:{type:[String,Array],required:!1},formatter:{type:Function,required:!1},lineColors:{type:[String,Array,Function],required:!1},xLabels:{type:String,required:!1},lineWidth:{type:[Number,String],required:!1},pointSize:{type:[Number,String],required:!1},pointFillColors:{type:[String,Array],required:!1},pointStrokeColors:{type:[String,Array],required:!1},ymax:{type:String,required:!1},ymin:{type:String,required:!1},smooth:{type:[Boolean,String],required:!1,default:!0},parseTime:{type:[Boolean,String],required:!1,default:!0},postUnits:{type:String,required:!1},preUnits:{type:String,required:!1},dateFormat:{type:Function,required:!1},xLabelFormat:{type:Function,required:!1},yLabelFormat:{type:Function,required:!1},xLabelAngle:{type:String,required:!1},goals:{type:[String,Array],required:!1},goalStrokeWidth:{type:[Number,String],required:!1},goalLineColors:{type:[String,Array],required:!1},events:{type:[String,Array],required:!1},eventStrokeWidth:{type:String,required:!1},eventLineColors:{type:[String,Array],required:!1},fillOpacity:{type:String,required:!1},behaveLikeLine:{type:[Boolean,String],required:!1,default:!1}},is={id:C.id,data:C.data,barColors:C.barColors,xkey:C.xkey,ykeys:C.ykeys,labels:C.labels,xLabelFormat:C.xLabelFormat,yLabelFormat:C.yLabelFormat,xLabelAngle:C.xLabelAngle,hoverCallback:C.hoverCallback,grid:C.grid,horizontal:C.horizontal,axes:C.axes,hideHover:C.hideHover,stacked:C.stacked,resize:C.resize,ymax:C.ymax,ymin:C.ymin,gridTextColor:C.gridTextColor,gridTextSize:C.gridTextSize,gridTextFamily:C.gridTextFamily,gridTextWeight:C.gridTextWeight},as={id:C.id,data:C.data,colors:C.colors,formatter:C.formatter,resize:C.resize},xe={id:C.id,data:C.data,resize:C.resize,lineColors:C.lineColors,xkey:C.xkey,ykeys:C.ykeys,labels:C.labels,xLabels:C.xLabels,grid:C.grid,gridTextColor:C.gridTextColor,gridTextSize:C.gridTextSize,gridTextFamily:C.gridTextFamily,gridTextWeight:C.gridTextWeight,lineWidth:C.lineWidth,pointSize:C.pointSize,pointFillColors:C.pointFillColors,pointStrokeColors:C.pointStrokeColors,ymax:C.ymax,ymin:C.ymin,smooth:C.smooth,hideHover:C.hideHover,parseTime:C.parseTime,postUnits:C.postUnits,preUnits:C.preUnits,dateFormat:C.dateFormat,xLabelFormat:C.xLabelFormat,yLabelFormat:C.yLabelFormat,xLabelAngle:C.xLabelAngle,goals:C.goals,goalStrokeWidth:C.goalStrokeWidth,goalLineColors:C.goalLineColors,events:C.events,eventStrokeWidth:C.eventStrokeWidth,eventLineColors:C.eventLineColors,fillOpacity:C.fillOpacity,hoverCallback:C.hoverCallback},Ne={behaveLikeLine:C.behaveLikeLine};for(var Ee in xe)xe.hasOwnProperty(Ee)&&(Ne[Ee]=xe[Ee]);const $e={addOption(e,t){this[e]&&(t[e]=this[e])},addOptionAsObject(e,t){this[e]&&(t[e]=ne.toObject(this[e]))}};var ns={bar:{props:is,methods:$e},donut:{props:as,methods:$e},line:{props:xe,methods:$e},area:{props:Ne,methods:$e}},ge=(e,t)=>{const l=e.__vccOpts||e;for(const[s,i]of t)l[s]=i;return l};const os={name:"area-chart",mixins:[ns.area],data(){return{chart:null}},watch:{data(e){this.$nextTick(()=>{this.chart.options.labels=ne.toObject(this.labels),this.chart.options.xkey=this.xkey,this.chart.options.ykeys=ne.toObject(this.ykeys),this.lineColors&&(this.chart.options.lineColors=ne.toObject(this.lineColors)),this.chart.setData(ne.toObject(this.data))})}},mounted(){let e={element:this.id,data:ne.toObject(this.data),resize:ne.toBoolean(this.resize),labels:ne.toObject(this.labels),xkey:this.xkey,ykeys:ne.toObject(this.ykeys),grid:ne.toBoolean(this.grid),gridTextColor:this.gridTextColor,gridTextSize:ne.toInt(this.gridTextSize),gridTextFamily:this.gridTextFamily,gridTextWeight:this.gridTextWeight,lineWidth:this.lineWidth,pointSize:this.pointSize,ymax:this.ymax,ymin:this.ymin,smooth:ne.toBoolean(this.smooth),hideHover:this.hideHover,parseTime:ne.toBoolean(this.parseTime),postUnits:this.postUnits,preUnits:this.preUnits,xLabelAngle:this.xLabelAngle,goalStrokeWidth:this.goalStrokeWidth,eventStrokeWidth:this.eventStrokeWidth,fillOpacity:this.fillOpacity,behaveLikeLine:this.behaveLikeLine};this.addOptionAsObject("lineColors",e),this.addOption("xLabels",e),this.addOptionAsObject("pointFillColors",e),this.addOptionAsObject("pointStrokeColors",e),this.addOption("dateFormat",e),this.addOption("xLabelFormat",e),this.addOption("yLabelFormat",e),this.addOptionAsObject("goals",e),this.addOptionAsObject("goalLineColors",e),this.addOptionAsObject("events",e),this.addOptionAsObject("eventLineColors",e),this.addOption("hoverCallback",e),this.chart=Morris.Area(e)}},rs=["id"];function ls(e,t,l,s,i,a){return M(),R("div",{id:e.id},null,8,rs)}var cs=ge(os,[["render",ls]]);const us={id:"visits"},ds={key:0,class:"spinner-border spinme",role:"status"},hs={key:1},ms={class:"edge"},fs={setup(e){const t=he();let{start:l,end:s,host:i,path:a,os:o,device:m,is_bot:y,is_new:r,browser:B,language:g,referrer:k,utm_source:c,utm_medium:b,utm_campaign:n,country:d,range:_,summary:$,showVisitors:z}=fe();const V=J([]),X=J(!0),G=J(!1),I=J(null),T=le(()=>_.value<2),D=le(()=>T.value?"hour":"date"),L=v=>T.value?new Date(v).toLocaleString():`${new Date(v).toLocaleString(navigator.language||"en-us",{weekday:"long"})},
${new Date(v).toLocaleDateString()}`,N=J("day");async function x(){if(!i.value)return X.value=!1;_.value>1e3?N.value="month":N.value=T.value?"hour":"day";const v=pe(t);let Y=v.split(" ").pop().replace("'","").replace("'",""),Z=z.value?"count(DISTINCT ip)":"count(*)",W=T.value?"hour":"date";const A=`SELECT ${W}, ${Z} FROM visits${v} GROUP BY ${W} ORDER BY ${W} ASC;`;let F=await se(A);F.forEach(E=>{T.value&&(E.hour=+new Date(`${Y}T${E.hour<10?"0":""}${E.hour}:00:00Z`)),E.value=E["count(DISTINCT ip)"]||E["count(*)"],delete E["count(DISTINCT ip)"],delete E["count(*)"]}),F.filter(E=>E.date==new Date().toISOString().split("T")[0]).length||_.value==1?G.value=!0:G.value=!1,V.value=F,X.value=!1;const K=`SELECT hour, count(*) FROM visits${pe(t,1)} AND date = '${be()}' GROUP BY hour`,ke=(await se(K)).pop();let ye=0;ke&&(ye=ke["count(*)"]),t.commit("setLiveVisitors",ye)}function S(v,Y,Z,W){return W.date&&(I.value=W.date),Z}function h(v,Y){t.commit("setRange",v)}function f(){if(I.value){let v=new Date-new Date(I.value),Y=Math.floor(v/864e5)*-1;Y>-33&&Y<2&&h(Y)}}function p(){(_.value===1||_.value<0)&&h(7)}return _e(x),w(i,x),w(a,x),w(_,x),w(z,x),w(o,x),w(m,x),w(y,x),w(r,x),w(B,x),w(g,x),w(k,x),w(c,x),w(b,x),w(n,x),w(d,x),(v,Y)=>(M(),R("div",us,[X.value?(M(),R("div",ds)):V.value.length?(M(),Ie(cs,{key:2,id:"line",data:V.value,xkey:O(D),ykey:"value",resize:"true",labels:O(z)?'[ "Visitors" ]':'[ "Pageviews" ]',"line-color":"#2847b7","fill-opacity":"0.16","line-width":"4",dateFormat:L,smooth:!1,xLabelAngle:"45",removed:"","data-xLabelFormat":"labelFormat","data-xLabels":"xLabel",hoverCallback:S,onClick:f,onDblclick:p,grid:"true","grid-text-weight":"bold"},null,8,["data","xkey","labels"])):(M(),R("div",hs,"No data for selected period")),Be(u("div",ms,null,512),[[Ae,G.value]])]))}};var ps=ge(fs,[["__scopeId","data-v-9084c4ac"]]);const vs={key:0,class:"card-header"},gs={class:"card-body"},ys={key:0,class:"card-title"},_s={key:1,class:"spinner-border spinme",role:"status"},bs={key:1,class:"card-footer"},ks={props:{header:String,title:String,body:String,footer:String,loading:Boolean},setup(e){const{dark:t}=fe();return(l,s)=>(M(),R("div",{class:oe(["card min-357",{"bg-dark":O(t)}])},[e.header?(M(),R("div",vs,[De(l.$slots,"header",{},()=>[ee(q(e.header),1)],!0)])):Q("",!0),u("div",gs,[e.title?(M(),R("h5",ys,q(e.title),1)):Q("",!0),e.loading?(M(),R("div",_s)):Q("",!0),De(l.$slots,"default",{},()=>[ee(q(e.body),1)],!0)]),e.footer?(M(),R("div",bs,[De(l.$slots,"footer",{},()=>[ee(q(e.footer),1)],!0)])):Q("",!0)],2))}};var Oe=ge(ks,[["__scopeId","data-v-0df628f2"]]);const ws={class:"card-title mb-1"},Ss={props:{title:String,underline:Boolean,muted:{type:Boolean,default:!0}},setup(e){const t=e,l=he(),s=J("0"),i=J("0"),{host:a,path:o,os:m,device:y,is_bot:r,is_new:B,browser:g,language:k,referrer:c,utm_source:b,utm_medium:n,utm_campaign:d,country:_,range:$,start:z,summary:V}=fe();function X(S){return`${parseFloat((S*100).toFixed(2)).toLocaleString()}%`}function G(S){return S==parseInt(S)&&(S=parseInt(S)),typeof S=="number"&&(S=S.toLocaleString()),S}function I(S){return(S-(S%=60))/60+"m "+parseInt(S)}let T=le(()=>{let S=(i.value-s.value)/s.value;return s.value?S:0});function D(S){return t.title==="Bounce Rate"?T.value>0:T.value<0}async function L(){if(!l.state.host)return;const S=pe(l);if(t.title==="Visitors"){const h=`SELECT count(DISTINCT ip) from visits${S}`;let f=await se(h);i.value=f[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const h=`SELECT count(*) from VISITS${S}`;let f=await se(h);i.value=f[0]["count(*)"]}else if(t.title==="Bounce Rate"){let h=`SELECT count(DISTINCT ip) from visits${S}`,f=await se(h),p=f[0]["count(DISTINCT ip)"];h=`SELECT count(DISTINCT ip) from visits${S} AND is_new = 1`,f=await se(h);let v=f[0]["count(DISTINCT ip)"];i.value=p===0?0:v/p}else if(t.title==="Session Length"){const h=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${S} GROUP BY ip) x`;let f=await se(h);i.value=f[0]["AVG(x.MaxValue)"]}N()}async function N(S){if(!l.state.host)return;const h=pe(l,0,1);if(t.title==="Visitors"){const f=`SELECT count(DISTINCT ip) from visits${h}`;let p=await se(f);s.value=p[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const f=`SELECT count(*) from VISITS${h}`;let p=await se(f);s.value=p[0]["count(*)"]}else if(t.title==="Bounce Rate"){let f=`SELECT count(DISTINCT ip) from visits${h}`,p=await se(f),v=p[0]["count(DISTINCT ip)"];f=`SELECT count(DISTINCT ip) from visits${h} AND is_new = 1`,p=await se(f);let Y=p[0]["count(DISTINCT ip)"];s.value=v===0?0:Y/v}else if(t.title==="Session Length"){const f=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${h} GROUP BY ip) x`;let p=await se(f);s.value=p[0]["AVG(x.MaxValue)"]}}const x=le(()=>{if(console.log("range",$),t.title==="Visitors")return i.value;if(t.title==="Total Pageviews")return i.value;if(t.title==="Bounce Rate")return i.value?X(i.value):0;if(t.title==="Session Length")return I(i.value)||0});return _e(L),w(a,L),w(o,L),w($,L),w(m,L),w(y,L),w(r,L),w(B,L),w(g,L),w(k,L),w(c,L),w(b,L),w(n,L),w(d,L),w(_,L),(S,h)=>(M(),R("div",{class:oe(["col-6 col-md-3",{cp:e.underline,selected:!e.muted&&!e.underline}])},[u("h6",{class:oe(["card-subtitle mb-2",{"text-muted":e.muted,"text-decoration-underline":e.underline,"link-color":e.underline}])},q(e.title),3),u("h4",ws,q(G(O(x))),1),Be(u("span",{class:oe(["badge rounded-pill",{"bg-danger":D(O(T)),"bg-success":!D(O(T))}])},q((O(T)>0?"+":"")+X(O(T))),3),[[Ae,O(T)]])],2))}};var Ce=ge(Ss,[["__scopeId","data-v-d563454e"]]);const xs={class:"mt-2 pseudotable"},$s={key:0,class:"spinner-border spinme",role:"status"},Cs={key:1,class:"mb-1"},Bs={class:"mb-1"},Ts=ee("\xA0 "),Ds={key:0,style:{display:"inline-block","margin-left":"-3px"}},Ls=ee("\xA0\u2009 "),Es={key:2},Os={key:3,style:{display:"inline-block"}},Is=["src"],As=ee("\xA0\u2009 "),Fs={key:4,style:{display:"inline-block"}},Ms=["src"],zs=ee("\xA0\u2009 "),Rs={key:5,style:{display:"inline-block"}},Ns=["src"],Ps=ee("\xA0\u2009 "),Vs={key:6,style:{display:"inline-block"}},Ws=["onClick"],qs={key:7,style:{display:"inline-block"}},Ks=["href"],Us={key:8},Hs={class:"float-right text-right pt-1"},ie={props:{column:String,iconify:Boolean,favicons:Boolean,browserIcons:Boolean,osIcons:Boolean,links:Boolean,setter:String,linkPrefix:String,limit:Number,defaultText:String,valueColumn:String,loadTimes:Boolean,valueFormatter:Function,keyFormatter:Function},setup(e){const{column:t,iconify:l,favicons:s,browserIcons:i,osIcons:a,links:o,setter:m,linkPrefix:y,limit:r,defaultText:B,valueColumn:g,loadTimes:k,valueFormatter:c,keyFormatter:b}=e,n=he(),{host:d,path:_,os:$,device:z,is_bot:V,is_new:X,browser:G,language:I,referrer:T,utm_source:D,utm_medium:L,utm_campaign:N,country:x,range:S,summary:h,showVisitors:f}=fe(),p=le(()=>g||(f.value?"count(DISTINCT ip)":"count(*)")),v=J([]),Y=J(0),Z=J(!0);async function W(){let E=[];g==="AvgLoadTime"?E=await ss(n):g==="EntrypageCount"?E=await Re(n,t,g,r||10):g==="ExitPagecount"?E=await Re(n,t,g,r||10):E=await ze(n,t,r||10);let te=E.filter(P=>!P[t]);if(te.length>1){let P=te.map(re=>re[p.value]).reduce((re,ve)=>re+=ve),ce=E.filter(re=>re[t]),de={};de[t]=null,de[p.value]=P,ce.unshift(de),E=ce}E.sort((P,ce)=>ce[p.value]-P[p.value]),v.value=E;try{Y.value=E[0][p.value]}catch{Y.value=0}Z.value=!1}function A(E){return E==parseInt(E)&&(E=parseInt(E)),typeof E=="number"&&(E=E.toLocaleString()),E}function F(E,te=48,P="web"){const ce="avant,basilisk,brave,browsh,chrome,chromium,deno,dolphin,edge,electron,epic,falkon,firefox,geckoview,hermes,icecat,jsdom,konqueror,maxthon,midori,netsurf,node.js,nw.js,opera,otter,puffin,qutebrowser,safari,seamonkey,servo,silk,spidermonkey,tor,uc,v8,vivaldi,web,webkit,yandex".split(","),de=E.toLowerCase().trim().split(" ");let re=ce.filter(ve=>de.includes(ve));return re.length&&(P=re[0]),`https://cdnjs.cloudflare.com/ajax/libs/browser-logos/72.0.0/${P}/${P}_${te}x${te}.png`}function K(E){const te="AIX,AND,AMG,ATV,ARL,BTR,SBA,BEO,BLB,QNX,CAI,CES,COS,CYN,DEB,DEE,DFB,FED,FOS,FIR,BSD,FYD,GNT,GTV,HPX,HAI,IPA,HAR,KOS,KNO,KBT,LIN,LBT,MAC,MAE,MAG,MDR,SMG,MIN,MOR,NBS,WII,NDS,OS2,OBS,OWR,PCL,PSP,PS3,RHT,ROS,ROK,RSO,REM,REX,SAB,SSE,SAF,SLW,SOS,SYL,SYM,SYS,S40,S60,SY3,TDX,TIZ,UBT,WAS,WHS,WIN,WCE,WIO,WMO,WPH,WRT,XBX,XBT,YNS,IOS,POS,WOS".split(","),P="aix,android,amigaos,tvos,arch linux,backtrack,bada,beos,blackberry os,blackberry tablet os,caixa m\xE1gica,centos,chrome os,cyanogenmod,debian,deepin,dragonfly,fedora,firefox os,fire os,freebsd,fydeos,gentoo,google tv,hp-ux,haiku os,ipados,harmonyos,kaios,knoppix,kubuntu,linux,lubuntu,mac,maemo,mageia,mandriva,meego,mint,morphos,netbsd,nintendo,nintendo mobile,os/2,openbsd,openwrt,pclinuxos,playstation portable,playstation,red hat,risc os,roku os,rosa,remix os,rex,sabayon,suse,sailfish os,slackware,solaris,syllable,symbian,symbian os,symbian os series 40,symbian os series 60,symbian^3,threadx,tizen,ubuntu,watchos,whale os,windows,windows ce,windows iot,windows mobile,windows phone,windows rt,xbox,xubuntu,yunos,ios,palmos,webos".split(","),ce="16,24,32,48,64,128,256,512".split(",");let de="",re=ce[3];E=E.toLowerCase().trim();let ve=P.map(Pe=>E.includes(Pe)).indexOf(!0);return ve>0&&(de=te[ve]),de?`https://cdn.jsdelivr.net/npm/@egoistdeveloper/operating-system-logos/src/${re}x${re}/${de}.png`:"/default.png"}function ue(E){return E=(E+"").toLowerCase().trim(),{desktop:"bi bi-pc-display-horizontal",laptop:"bi bi-laptop",tablet:"bi bi-tablet",mobile:"bi bi-phone",returning:"bi bi-arrow-repeat",new:"bi bi-person-plus","normal users":"bi bi-person-square","headless browsers":"bi bi-robot"}[E]}function ke(E){return E=(E+"").toLowerCase().trim(),E.indexOf("http")===0&&(E=new URL(E).hostname),E}function ye(E,te=40){return E&&E.length>te&&(E=E.substring(0,te)+"..."),E}return _e(W),w(d,W),w(_,W),w(S,W),w(f,W),w($,W),w(z,W),w(V,W),w(X,W),w(G,W),w(I,W),w(T,W),w(D,W),w(L,W),w(N,W),w(x,W),(E,te)=>(M(),R("div",xs,[Z.value?(M(),R("div",$s)):v.value.length?(M(!0),R(we,{key:2},Te(v.value,P=>(M(),R("div",Bs,[u("div",{class:"shaded d-inline-block bg-grey text-nowrap pt-1 pb-1",style:Ue(`width: ${P[O(p)]/Y.value*85}%`)},[Ts,e.iconify&&ue(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column])?(M(),R("div",Ds,[u("i",{class:oe(ue(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column]))},null,2),Ls])):Q("",!0),!P[e.column]&&e.setter?(M(),R("a",{key:1,class:"text-decoration-underline cp",onClick:te[0]||(te[0]=ce=>e.setter&&O(n).commit(e.setter,0))},q(e.defaultText||"None"),1)):P[e.column]?Q("",!0):(M(),R("span",Es,q(e.defaultText||"None"),1)),e.favicons?(M(),R("div",Os,[P[e.column]&&e.favicons?(M(),R("img",{key:0,src:`https://logo.clearbit.com/${ke(P[e.column])}`,onerror:"this.src='default.png';"},null,8,Is)):Q("",!0),As])):Q("",!0),e.browserIcons?(M(),R("div",Fs,[P[e.column]&&e.browserIcons?(M(),R("img",{key:0,src:`${F(P[e.column])}`},null,8,Ms)):Q("",!0),zs])):Q("",!0),e.osIcons?(M(),R("div",Rs,[P[e.column]&&e.osIcons?(M(),R("img",{key:0,src:`${K(P[e.column])}`},null,8,Ns)):Q("",!0),Ps])):Q("",!0),e.setter?(M(),R("div",Vs,[P[e.column]?(M(),R("a",{key:0,class:"d-inline-block text-truncate cp",onClick:ce=>O(n).commit(e.setter,P[e.column])},q(ye(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column])),9,Ws)):Q("",!0)])):e.links?(M(),R("div",qs,[P[e.column]&&e.links?(M(),R("a",{key:0,class:"d-inline-block text-truncate",href:`${P[e.column].indexOf("http")?"http://":""}${e.linkPrefix||""}${P[e.column]}`,target:"_blank"},q(ye(P[e.column])),9,Ks)):Q("",!0)])):Q("",!0),P[e.column]&&!e.links&&!e.setter?(M(),R("span",Us,q(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column]),1)):Q("",!0)],4),u("span",Hs,q(e.valueFormatter?e.valueFormatter(P[O(p)]):A(P[O(p)])),1)]))),256)):(M(),R("div",Cs," No data for selected period "))]))}},Ys={name:"svg-map",data(){return{id:"svg-map-"+Math.random().toString(36).substr(2,9)}},props:{countries:{type:Object},dark:{type:Boolean},showVisitors:{type:Boolean}},methods:{createMap(){let e={};document.querySelectorAll(".svgMap-tooltip").forEach(t=>t.remove()),this.showVisitors?e.visitors={name:"visitors",format:"{0}",thousandSeparator:","}:e.pageviews={name:"pageviews",format:"{0}",thousandSeparator:","},new svgMap({targetElementID:this.id,colorMax:this.dark?"#4c9be8":"#3459E6",colorMin:"#c7d2fc",colorNoData:this.dark?"rgb(78, 93, 108)":"#E2E2E2",data:{data:e,applyData:this.showVisitors?"visitors":"pageviews",values:this.countries||{}}}),this.$nextTick(()=>{document.querySelectorAll(".svgMap-map-image path[data-id]").forEach(t=>{t.onclick=l=>{const s=t.getAttribute("data-id");this.$emit("clicked",s)}})})}},computed:{bundle(){let{countries:e,dark:t}=this;return{countries:e,dark:t}}},mounted(){this.createMap()},watch:{bundle(e){this.$refs.svgMap.innerHTML="",this.$nextTick(()=>{this.createMap()})}}},Gs=["id"];function Xs(e,t,l,s,i,a){return M(),R("div",{id:i.id,ref:"svgMap"},null,8,Gs)}var Zs=ge(Ys,[["render",Xs]]);const j=e=>(He("data-v-0e2a2154"),e=e(),Ye(),e),js={class:"container mt-5"},Js={class:"row"},Qs={class:"col-md-12"},ei={class:"row p-1 pt-2"},ti={class:"row mt-3"},si={class:"col-md-6"},ii={class:"card-body"},ai=Fe('<h5 class="card-title float-left tweaked" data-v-0e2a2154>Sources</h5><ul class="nav nav-tabs float-right" data-v-0e2a2154><li class="nav-item ms-auto" data-v-0e2a2154><a class="nav-link active" data-bs-toggle="tab" href="#referrers" data-v-0e2a2154><span class="d-none d-sm-inline" data-v-0e2a2154>Referrers</span><span class="d-inline d-sm-none" data-v-0e2a2154>All</span></a></li><li class="nav-item ms-auto" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#referrer_urls" data-v-0e2a2154>URLs</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#medium" data-v-0e2a2154>Medium</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#source" data-v-0e2a2154>Source</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#campaign" data-v-0e2a2154>Campaign</a></li></ul>',2),ni={class:"tab-content mt-5"},oi={class:"tab-pane fade active show",id:"referrers"},ri=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),li={class:"text-muted w-495 d-inline-block text-right"},ci={class:"tab-pane fade show",id:"referrer_urls"},ui=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),di={class:"text-muted w-495 d-inline-block text-right"},hi={class:"tab-pane fade show",id:"medium"},mi=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),fi={class:"text-muted w-495 d-inline-block text-right"},pi={class:"tab-pane fade show",id:"source"},vi=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),gi={class:"text-muted w-495 d-inline-block text-right"},yi={class:"tab-pane fade show",id:"campaign"},_i=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),bi={class:"text-muted w-495 d-inline-block text-right"},ki={class:"col-md-6 mt-3 mt-sm-0"},wi={class:"card-body"},Si=Fe('<h5 class="card-title float-left tweaked" data-v-0e2a2154>Pages</h5><ul class="nav nav-tabs float-right" data-v-0e2a2154><li class="nav-item ms-auto" data-v-0e2a2154><a class="nav-link active" data-bs-toggle="tab" href="#pages" data-v-0e2a2154>Top Pages</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#loadtimes" data-v-0e2a2154>Load Times</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#entrypages" data-v-0e2a2154>Entry <span class="d-none d-sm-inline" data-v-0e2a2154> Pages</span></a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#exitpages" data-v-0e2a2154>Exit <span class="d-none d-sm-inline" data-v-0e2a2154> Pages</span></a></li></ul>',2),xi={class:"tab-content mt-5"},$i={class:"tab-pane fade show active",id:"pages"},Ci=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Bi={class:"text-muted w-495 d-inline-block text-right"},Ti={class:"tab-pane fade show",id:"loadtimes"},Di=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Li=j(()=>u("small",{class:"text-muted w-495 d-inline-block text-right"},"Avg. Load Time",-1)),Ei={class:"tab-pane fade show",id:"entrypages"},Oi=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Ii=j(()=>u("small",{class:"text-muted w-495 d-inline-block text-right"},"Entries",-1)),Ai={class:"tab-pane fade show",id:"exitpages"},Fi=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Mi=j(()=>u("small",{class:"text-muted w-495 d-inline-block text-right"},"Exits",-1)),zi={class:"row mt-3"},Ri={class:"col-md-6"},Ni={class:"col-md-6 mt-3 mt-sm-0"},Pi=j(()=>u("h5",{class:"card-title float-left tweaked"},"Users",-1)),Vi=j(()=>u("ul",{class:"nav nav-tabs float-right"},[u("li",{class:"nav-item ms-auto"},[u("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#size"},[u("span",{class:"d-none d-sm-inline"},"Device "),ee("Type")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link d-none d-sm-inline-block","data-bs-toggle":"tab",href:"#new"},"Returning")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#browser"},"Browser")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#language"},[ee("Lang"),u("span",{class:"d-none d-sm-inline"},"uage")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#os"},"OS")])],-1)),Wi={class:"tab-content mt-5"},qi={class:"tab-pane fade show active",id:"size"},Ki=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Device Type",-1)),Ui={class:"text-muted w-495 d-inline-block text-right"},Hi=j(()=>u("hr",null,null,-1)),Yi={class:"tab-pane fade",id:"new"},Gi=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"New vs. Returning",-1)),Xi={class:"text-muted w-495 d-inline-block text-right"},Zi={class:"tab-pane fade",id:"browser"},ji=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Browser",-1)),Ji={class:"text-muted w-495 d-inline-block text-right"},Qi={class:"tab-pane fade",id:"language"},ea=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Language",-1)),ta={class:"text-muted w-495 d-inline-block text-right"},sa={class:"tab-pane fade",id:"os"},ia=j(()=>u("small",{class:"text-muted w-495 d-inline-block"},"OS",-1)),aa={class:"text-muted w-495 d-inline-block text-right"},na={setup(e){const t=S=>typeof S=="number"?Math.max(0,S.toFixed(2)):S,l=S=>(S||"").charAt(0).toUpperCase()+(S||"").slice(1),s=S=>S?"Headless Browsers":"Normal Users",i=S=>S?"New":"Returning",a=S=>{let h={aa:"Afar",ab:"Abkhazian",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bh:"Bihari languages",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan; Valencian",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi; Dhivehi; Maldivian",dz:"Dzongkha",ee:"Ewe",el:"Greek, Modern (1453-)",en:"English",eo:"Esperanto",es:"Spanish; Castilian",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fulah",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Gaelic; Scomttish Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian; Haitian Creole",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ie:"Interlingue; Occidental",ig:"Igbo",ii:"Sichuan Yi; Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu; Gikuyu",kj:"Kuanyama; Kwanyama",kk:"Kazakh",kl:"Kalaallisut; Greenlandic",km:"Central Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kirghiz; Kyrgyz",la:"Latin",lb:"Luxembourgish; Letzeburgesch",lg:"Ganda",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Bokm\xE5l, Norwegian; Norwegian Bokm\xE5l",nd:"Ndebele, North; North Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch; Flemish",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",no:"Norwegian",nr:"Ndebele, South; South Ndebele",nv:"Navajo; Navaho",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",om:"Oromo",or:"Oriya",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",pi:"Pali",pl:"Polish",ps:"Pushto; Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ro:"Romanian; Moldavian; Moldovan",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Sotho, Southern",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap\xFCk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zh:"Chinese",zu:"Zulu"},f=S;try{f=f.toLowerCase().split("-")[0]}catch{}try{f=h[f]}catch{}return(!f||f=="undefined")&&(f="Unknown"),f+" ("+S+")"},o=he(),m=J({}),{range:y,host:r,path:B,os:g,device:k,is_bot:c,is_new:b,browser:n,language:d,referrer:_,utm_source:$,utm_medium:z,utm_campaign:V,country:X,dark:G,summary:I,showVisitors:T}=fe(),D=le(()=>T.value?"Visitors":"Pageviews");async function L(){let S=await ze(o,"country_code",999),h={};S.forEach(f=>{T.value?h[f.country_code]={visitors:f["count(DISTINCT ip)"]}:h[f.country_code]={pageviews:f["count(*)"]}}),m.value=h}function N(S){console.log("clicked on",S),o.commit("setCountry",S)}function x(){clearInterval(window._latest_refresh_timer),window._latest_refresh_timer=setInterval(()=>{y.value==1&&location.reload(!0)},5*60*1e3)}return x(),_e(L),w(r,L),w(B,L),w(y,L),w(T,L),w(g,L),w(k,L),w(c,L),w(b,L),w(n,L),w(d,L),w(_,L),w($,L),w(z,L),w(V,L),w(X,L),w(y,x),(S,h)=>(M(),R("div",js,[U(jt),u("div",Js,[u("div",Qs,[U(Oe,null,{default:Le(()=>[u("div",ei,[U(Ce,{title:"Visitors",muted:!1,underline:!O(T),onClick:h[0]||(h[0]=f=>O(o).commit("setShowVisitors",!0))},null,8,["underline"]),U(Ce,{title:"Total Pageviews",muted:!1,underline:O(T),onClick:h[1]||(h[1]=f=>O(o).commit("setShowVisitors",!1))},null,8,["underline"]),U(Ce,{title:"Bounce Rate"}),U(Ce,{title:"Session Length"})]),U(ps)]),_:1})])]),u("div",ti,[u("div",si,[u("div",{class:oe(["card min-357",{"bg-dark":O(G)}])},[u("div",ii,[ai,u("div",ni,[u("div",oi,[ri,u("small",li,q(O(D)),1),U(ie,{column:"referer_host",setter:"setReferrer",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",ci,[ui,u("small",di,q(O(D)),1),U(ie,{column:"referer_url",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",hi,[mi,u("small",fi,q(O(D)),1),U(ie,{column:"utm_medium",setter:"setUtm_medium"})]),u("div",pi,[vi,u("small",gi,q(O(D)),1),U(ie,{column:"utm_source",setter:"setUtm_source"})]),u("div",yi,[_i,u("small",bi,q(O(D)),1),U(ie,{column:"utm_campaign",setter:"setUtm_campaign"})])])])],2)]),u("div",ki,[u("div",{class:oe(["card min-357",{"bg-dark":O(G)}])},[u("div",wi,[Si,u("div",xi,[u("div",$i,[Ci,u("small",Bi,q(O(D)),1),U(ie,{column:"pathname",setter:"setPath",defaultText:"None"})]),u("div",Ti,[Di,Li,U(ie,{column:"pathname",valueColumn:"AvgLoadTime",setter:"setPath",loadTimes:!0,valueFormatter:t})]),u("div",Ei,[Oi,Ii,U(ie,{column:"pathname",valueColumn:"EntrypageCount",setter:"setPath",defaultText:"None"})]),u("div",Ai,[Fi,Mi,U(ie,{column:"pathname",valueColumn:"ExitPagecount",setter:"setPath",defaultText:"None"})])])])],2)])]),u("div",zi,[u("div",Ri,[U(Oe,{title:"Countries"},{default:Le(()=>[U(Zs,{countries:m.value,dark:O(G),showVisitors:O(T),onClicked:N},null,8,["countries","dark","showVisitors"])]),_:1})]),u("div",Ni,[U(Oe,null,{default:Le(()=>[Pi,Vi,u("div",Wi,[u("div",qi,[Ki,u("small",Ui,q(O(D)),1),U(ie,{column:"device_type",setter:"setDevice",iconify:!0,keyFormatter:l}),Hi,U(ie,{column:"bot",setter:"setIs_bot",iconify:!0,defaultText:"Normal Users",keyFormatter:s})]),u("div",Yi,[Gi,u("small",Xi,q(O(D)),1),U(ie,{column:"is_new",setter:"setIs_new",iconify:!0,defaultText:"Returning",keyFormatter:i})]),u("div",Zi,[ji,u("small",Ji,q(O(D)),1),U(ie,{column:"browser",setter:"setBrowser",browserIcons:!0})]),u("div",Qi,[ea,u("small",ta,q(O(D)),1),U(ie,{column:"lang",setter:"setLanguage",keyFormatter:a})]),u("div",sa,[ia,u("small",aa,q(O(D)),1),U(ie,{column:"os",setter:"setOs",osIcons:!0})])])]),_:1})])])]))}};var oa=ge(na,[["__scopeId","data-v-0e2a2154"]]);const ra={setup(e){const t=he();function l(){let s=localStorage.getItem("__analytics_encryption_key"),i=localStorage.getItem("__analytics_public_key"),a=localStorage.getItem("__analytics_hosts");if(a)try{a=JSON.parse(a)}catch{}Array.isArray(a)||(a=null);let o={};location.search.slice(1).split("&").map(y=>y.split("=")).forEach(y=>o[y[0]]=y[1]);async function m(){let y="/keypair";location.hostname==="localhost"&&(y="https://analytics.servers.do/keypair");let B=await(await fetch(y)).json(),{public_key:g,private_key:k}=B;localStorage.setItem("__analytics_encryption_key",k),localStorage.setItem("__analytics_public_key",g),t.commit("setPublicKey",g),t.commit("setKey",k)}if(o.key){try{o.key=decodeURIComponent(o.key)}catch{}localStorage.setItem("__analytics_encryption_key",o.key),t.commit("setKey",o.key)}else s&&t.commit("setKey",s);if(o.pkey){try{o.pkey=decodeURIComponent(o.pkey)}catch{}localStorage.setItem("__analytics_public_key",o.pkey),t.commit("setPublicKey",o.pkey)}else i?t.commit("setPublicKey",i):m();o.host&&((!a||!Array.isArray(a))&&(a=[]),a.includes(o.host)||a.push(o.host),localStorage.setItem("__analytics_hosts",JSON.stringify(a))),a&&(a.sort((y,r)=>y.localeCompare(r)),t.commit("setDomains",a),o.host||(o.host=a[0])),o.range||(o.range=7),t.commit("setPath",o.path||""),t.commit("setHost",o.host||""),t.commit("setRange",o.range),t.commit("setOs",o.os||""),t.commit("setDevice",o.device||""),t.commit("setIs_bot",o.is_bot||""),t.commit("setIs_new",o.is_new||""),t.commit("setBrowser",o.browser||""),t.commit("setLanguage",o.language||""),t.commit("setReferrer",o.referrer||""),t.commit("setUtm_source",o.utm_source||""),t.commit("setUtm_medium",o.utm_medium||""),t.commit("setUtm_campaign",o.utm_campaign||"")}return l(),addEventListener("popstate",s=>{console.log("onpopstate location: "+document.location),l()}),(s,i)=>(M(),R(we,null,[U(dt),U(oa),U(it),U(Bt)],64))}};Ge(ra).use(Ze).mount("#app");
