import{c as Pe,o as I,a as M,b as u,t as K,u as R,d as ee,e as he,r as Q,f as ye,w,n as oe,g as Ae,v as Ve,h as de,F as ke,i as Ce,j as J,k as Fe,m as We,l as qe,p as Ke,q as Be,s as Ue,x as H,y as Te,z as Ie,A as He,B as Ye,C as Ge}from"./vendor.a79dc407.js";const Xe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}};Xe();function _e(e){e==parseInt(e)&&(e=parseInt(e));const t=new Date;return t.setDate(t.getDate()-e)}function we(e){return Math.floor((+new Date-+new Date(e))/(25*60*60*1e3))}function ie(e){let t=`?host=${e.host}&range=${e.range}`;e.os&&(t+=`&os=${e.os}`),e.path&&(t+=`&path=${e.path}`),e.device&&(t+=`&device=${e.device}`),e.is_bot!==""&&(t+=`&is_bot=${e.is_bot}`),e.is_new!==""&&(t+=`&is_new=${e.is_new}`),e.browser&&(t+=`&browser=${e.browser}`),e.language&&(t+=`&language=${e.language}`),e.referrer&&(t+=`&referrer=${e.referrer}`),e.utm_source!==""&&(t+=`&utm_source=${e.utm_source}`),e.utm_medium!==""&&(t+=`&utm_medium=${e.utm_medium}`),e.utm_campaign!==""&&(t+=`&utm_campaign=${e.utm_campaign}`),e.country!==""&&(t+=`&country=${e.country}`),location.search!==t&&window.history.pushState("","",t)}var Ze=Pe({state(){return{publicKey:"",domains:[],host:"",path:"",key:"",start:_e(0),end:_e(0),range:"1",rangeString:"Latest",liveVisitors:0,showVisitors:!0,summary:{},dark:!1,os:"",device:"",is_bot:"",is_new:"",browser:"",language:"",referrer:"",utm_source:"",utm_medium:"",utm_campaign:"",country:""}},getters:{domains:e=>e.domains,dark:e=>e.dark,key:e=>e.key,publicKey:e=>e.publicKey,host:e=>e.host,path:e=>e.path,start:e=>e.start,end:e=>e.end,range:e=>e.range,rangeString:e=>e.rangeString,liveVisitors:e=>e.liveVisitors,showVisitors:e=>e.showVisitors,summary:e=>e.summary,os:e=>e.os,device:e=>e.device,is_bot:e=>e.is_bot,is_new:e=>e.is_new,browser:e=>e.browser,language:e=>e.language,referrer:e=>e.referrer,utm_source:e=>e.utm_source,utm_medium:e=>e.utm_medium,utm_campaign:e=>e.utm_campaign,country:e=>e.country},mutations:{setDark(e,t){e.dark=t},setKey(e,t){e.key=t},setPublicKey(e,t){e.publicKey=t},setDomains(e,t){e.domains=t},setHost(e,t){e.host=t,ie(e)},setPath(e,t){e.path=t,ie(e)},setOs(e,t){e.os=t,ie(e)},setDevice(e,t){e.device=t,ie(e)},setIs_bot(e,t){e.is_bot=t,ie(e)},setIs_new(e,t){e.is_new=t,ie(e)},setBrowser(e,t){e.browser=t,ie(e)},setLanguage(e,t){e.language=t,ie(e)},setReferrer(e,t){e.referrer=t,ie(e)},setUtm_source(e,t){e.utm_source=t,ie(e)},setUtm_medium(e,t){e.utm_medium=t,ie(e)},setUtm_campaign(e,t){e.utm_campaign=t,ie(e)},setCountry(e,t){e.country=t,ie(e)},setStart(e,t){e.start=t},setEnd(e,t){e.end=t},setLiveVisitors(e,t){e.liveVisitors=t},setShowVisitors(e,t){e.showVisitors=t},setSummary(e,t){e.summary=t},setRangeString(e,t){e.rangeString=t},setRange(e,t){t||(t="1");let s={"-1":["Yesterday",1,1],"1":["Latest",0,0],"7":["Last 7 Days",7,0],"14":["1 week ago",14,7],"21":["2 weeks ago",21,14],"28":["3 weeks ago",28,21],"30":["Last 30 Days",30,0]}[t];if(t<-1&&t>-32){let i=t*-1;s=[`${new Date(_e(i)).toDateString()}`,i,i]}if(t.length===7){let i=we(t),a=new Date(t);a=a.setMonth(a.getMonth()+1);let c=we(a);c<0&&(c=0),s=[`${t}`,i,c]}if(t>1e3&&t<3e3){let i=we(t),a=new Date(t);a=a.setFullYear(a.getFullYear()+1);let c=we(a);c<0&&(c=0),s=[`${t}`,i,c]}e.rangeString=s[0],e.start=_e(s[1]),e.end=_e(s[2]),parseInt(t)==t&&(t=parseInt(t)),e.range=t,ie(e)}}});const je={class:"text-center mt-3"},Je=ee(" Copyright \xA9 2021-"),Qe={class:"year"},et=ee(),tt=u("a",{href:"https://jamesfuthey.com/",target:"_blank"},"James Futhey",-1),st=ee(". \xA0All Rights Reserved. "),it={setup(e){const t=new Date().getFullYear();return(o,s)=>(I(),M("p",je,[Je,u("span",Qe,K(R(t)),1),et,tt,st]))}},at={class:"container"},nt=u("a",{class:"navbar-brand",href:"/"},"Website Analytics",-1),ot=u("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[u("span",{class:"navbar-toggler-icon"})],-1),rt={class:"collapse navbar-collapse",id:"navbarColor01"},lt={class:"navbar-nav me-auto"},ct={class:"nav-item"},ut={class:"d-none d-md-inline-block form-check form-switch float-right"},dt={setup(e){const t=he(),o=Q(!1);return ye(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(o.value=!0)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{o.value=s.matches}),w(o,()=>{t.commit("setDark",o.value),document.querySelector("#theme").href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/${o.value?"superhero":"zephyr"}/bootstrap.min.css`,o.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),(s,i)=>(I(),M("nav",{class:oe(["navbar navbar-expand-lg navbar-dark",{"mt-1":o.value,"bg-primary":!o.value}])},[u("div",at,[nt,ot,u("div",rt,[u("ul",lt,[u("li",ct,[u("a",{class:oe(["nav-link cp",{"btn-dark":o.value,nudge:o.value}]),"data-bs-toggle":"modal","data-bs-target":"#embedScript"},"Add to your Website",2)])])]),u("div",ut,[Ae(u("input",{class:"form-check-input",type:"checkbox",id:"themer","onUpdate:modelValue":i[0]||(i[0]=a=>o.value=a)},null,512),[[Ve,o.value]]),u("label",{class:oe(["form-check-label",{"text-white":!o.value}]),for:"themer",style:{"user-select":"none"}},"Dark mode",2)])])],2))}},me=()=>{const e=he();return Object.fromEntries(Object.keys(e.getters).map(t=>[t,de(()=>e.getters[t])]))},ht={class:"modal",id:"embedScript",tabindex:"-1"},mt={class:"modal-dialog modal-lg"},ft=u("div",{class:"modal-header"},[u("h5",{class:"modal-title"},"Add to your Website"),u("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),pt={class:"modal-body"},gt=u("h5",null,"Embed Code",-1),vt=u("p",null,"Embed this script on your website, and your analytics data will appear here.",-1),yt={rows:"4",spellcheck:"false",class:"form-control",id:"script","data-clipboard-target":"#script",style:{resize:"none","font-family":"monospace"}},_t=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#script"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),bt=u("br",null,null,-1),kt=u("h5",null,"URL to View Analytics",-1),wt=u("p",null,"You will need the following URL to access (and decrypt) your analytics:",-1),St={rows:"3",spellcheck:"false",class:"form-control",id:"url","data-clipboard-target":"#url",style:{resize:"none","font-family":"monospace"}},xt=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#url"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),$t=u("p",null,[u("small",null,[u("strong",null,"Save your URL."),ee(" If you lose this, you will need to reinstall analytics with a new encryption key.")])],-1),Ct=u("div",{class:"modal-footer"},[u("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),Bt={setup(e){const{key:t,publicKey:o,dark:s}=me();let i={};location.search.slice(1).split("&").map(T=>T.split("=")).forEach(T=>i[T[0]]=T[1]);let a="https://analytics.servers.do",c=de(()=>o.value?`&lt;script>window.__analytics_encryption_key = '${o.value}';&lt;/script>
`:"");const m=de(()=>r(`&lt;!-- Servers.do Analytics -->
${c.value}&lt;script src='${a}/a.js'>&lt;/script>`)),g=de(()=>`${a}?host=${i.host}&range=${i.range}&key=${encodeURIComponent(t.value)}&pkey=${o.value}`);function r(T){return window.$("<textarea />").html(T).text()}return(T,p)=>(I(),M("div",ht,[u("div",mt,[u("div",{class:oe(["modal-content",{"bg-dark":R(s)}])},[ft,u("div",pt,[gt,vt,u("p",null,[u("textarea",yt,K(R(m)),1),_t]),bt,kt,wt,u("p",null,[u("textarea",St,K(R(g)),1),xt]),$t]),Ct],2)])]))}};const Tt={class:"row"},Dt={key:0,class:"col-12 mb-3"},Ot=["onClick"],Lt=ee(" = \xA0"),At=ee(" \xA0 "),Ft=u("a",null,"\u2715",-1),It={class:"col-6"},Et={class:"nav nav-pills mb-1 d-inline-block"},zt={class:"nav-item dropdown ms-auto"},Mt={class:"nav-link dropdown-toggle cp","data-bs-toggle":"dropdown",role:"button"},Rt=["src"],Nt={class:"d-inline pt-2 mb-0 name"},Pt={class:"dropdown-menu websites left"},Vt=["onClick"],Wt=u("span",{class:"text-success d-none d-md-inline-block dot"},"\xB7",-1),qt={class:"current-visitors d-none d-md-inline-block"},Kt={class:"col-6"},Ut={class:"nav nav-pills mb-1"},Ht={class:"nav-item dropdown ms-auto"},Yt={class:"dropdown-menu right"},Gt=u("div",{class:"dropdown-divider"},null,-1),Xt=u("div",{class:"dropdown-divider"},null,-1),Zt=u("div",{class:"dropdown-divider"},null,-1),jt={setup(e){const t=Q(new Date),o=Q(!1),s=Q("month"),i=Q("month"),a=Q("month"),c={to:new Date(new Date().setDate(new Date().getDate()-32)),from:new Date,preventDisableDateSelection:!0},{host:m,path:g,os:r,device:T,is_bot:p,is_new:k,browser:l,language:b,referrer:n,utm_source:d,utm_medium:y,utm_campaign:x,country:E,domains:V,range:j,rangeString:W,liveVisitors:$}=me(),D=he(),C=Q({path:g,os:r,device:T,is_bot:p,is_new:k,browser:l,language:b,referrer:n,utm_source:d,utm_medium:y,utm_campaign:x,country:E}),z="path, os, device, is_bot, is_new, browser, language, referrer, utm_source, utm_medium, utm_campaign, country".split(", "),N=Q([]);de(()=>location.search);function S(){N.value=[],z.forEach(L=>{C.value[L]!==""&&(N.value.includes(L)||N.value.push(L))})}w(r,S),w(g,S),w(T,S),w(p,S),w(k,S),w(l,S),w(b,S),w(n,S),w(d,S),w(y,S),w(x,S),w(E,S),S();function F(L,A){D.commit("setRange",L),A||(o.value=!1)}const h=L=>L.charAt(0).toUpperCase()+L.slice(1);function _(){var L=prompt("Enter domain name");if(L){if(L=L.toLowerCase().trim().replace("www.",""),L&&window.history.pushState("","",`?host=${L}&range=${j.value}`),L&&!(V.value||[]).includes(L)){let A=V.value;Array.isArray(A)||(A=[]),A.includes(L)||A.push(L),localStorage.setItem("__analytics_hosts",JSON.stringify(A)),D.commit("setDomains",A)}L&&v(L)}}function v(L){window.history.pushState("","",`?host=${L}&range=${j.value}`),D.commit("setHost",L)}function f(L){L==="month"?(s.value="month",i.value="month",a.value="month",D.commit("setRangeString","Custom month:")):L==="year"?(s.value="year",i.value="year",a.value="year",D.commit("setRangeString","Custom year:")):L==="day"&&(s.value="day",i.value="day",a.value="day",D.commit("setRangeString","Custom day:")),document.querySelector(".dropdown-menu.right.show").classList.remove("show"),o.value=!0,setTimeout(()=>{document.querySelector(".vuejs3-datepicker__value").click()},123)}function G(L){if(s.value==="year"){let U=new Date(L).getFullYear();F(U)}else if(s.value==="month"){let A=new Date(L),U=A.getMonth()+1;F(`${A.getFullYear()}-${U<10?"0":""}${U}`)}else if(s.value==="day"){t.value=new Date(L);let A=new Date-new Date(L),U=Math.floor(A/864e5)*-1;F(U)}}function X(L){D.commit(L,"")}function q(L){return"set"+L[0].toUpperCase()+L.substring(1)}return(L,A)=>(I(),M("div",Tt,[N.value.length?(I(),M("div",Dt,[(I(!0),M(ke,null,Ce(N.value,U=>(I(),M("button",{type:"button",class:"btn btn-dark mr-5 mb-1",onClick:ce=>X(q(U))},[u("strong",null,K(h(U)),1),Lt,u("code",null,K(C.value[U]),1),At,Ft],8,Ot))),256))])):J("",!0),u("div",It,[u("ul",Et,[u("li",zt,[u("a",Mt,[R(m)?(I(),M("img",{key:0,class:"favicon",src:`https://logo.clearbit.com/${R(m)}`,onerror:"this.src='default.png';"},null,8,Rt)):J("",!0),u("h5",Nt,K(h(R(m))||"Select a Domain"),1)]),u("div",Pt,[(I(!0),M(ke,null,Ce(R(V),U=>(I(),M("a",{class:"dropdown-item cp",onClick:ce=>v(U)},K(h(U)),9,Vt))),256)),u("a",{class:"dropdown-item cp",onClick:_},"Add Domain")])])]),Wt,u("span",qt,"\xA0"+K(R($)?`${R($)} current visitor${R($)==1?"":"s"}`:"No current visitors"),1)]),u("div",Kt,[u("ul",Ut,[u("li",Ht,[u("a",{class:oe(["nav-link right cp",{"dropdown-toggle":!o.value}]),"data-bs-toggle":"dropdown",role:"button"},K(R(W)),3),u("div",Yt,[u("a",{class:"dropdown-item cp",onClick:A[0]||(A[0]=U=>F(1))},"Latest"),u("a",{class:"dropdown-item cp",onClick:A[1]||(A[1]=U=>F(-1))},"Yesterday"),u("a",{class:"dropdown-item cp",onClick:A[2]||(A[2]=U=>{f("day")})},"Custom Day"),Gt,u("a",{class:"dropdown-item cp",onClick:A[3]||(A[3]=U=>F(7))},"Last 7 Days"),u("a",{class:"dropdown-item cp",onClick:A[4]||(A[4]=U=>F(14))},"1 week ago"),u("a",{class:"dropdown-item cp",onClick:A[5]||(A[5]=U=>F(21))},"2 weeks ago"),u("a",{class:"dropdown-item cp",onClick:A[6]||(A[6]=U=>F(28))},"3 weeks ago"),Xt,u("a",{class:"dropdown-item cp",onClick:A[7]||(A[7]=U=>F(30))},"Last 30 Days"),Zt,u("a",{class:"dropdown-item cp",onClick:A[8]||(A[8]=U=>{f("month")})},"Custom Month"),u("a",{class:"dropdown-item cp",onClick:A[9]||(A[9]=U=>{f("year")})},"Custom Year")])]),o.value?(I(),Fe(R(We),{key:0,name:"datepick",value:t.value,"disabled-dates":i.value=="day"?c:null,"initial-view":s.value,"minimum-view":i.value,"maximum-view":a.value,onInput:G},null,8,["value","disabled-dates","initial-view","minimum-view","maximum-view"])):J("",!0)])])]))}};var Y=Y||function(e,t){var o={},s=o.lib={},i=function(){},a=s.Base={extend:function(l){i.prototype=this;var b=new i;return l&&b.mixIn(l),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var l=this.extend();return l.init.apply(l,arguments),l},init:function(){},mixIn:function(l){for(var b in l)l.hasOwnProperty(b)&&(this[b]=l[b]);l.hasOwnProperty("toString")&&(this.toString=l.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(l,b){l=this.words=l||[],this.sigBytes=b!=t?b:4*l.length},toString:function(l){return(l||g).stringify(this)},concat:function(l){var b=this.words,n=l.words,d=this.sigBytes;if(l=l.sigBytes,this.clamp(),d%4)for(var y=0;y<l;y++)b[d+y>>>2]|=(n[y>>>2]>>>24-8*(y%4)&255)<<24-8*((d+y)%4);else if(65535<n.length)for(y=0;y<l;y+=4)b[d+y>>>2]=n[y>>>2];else b.push.apply(b,n);return this.sigBytes+=l,this},clamp:function(){var l=this.words,b=this.sigBytes;l[b>>>2]&=4294967295<<32-8*(b%4),l.length=e.ceil(b/4)},clone:function(){var l=a.clone.call(this);return l.words=this.words.slice(0),l},random:function(l){for(var b=[],n=0;n<l;n+=4)b.push(4294967296*e.random()|0);return new c.init(b,l)}}),m=o.enc={},g=m.Hex={stringify:function(l){var b=l.words;l=l.sigBytes;for(var n=[],d=0;d<l;d++){var y=b[d>>>2]>>>24-8*(d%4)&255;n.push((y>>>4).toString(16)),n.push((y&15).toString(16))}return n.join("")},parse:function(l){for(var b=l.length,n=[],d=0;d<b;d+=2)n[d>>>3]|=parseInt(l.substr(d,2),16)<<24-4*(d%8);return new c.init(n,b/2)}},r=m.Latin1={stringify:function(l){var b=l.words;l=l.sigBytes;for(var n=[],d=0;d<l;d++)n.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return n.join("")},parse:function(l){for(var b=l.length,n=[],d=0;d<b;d++)n[d>>>2]|=(l.charCodeAt(d)&255)<<24-8*(d%4);return new c.init(n,b)}},T=m.Utf8={stringify:function(l){try{return decodeURIComponent(escape(r.stringify(l)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(l){return r.parse(unescape(encodeURIComponent(l)))}},p=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(l){typeof l=="string"&&(l=T.parse(l)),this._data.concat(l),this._nDataBytes+=l.sigBytes},_process:function(l){var b=this._data,n=b.words,d=b.sigBytes,y=this.blockSize,x=d/(4*y),x=l?e.ceil(x):e.max((x|0)-this._minBufferSize,0);if(l=x*y,d=e.min(4*l,d),l){for(var E=0;E<l;E+=y)this._doProcessBlock(n,E);E=n.splice(0,l),b.sigBytes-=d}return new c.init(E,d)},clone:function(){var l=a.clone.call(this);return l._data=this._data.clone(),l},_minBufferSize:0});s.Hasher=p.extend({cfg:a.extend(),init:function(l){this.cfg=this.cfg.extend(l),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(l){return this._append(l),this._process(),this},finalize:function(l){return l&&this._append(l),this._doFinalize()},blockSize:16,_createHelper:function(l){return function(b,n){return new l.init(n).finalize(b)}},_createHmacHelper:function(l){return function(b,n){return new k.HMAC.init(l,n).finalize(b)}}});var k=o.algo={};return o}(Math);(function(){var e=Y,t=e.lib.WordArray;e.enc.Base64={stringify:function(o){var s=o.words,i=o.sigBytes,a=this._map;o.clamp(),o=[];for(var c=0;c<i;c+=3)for(var m=(s[c>>>2]>>>24-8*(c%4)&255)<<16|(s[c+1>>>2]>>>24-8*((c+1)%4)&255)<<8|s[c+2>>>2]>>>24-8*((c+2)%4)&255,g=0;4>g&&c+.75*g<i;g++)o.push(a.charAt(m>>>6*(3-g)&63));if(s=a.charAt(64))for(;o.length%4;)o.push(s);return o.join("")},parse:function(o){var s=o.length,i=this._map,a=i.charAt(64);a&&(a=o.indexOf(a),a!=-1&&(s=a));for(var a=[],c=0,m=0;m<s;m++)if(m%4){var g=i.indexOf(o.charAt(m-1))<<2*(m%4),r=i.indexOf(o.charAt(m))>>>6-2*(m%4);a[c>>>2]|=(g|r)<<24-8*(c%4),c++}return t.create(a,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(p,k,l,b,n,d,y){return p=p+(k&l|~k&b)+n+y,(p<<d|p>>>32-d)+k}function o(p,k,l,b,n,d,y){return p=p+(k&b|l&~b)+n+y,(p<<d|p>>>32-d)+k}function s(p,k,l,b,n,d,y){return p=p+(k^l^b)+n+y,(p<<d|p>>>32-d)+k}function i(p,k,l,b,n,d,y){return p=p+(l^(k|~b))+n+y,(p<<d|p>>>32-d)+k}for(var a=Y,c=a.lib,m=c.WordArray,g=c.Hasher,c=a.algo,r=[],T=0;64>T;T++)r[T]=4294967296*e.abs(e.sin(T+1))|0;c=c.MD5=g.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,k){for(var l=0;16>l;l++){var b=k+l,n=p[b];p[b]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var l=this._hash.words,b=p[k+0],n=p[k+1],d=p[k+2],y=p[k+3],x=p[k+4],E=p[k+5],V=p[k+6],j=p[k+7],W=p[k+8],$=p[k+9],D=p[k+10],C=p[k+11],z=p[k+12],N=p[k+13],S=p[k+14],F=p[k+15],h=l[0],_=l[1],v=l[2],f=l[3],h=t(h,_,v,f,b,7,r[0]),f=t(f,h,_,v,n,12,r[1]),v=t(v,f,h,_,d,17,r[2]),_=t(_,v,f,h,y,22,r[3]),h=t(h,_,v,f,x,7,r[4]),f=t(f,h,_,v,E,12,r[5]),v=t(v,f,h,_,V,17,r[6]),_=t(_,v,f,h,j,22,r[7]),h=t(h,_,v,f,W,7,r[8]),f=t(f,h,_,v,$,12,r[9]),v=t(v,f,h,_,D,17,r[10]),_=t(_,v,f,h,C,22,r[11]),h=t(h,_,v,f,z,7,r[12]),f=t(f,h,_,v,N,12,r[13]),v=t(v,f,h,_,S,17,r[14]),_=t(_,v,f,h,F,22,r[15]),h=o(h,_,v,f,n,5,r[16]),f=o(f,h,_,v,V,9,r[17]),v=o(v,f,h,_,C,14,r[18]),_=o(_,v,f,h,b,20,r[19]),h=o(h,_,v,f,E,5,r[20]),f=o(f,h,_,v,D,9,r[21]),v=o(v,f,h,_,F,14,r[22]),_=o(_,v,f,h,x,20,r[23]),h=o(h,_,v,f,$,5,r[24]),f=o(f,h,_,v,S,9,r[25]),v=o(v,f,h,_,y,14,r[26]),_=o(_,v,f,h,W,20,r[27]),h=o(h,_,v,f,N,5,r[28]),f=o(f,h,_,v,d,9,r[29]),v=o(v,f,h,_,j,14,r[30]),_=o(_,v,f,h,z,20,r[31]),h=s(h,_,v,f,E,4,r[32]),f=s(f,h,_,v,W,11,r[33]),v=s(v,f,h,_,C,16,r[34]),_=s(_,v,f,h,S,23,r[35]),h=s(h,_,v,f,n,4,r[36]),f=s(f,h,_,v,x,11,r[37]),v=s(v,f,h,_,j,16,r[38]),_=s(_,v,f,h,D,23,r[39]),h=s(h,_,v,f,N,4,r[40]),f=s(f,h,_,v,b,11,r[41]),v=s(v,f,h,_,y,16,r[42]),_=s(_,v,f,h,V,23,r[43]),h=s(h,_,v,f,$,4,r[44]),f=s(f,h,_,v,z,11,r[45]),v=s(v,f,h,_,F,16,r[46]),_=s(_,v,f,h,d,23,r[47]),h=i(h,_,v,f,b,6,r[48]),f=i(f,h,_,v,j,10,r[49]),v=i(v,f,h,_,S,15,r[50]),_=i(_,v,f,h,E,21,r[51]),h=i(h,_,v,f,z,6,r[52]),f=i(f,h,_,v,y,10,r[53]),v=i(v,f,h,_,D,15,r[54]),_=i(_,v,f,h,n,21,r[55]),h=i(h,_,v,f,W,6,r[56]),f=i(f,h,_,v,F,10,r[57]),v=i(v,f,h,_,V,15,r[58]),_=i(_,v,f,h,N,21,r[59]),h=i(h,_,v,f,x,6,r[60]),f=i(f,h,_,v,C,10,r[61]),v=i(v,f,h,_,d,15,r[62]),_=i(_,v,f,h,$,21,r[63]);l[0]=l[0]+h|0,l[1]=l[1]+_|0,l[2]=l[2]+v|0,l[3]=l[3]+f|0},_doFinalize:function(){var p=this._data,k=p.words,l=8*this._nDataBytes,b=8*p.sigBytes;k[b>>>5]|=128<<24-b%32;var n=e.floor(l/4294967296);for(k[(b+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,k[(b+64>>>9<<4)+14]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360,p.sigBytes=4*(k.length+1),this._process(),p=this._hash,k=p.words,l=0;4>l;l++)b=k[l],k[l]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;return p},clone:function(){var p=g.clone.call(this);return p._hash=this._hash.clone(),p}}),a.MD5=g._createHelper(c),a.HmacMD5=g._createHmacHelper(c)})(Math);(function(){var e=Y,t=e.lib,o=t.Base,s=t.WordArray,t=e.algo,i=t.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,c){for(var m=this.cfg,g=m.hasher.create(),r=s.create(),T=r.words,p=m.keySize,m=m.iterations;T.length<p;){k&&g.update(k);var k=g.update(a).finalize(c);g.reset();for(var l=1;l<m;l++)k=g.finalize(k),g.reset();r.concat(k)}return r.sigBytes=4*p,r}});e.EvpKDF=function(a,c,m){return i.create(m).compute(a,c)}})();Y.lib.Cipher||function(e){var t=Y,o=t.lib,s=o.Base,i=o.WordArray,a=o.BufferedBlockAlgorithm,c=t.enc.Base64,m=t.algo.EvpKDF,g=o.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(n,d){return this.create(this._ENC_XFORM_MODE,n,d)},createDecryptor:function(n,d){return this.create(this._DEC_XFORM_MODE,n,d)},init:function(n,d,y){this.cfg=this.cfg.extend(y),this._xformMode=n,this._key=d,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(d,y,x){return(typeof y=="string"?b:l).encrypt(n,d,y,x)},decrypt:function(d,y,x){return(typeof y=="string"?b:l).decrypt(n,d,y,x)}}}});o.StreamCipher=g.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var r=t.mode={},T=function(n,d,y){var x=this._iv;x?this._iv=e:x=this._prevBlock;for(var E=0;E<y;E++)n[d+E]^=x[E]},p=(o.BlockCipherMode=s.extend({createEncryptor:function(n,d){return this.Encryptor.create(n,d)},createDecryptor:function(n,d){return this.Decryptor.create(n,d)},init:function(n,d){this._cipher=n,this._iv=d}})).extend();p.Encryptor=p.extend({processBlock:function(n,d){var y=this._cipher,x=y.blockSize;T.call(this,n,d,x),y.encryptBlock(n,d),this._prevBlock=n.slice(d,d+x)}}),p.Decryptor=p.extend({processBlock:function(n,d){var y=this._cipher,x=y.blockSize,E=n.slice(d,d+x);y.decryptBlock(n,d),T.call(this,n,d,x),this._prevBlock=E}}),r=r.CBC=p,p=(t.pad={}).Pkcs7={pad:function(n,d){for(var y=4*d,y=y-n.sigBytes%y,x=y<<24|y<<16|y<<8|y,E=[],V=0;V<y;V+=4)E.push(x);y=i.create(E,y),n.concat(y)},unpad:function(n){n.sigBytes-=n.words[n.sigBytes-1>>>2]&255}},o.BlockCipher=g.extend({cfg:g.cfg.extend({mode:r,padding:p}),reset:function(){g.reset.call(this);var n=this.cfg,d=n.iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var y=n.createEncryptor;else y=n.createDecryptor,this._minBufferSize=1;this._mode=y.call(n,this,d&&d.words)},_doProcessBlock:function(n,d){this._mode.processBlock(n,d)},_doFinalize:function(){var n=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){n.pad(this._data,this.blockSize);var d=this._process(!0)}else d=this._process(!0),n.unpad(d);return d},blockSize:4});var k=o.CipherParams=s.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),r=(t.format={}).OpenSSL={stringify:function(n){var d=n.ciphertext;return n=n.salt,(n?i.create([1398893684,1701076831]).concat(n).concat(d):d).toString(c)},parse:function(n){n=c.parse(n);var d=n.words;if(d[0]==1398893684&&d[1]==1701076831){var y=i.create(d.slice(2,4));d.splice(0,4),n.sigBytes-=16}return k.create({ciphertext:n,salt:y})}},l=o.SerializableCipher=s.extend({cfg:s.extend({format:r}),encrypt:function(n,d,y,x){x=this.cfg.extend(x);var E=n.createEncryptor(y,x);return d=E.finalize(d),E=E.cfg,k.create({ciphertext:d,key:y,iv:E.iv,algorithm:n,mode:E.mode,padding:E.padding,blockSize:n.blockSize,formatter:x.format})},decrypt:function(n,d,y,x){return x=this.cfg.extend(x),d=this._parse(d,x.format),n.createDecryptor(y,x).finalize(d.ciphertext)},_parse:function(n,d){return typeof n=="string"?d.parse(n,this):n}}),t=(t.kdf={}).OpenSSL={execute:function(n,d,y,x){return x||(x=i.random(8)),n=m.create({keySize:d+y}).compute(n,x),y=i.create(n.words.slice(d),4*y),n.sigBytes=4*d,k.create({key:n,iv:y,salt:x})}},b=o.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:t}),encrypt:function(n,d,y,x){return x=this.cfg.extend(x),y=x.kdf.execute(y,n.keySize,n.ivSize),x.iv=y.iv,n=l.encrypt.call(this,n,d,y.key,x),n.mixIn(y),n},decrypt:function(n,d,y,x){return x=this.cfg.extend(x),d=this._parse(d,x.format),y=x.kdf.execute(y,n.keySize,n.ivSize,d.salt),x.iv=y.iv,l.decrypt.call(this,n,d,y.key,x)}})}();(function(){for(var e=Y,t=e.lib.BlockCipher,W=e.algo,o=[],s=[],i=[],a=[],c=[],m=[],g=[],r=[],T=[],p=[],k=[],l=0;256>l;l++)k[l]=128>l?l<<1:l<<1^283;for(var b=0,n=0,l=0;256>l;l++){var d=n^n<<1^n<<2^n<<3^n<<4,d=d>>>8^d&255^99;o[b]=d,s[d]=b;var y=k[b],x=k[y],E=k[x],V=257*k[d]^16843008*d;i[b]=V<<24|V>>>8,a[b]=V<<16|V>>>16,c[b]=V<<8|V>>>24,m[b]=V,V=16843009*E^65537*x^257*y^16843008*b,g[d]=V<<24|V>>>8,r[d]=V<<16|V>>>16,T[d]=V<<8|V>>>24,p[d]=V,b?(b=y^k[k[k[E^y]]],n^=k[k[n]]):b=n=1}var j=[0,1,2,4,8,16,32,64,128,27,54],W=W.AES=t.extend({_doReset:function(){for(var $=this._key,D=$.words,C=$.sigBytes/4,$=4*((this._nRounds=C+6)+1),z=this._keySchedule=[],N=0;N<$;N++)if(N<C)z[N]=D[N];else{var S=z[N-1];N%C?6<C&&N%C==4&&(S=o[S>>>24]<<24|o[S>>>16&255]<<16|o[S>>>8&255]<<8|o[S&255]):(S=S<<8|S>>>24,S=o[S>>>24]<<24|o[S>>>16&255]<<16|o[S>>>8&255]<<8|o[S&255],S^=j[N/C|0]<<24),z[N]=z[N-C]^S}for(D=this._invKeySchedule=[],C=0;C<$;C++)N=$-C,S=C%4?z[N]:z[N-4],D[C]=4>C||4>=N?S:g[o[S>>>24]]^r[o[S>>>16&255]]^T[o[S>>>8&255]]^p[o[S&255]]},encryptBlock:function($,D){this._doCryptBlock($,D,this._keySchedule,i,a,c,m,o)},decryptBlock:function($,D){var C=$[D+1];$[D+1]=$[D+3],$[D+3]=C,this._doCryptBlock($,D,this._invKeySchedule,g,r,T,p,s),C=$[D+1],$[D+1]=$[D+3],$[D+3]=C},_doCryptBlock:function($,D,C,z,N,S,F,h){for(var _=this._nRounds,v=$[D]^C[0],f=$[D+1]^C[1],G=$[D+2]^C[2],X=$[D+3]^C[3],q=4,L=1;L<_;L++)var A=z[v>>>24]^N[f>>>16&255]^S[G>>>8&255]^F[X&255]^C[q++],U=z[f>>>24]^N[G>>>16&255]^S[X>>>8&255]^F[v&255]^C[q++],ce=z[G>>>24]^N[X>>>16&255]^S[v>>>8&255]^F[f&255]^C[q++],X=z[X>>>24]^N[v>>>16&255]^S[f>>>8&255]^F[G&255]^C[q++],v=A,f=U,G=ce;A=(h[v>>>24]<<24|h[f>>>16&255]<<16|h[G>>>8&255]<<8|h[X&255])^C[q++],U=(h[f>>>24]<<24|h[G>>>16&255]<<16|h[X>>>8&255]<<8|h[v&255])^C[q++],ce=(h[G>>>24]<<24|h[X>>>16&255]<<16|h[v>>>8&255]<<8|h[f&255])^C[q++],X=(h[X>>>24]<<24|h[v>>>16&255]<<16|h[f>>>8&255]<<8|h[G&255])^C[q++],$[D]=A,$[D+1]=U,$[D+2]=ce,$[D+3]=X},keySize:8});e.AES=t._createHelper(W)})();Y.mode.CTR=function(){var e=Y.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(o,s){var i=this._cipher,a=i.blockSize,c=this._iv,m=this._counter;c&&(m=this._counter=c.slice(0),this._iv=void 0);var g=m.slice(0);i.encryptBlock(g,0),m[a-1]=m[a-1]+1|0;for(var r=0;r<a;r++)o[s+r]^=g[r]}});return e.Decryptor=t,e}();(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},t.bitshift=function(o,s){var i=0,a=o.words,c,m=0,g;if(s>0){for(;s>31;)a.splice(0,1),a.push(0),s-=32,m++;if(s==0)return i;for(var r=a.length-m-1;r>=0;r--)c=a[r],a[r]<<=s,a[r]|=i,i=c>>>32-s}else if(s<0){for(;s<-31;)a.splice(0,0,0),a.length--,s+=32,m++;if(s==0)return i;s=-s,g=(1<<s)-1;for(var r=m;r<a.length;r++)c=a[r]&g,a[r]>>>=s,a[r]|=i,i=c<<32-s}return i},t.neg=function(o){for(var s=o.words,i=0;i<s.length;i++)s[i]=~s[i];return o},t.xor=function(o,s){for(var i=0;i<o.words.length;i++)o.words[i]^=s.words[i];return o},t.bitand=function(o,s){for(var i=o.clone(),a=i.words,c=s.words,m=0;m<a.length;m++)a[m]&=c[m];return i}})(Y);(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},e.lib.Base;var o=e.lib.WordArray;e.algo.AES,t.const_Zero=o.create([0,0,0,0]),t.const_One=o.create([0,0,0,1]),t.const_Rb=o.create([0,0,0,135]),t.const_Rb_Shifted=o.create([2147483648,0,0,67]),t.const_nonMSB=o.create([4294967295,4294967295,2147483647,2147483647]),t.isWordArray=function(s){return s&&typeof s.clamp=="function"&&typeof s.concat=="function"&&typeof s.words=="array"},e.pad.OneZeroPadding={pad:function(s,i){for(var a=i*4,c=a-s.sigBytes%a,m=[],g=0;g<c;g+=4){var r=0;g===0&&(r=2147483648),m.push(r)}var T=o.create(m,c);s.concat(T)},unpad:function(){}},e.pad.NoPadding={pad:function(){},unpad:function(){}},t.leftmostBytes=function(s,i){var a=s.clone();return a.sigBytes=i,a.clamp(),a},t.rightmostBytes=function(s,i){s.clamp();var a=32,c=s.clone(),m=(c.sigBytes-i)*8;if(m>=a){var g=Math.floor(m/a);m-=g*a,c.words.splice(0,g),c.sigBytes-=g*a/8}return m>0&&(t.bitshift(c,m),c.sigBytes-=m/8),c},t.popWords=function(s,i){var a=t.leftmostBytes(s,i*4);return s.words=s.words.slice(i),s.sigBytes-=i*4,a},t.shiftBytes=function(s,i){i=i||16;var a=i%4;i-=a;for(var c=o.create(),m=0;m<i;m+=4)c.words.push(s.words.shift()),s.sigBytes-=4,c.sigBytes+=4;return a>0&&(c.words.push(s.words[0]),c.sigBytes+=a,t.bitshift(s,a*8),s.sigBytes-=a),c},t.xorendBytes=function(s,i){return t.leftmostBytes(s,s.sigBytes-i.sigBytes).concat(t.xor(t.rightmostBytes(s,i.sigBytes),i))},t.dbl=function(s){var i=t.msb(s);return t.bitshift(s,1),t.xor(s,i===1?t.const_Rb:t.const_Zero),s},t.inv=function(s){var i=s.words[4]&1;return t.bitshift(s,-1),t.xor(s,i===1?t.const_Rb_Shifted:t.const_Zero),s},t.equals=function(s,i){if(!i||!i.words||s.sigBytes!==i.sigBytes)return!1;s.clamp(),i.clamp();for(var a=0,c=0;c<s.words.length;c++)a|=s.words[c]^i.words[c];return a===0},t.msb=function(s){return s.words[0]>>>31}})(Y);(function(e){var t=e.lib.Base,o=e.lib.WordArray,s=e.algo.AES,i=e.ext,a=e.pad.OneZeroPadding;function c(g,r){var T=s.createEncryptor(g,{iv:o.create(),padding:e.pad.NoPadding}),p=T.finalize(r);return p}var m=e.algo.CMAC=t.extend({init:function(g){var r=c(g,i.const_Zero),T=r.clone();if(i.dbl(T),this._isTwo){var p=r.clone();i.inv(p)}else{var p=T.clone();i.dbl(p)}this._K1=T,this._K2=p,this._K=g,this._const_Bsize=16,this.reset()},reset:function(){this._x=i.const_Zero.clone(),this._counter=0,this._buffer=o.create()},update:function(g){if(!g)return this;var r=this._buffer,T=this._const_Bsize;for(typeof g=="string"&&(g=e.enc.Utf8.parse(g)),r.concat(g);r.sigBytes>T;){var p=i.shiftBytes(r,T);i.xor(this._x,p),this._x.clamp(),this._x=c(this._K,this._x),this._counter++}return this},finalize:function(g){this.update(g);var r=this._buffer,T=this._const_Bsize,p=r.clone();return r.sigBytes===T?i.xor(p,this._K1):(a.pad(p,T/4),i.xor(p,this._K2)),i.xor(p,this._x),this.reset(),c(this._K,p)},_isTwo:!1});e.CMAC=function(g,r){return m.create(g).finalize(r)},e.algo.OMAC1=m,e.algo.OMAC2=m.extend({_isTwo:!0})})(Y);(function(e){var t=e.lib.Base,o=e.lib.WordArray;e.algo.AES;var s=e.ext,i=e.pad.OneZeroPadding,a=e.algo.CMAC,c=e.algo.S2V=t.extend({init:function(m){this._blockSize=16,this._cmacAD=a.create(m),this._cmacPT=a.create(m),this.reset()},reset:function(){this._buffer=o.create(),this._cmacAD.reset(),this._cmacPT.reset(),this._d=this._cmacAD.finalize(s.const_Zero),this._empty=!0,this._ptStarted=!1},updateAAD:function(m){return this._ptStarted?this:m?(typeof m=="string"&&(m=e.enc.Utf8.parse(m)),this._d=s.xor(s.dbl(this._d),this._cmacAD.finalize(m)),this._empty=!1,this):this},update:function(m){if(!m)return this;this._ptStarted=!0;var g=this._buffer,r=this._blockSize,T=r/4,p=this._cmacPT;for(typeof m=="string"&&(m=e.enc.Utf8.parse(m)),g.concat(m);g.sigBytes>=2*r;){this._empty=!1;var k=s.popWords(g,T);p.update(k)}return this},finalize:function(m){this.update(m);var g=this._blockSize,r=this._buffer;if(this._empty&&r.sigBytes===0)return this._cmacAD.finalize(s.const_One);var T;return r.sigBytes>=g?T=s.xorendBytes(r,this._d):(i.pad(r,g),T=s.xor(s.dbl(this._d),r)),this._cmacPT.finalize(T)}});e.SIV=t.extend({init:function(m){var g=m.sigBytes/2;this._s2vKey=s.shiftBytes(m,g),this._ctrKey=m},encrypt:function(m,g){!g&&m&&(g=m,m=[]);var r=c.create(this._s2vKey);Array.prototype.forEach.call(m,function(l){r.updateAAD(l)});var T=r.finalize(g),p=s.bitand(T,s.const_nonMSB),k=e.AES.encrypt(g,this._ctrKey,{iv:p,mode:e.mode.CTR,padding:e.pad.NoPadding});return T.concat(k.ciphertext)},decrypt:function(m,g){!g&&m&&(g=m,m=[]);var r=s.shiftBytes(g,16),T=s.bitand(r,s.const_nonMSB),p=e.AES.decrypt({ciphertext:g},this._ctrKey,{iv:T,mode:e.mode.CTR,padding:e.pad.NoPadding}),k=c.create(this._s2vKey);Array.prototype.forEach.call(m,function(b){k.updateAAD(b)});var l=k.finalize(p);return s.equals(r,l)?p:!1}})})(Y);const Jt=new URL("/assets/sqlite.worker.710c9469.js",self.location),Qt=new URL("/assets/sql-wasm.dd613b12.wasm",self.location),es=()=>Math.random().toString(36).substr(2,9);let Ee=0;async function ts(){if(window._worker)return window._worker;if(Ee)return new Promise((t,o)=>{function s(){setTimeout(()=>{if(window._worker){t(window._worker);return}s()},50)}s()});Ee=1;async function e(){return await qe.exports.createDbWorker([{from:"inline",config:{serverMode:"full",url:`${location.protocol}//${location.host}/analytics.sqlite3.png`,requestChunkSize:1024*32}}],Jt.toString(),Qt.toString())}return window._worker=await e(),window._worker}async function le(e){let t=await ts(),o=es();console.time("query time "+o);let s=await t.db.query(e);return console.log("query",e,s),console.timeEnd("query time "+o),s}function De(e){return e||(e=new Date),(typeof e!="object"||!e.toISOString)&&(e=new Date(e)),e.toISOString().slice(0,10)}function pe(e,t){let o=[],s;if(e.state.key&&(s=Y.SIV.create(Y.enc.Hex.parse(e.state.key))),e.state.host){let i=`host = '${e.state.host}'`;if(s){let a=s.encrypt(e.state.host).toString();i=`(${i} OR host = '${a}')`}o.push(i)}if(e.state.path){let i=`pathname = '${e.state.path}'`;if(s){let a=s.encrypt(e.state.path).toString();i=`(${i} OR pathname = '${a}')`}o.push(i)}if(e.state.referrer!==""){let i=e.state.referrer||"",a=`referer_host = '${i}'`;if(s&&i){let c=s.encrypt(i).toString();a=`(${a} OR referer_host = '${c}')`}o.push(a)}if(e.state.utm_source!==""){let i=e.state.utm_source||null,a=i?`utm_source = '${i}'`:"utm_source is null";if(s&&i){let c=s.encrypt(i).toString();a=`(${a} OR utm_source = '${c}')`}o.push(a)}if(e.state.utm_medium!==""){let i=e.state.utm_medium||null,a=i?`utm_medium = '${i}'`:"utm_medium is null";if(s&&i){let c=s.encrypt(i).toString();a=`(${a} OR utm_medium = '${c}')`}o.push(a)}if(e.state.utm_campaign!==""){let i=e.state.utm_campaign||null,a=i?`utm_campaign = '${i}'`:"utm_campaign is null";if(s&&i){let c=s.encrypt(i).toString();a=`(${a} OR utm_campaign = '${c}')`}o.push(a)}return e.state.os&&o.push(`os = '${e.state.os}'`),e.state.device&&o.push(`device_type = '${e.state.device}'`),e.state.is_bot!==""&&o.push(`bot = '${e.state.is_bot}'`),e.state.is_new!==""&&o.push(`is_new = '${e.state.is_new}'`),e.state.browser&&o.push(`browser = '${e.state.browser}'`),e.state.language&&o.push(`lang = '${e.state.language}'`),e.state.country&&o.push(`country_code = '${e.state.country}'`),e.state.start&&e.state.end&&!t&&o.push(`date BETWEEN '${De(e.state.start)}' AND '${De(e.state.end)}'`),(o.length?" WHERE ":"")+(o.join(" AND ")||"")}async function ss(e){if(!e.state.host)return[];const t=e.state.key?Y.SIV.create(Y.enc.Hex.parse(e.state.key)):null;let o=`SELECT pathname, AVG(load_time) as AvgLoadTime from visits${pe(e)} GROUP BY pathname ORDER BY AvgLoadTime DESC LIMIT 10;`,s=await le(o);return t&&s.forEach(i=>{try{let a=t.decrypt(Y.enc.Hex.parse(i.pathname)).toString(Y.enc.Utf8);a&&a!="false"&&(i.pathname=a)}catch{}}),s}async function ze(e,t="hour",o=10){if(!e.state.host)return[];const s=e.state.key?Y.SIV.create(Y.enc.Hex.parse(e.state.key)):null,i=e.state.showVisitors?"count(DISTINCT ip)":"count(*)";let a=t==="hour"||t==="date",c=a?t:i,m=a?"ASC":"DESC",g=a?"":` LIMIT ${o}`,r=`SELECT ${t}, ${i} FROM visits${pe(e)} GROUP BY ${t} ORDER BY ${c} ${m}${g};`,T=await le(r);return s&&T.forEach(p=>{try{let k=s.decrypt(Y.enc.Hex.parse(p[t])).toString(Y.enc.Utf8);k&&k!="false"&&(p[t]=k)}catch{}}),T}async function Me(e,t="pathname",o="EntrypageCount",s=10){if(!e.state.host)return[];const i=e.state.key?Y.SIV.create(Y.enc.Hex.parse(e.state.key)):null;let a=`SELECT ${t},
    COUNT(CASE WHEN ts = First THEN 1 END) AS EntrypageCount,
    COUNT(CASE WHEN ts = Last THEN 1 END) AS ExitPagecount
FROM (SELECT *,
    MIN(ts) OVER (PARTITION BY ip, 'date') AS First,
    MAX(ts) OVER (PARTITION BY ip, 'date') AS Last
    FROM visits) T
${pe(e)}
GROUP BY ${t}
ORDER BY ${o} DESC LIMIT ${s}`,c=await le(a);return c=c.filter(m=>m[o]>0),i&&c.forEach(m=>{try{let g=i.decrypt(Y.enc.Hex.parse(m[t])).toString(Y.enc.Utf8);g&&g!="false"&&(m[t]=g)}catch{}}),c}const ae={toObject:function(e){return typeof e=="string"?JSON.parse(e):e},toBoolean:function(e){return typeof e=="string"?e==="true":e},toInt:function(e){return typeof e=="string"?parseInt(e):e}},B={id:{type:String,required:!0},data:{type:[String,Array],required:!0},barColors:{type:[String,Array,Function],required:!1},xkey:{type:String,required:!1,default:"key"},ykeys:{type:[String,Array],required:!1,default:function(){return["value"]}},labels:{type:[String,Array],required:!1,default:function(){return["Value"]}},hoverCallback:{type:Function,required:!1},axes:{type:[Boolean,String],required:!1,default:!0},hideHover:{type:String,required:!1},stacked:{type:[Boolean,String],required:!1},resize:{type:[Boolean,String],required:!1},horizontal:{type:[Boolean,String],required:!1,default:!1},grid:{type:[Boolean,String],required:!1,default:!0},gridTextColor:{type:String,required:!1,default:"#888"},gridTextSize:{type:[Number,String],required:!1,default:12},gridTextFamily:{type:String,required:!1,default:"sans-serif"},gridTextWeight:{type:String,required:!1,default:"normal"},colors:{type:[String,Array],required:!1},formatter:{type:Function,required:!1},lineColors:{type:[String,Array,Function],required:!1},xLabels:{type:String,required:!1},lineWidth:{type:[Number,String],required:!1},pointSize:{type:[Number,String],required:!1},pointFillColors:{type:[String,Array],required:!1},pointStrokeColors:{type:[String,Array],required:!1},ymax:{type:String,required:!1},ymin:{type:String,required:!1},smooth:{type:[Boolean,String],required:!1,default:!0},parseTime:{type:[Boolean,String],required:!1,default:!0},postUnits:{type:String,required:!1},preUnits:{type:String,required:!1},dateFormat:{type:Function,required:!1},xLabelFormat:{type:Function,required:!1},yLabelFormat:{type:Function,required:!1},xLabelAngle:{type:String,required:!1},goals:{type:[String,Array],required:!1},goalStrokeWidth:{type:[Number,String],required:!1},goalLineColors:{type:[String,Array],required:!1},events:{type:[String,Array],required:!1},eventStrokeWidth:{type:String,required:!1},eventLineColors:{type:[String,Array],required:!1},fillOpacity:{type:String,required:!1},behaveLikeLine:{type:[Boolean,String],required:!1,default:!1}},is={id:B.id,data:B.data,barColors:B.barColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,hoverCallback:B.hoverCallback,grid:B.grid,horizontal:B.horizontal,axes:B.axes,hideHover:B.hideHover,stacked:B.stacked,resize:B.resize,ymax:B.ymax,ymin:B.ymin,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight},as={id:B.id,data:B.data,colors:B.colors,formatter:B.formatter,resize:B.resize},Se={id:B.id,data:B.data,resize:B.resize,lineColors:B.lineColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabels:B.xLabels,grid:B.grid,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight,lineWidth:B.lineWidth,pointSize:B.pointSize,pointFillColors:B.pointFillColors,pointStrokeColors:B.pointStrokeColors,ymax:B.ymax,ymin:B.ymin,smooth:B.smooth,hideHover:B.hideHover,parseTime:B.parseTime,postUnits:B.postUnits,preUnits:B.preUnits,dateFormat:B.dateFormat,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,goals:B.goals,goalStrokeWidth:B.goalStrokeWidth,goalLineColors:B.goalLineColors,events:B.events,eventStrokeWidth:B.eventStrokeWidth,eventLineColors:B.eventLineColors,fillOpacity:B.fillOpacity,hoverCallback:B.hoverCallback},Re={behaveLikeLine:B.behaveLikeLine};for(var Oe in Se)Se.hasOwnProperty(Oe)&&(Re[Oe]=Se[Oe]);const xe={addOption(e,t){this[e]&&(t[e]=this[e])},addOptionAsObject(e,t){this[e]&&(t[e]=ae.toObject(this[e]))}};var ns={bar:{props:is,methods:xe},donut:{props:as,methods:xe},line:{props:Se,methods:xe},area:{props:Re,methods:xe}},ge=(e,t)=>{const o=e.__vccOpts||e;for(const[s,i]of t)o[s]=i;return o};const os={name:"area-chart",mixins:[ns.area],data(){return{chart:null}},watch:{data(e){this.$nextTick(()=>{this.chart.options.labels=ae.toObject(this.labels),this.chart.options.xkey=this.xkey,this.chart.options.ykeys=ae.toObject(this.ykeys),this.lineColors&&(this.chart.options.lineColors=ae.toObject(this.lineColors)),this.chart.setData(ae.toObject(this.data))})}},mounted(){let e={element:this.id,data:ae.toObject(this.data),resize:ae.toBoolean(this.resize),labels:ae.toObject(this.labels),xkey:this.xkey,ykeys:ae.toObject(this.ykeys),grid:ae.toBoolean(this.grid),gridTextColor:this.gridTextColor,gridTextSize:ae.toInt(this.gridTextSize),gridTextFamily:this.gridTextFamily,gridTextWeight:this.gridTextWeight,lineWidth:this.lineWidth,pointSize:this.pointSize,ymax:this.ymax,ymin:this.ymin,smooth:ae.toBoolean(this.smooth),hideHover:this.hideHover,parseTime:ae.toBoolean(this.parseTime),postUnits:this.postUnits,preUnits:this.preUnits,xLabelAngle:this.xLabelAngle,goalStrokeWidth:this.goalStrokeWidth,eventStrokeWidth:this.eventStrokeWidth,fillOpacity:this.fillOpacity,behaveLikeLine:this.behaveLikeLine};this.addOptionAsObject("lineColors",e),this.addOption("xLabels",e),this.addOptionAsObject("pointFillColors",e),this.addOptionAsObject("pointStrokeColors",e),this.addOption("dateFormat",e),this.addOption("xLabelFormat",e),this.addOption("yLabelFormat",e),this.addOptionAsObject("goals",e),this.addOptionAsObject("goalLineColors",e),this.addOptionAsObject("events",e),this.addOptionAsObject("eventLineColors",e),this.addOption("hoverCallback",e),this.chart=Morris.Area(e)}},rs=["id"];function ls(e,t,o,s,i,a){return I(),M("div",{id:e.id},null,8,rs)}var cs=ge(os,[["render",ls]]);const us={id:"visits"},ds={key:0,class:"spinner-border spinme",role:"status"},hs={key:1},ms={class:"edge"},fs={setup(e){const t=he();let{start:o,end:s,host:i,path:a,os:c,device:m,is_bot:g,is_new:r,browser:T,language:p,referrer:k,utm_source:l,utm_medium:b,utm_campaign:n,country:d,range:y,summary:x,showVisitors:E}=me();const V=Q([]),j=Q(!0),W=Q(!1),$=Q(null),D=de(()=>y.value<2),C=de(()=>D.value?"hour":"date"),z=f=>D.value?new Date(f).toLocaleString():`${new Date(f).toLocaleString(navigator.language||"en-us",{weekday:"long"})},
${new Date(f).toLocaleDateString()}`,N=Q("day");async function S(){if(!i.value)return j.value=!1;y.value>1e3?N.value="month":N.value=D.value?"hour":"day";const f=pe(t);let G=f.split(" ").pop().replace("'","").replace("'",""),X=E.value?"count(DISTINCT ip)":"count(*)",q=D.value?"hour":"date";const L=`SELECT ${q}, ${X} FROM visits${f} GROUP BY ${q} ORDER BY ${q} ASC;`;let A=await le(L);A.forEach(O=>{D.value&&(O.hour=+new Date(`${G}T${O.hour<10?"0":""}${O.hour}:00:00Z`)),O.value=O["count(DISTINCT ip)"]||O["count(*)"],delete O["count(DISTINCT ip)"],delete O["count(*)"]}),A.filter(O=>O.date==new Date().toISOString().split("T")[0]).length||y.value==1?W.value=!0:W.value=!1,V.value=A,j.value=!1;const U=`SELECT hour, count(*) FROM visits${pe(t,1)} AND date = '${De()}' GROUP BY hour`,be=(await le(U)).pop();let ve=0;be&&(ve=be["count(*)"]),t.commit("setLiveVisitors",ve)}function F(f,G,X,q){return q.date&&($.value=q.date),X}function h(f,G){t.commit("setRange",f)}function _(){if($.value){let f=new Date-new Date($.value),G=Math.floor(f/864e5)*-1;G>-33&&G<2&&h(G)}}function v(){(y.value===1||y.value<0)&&h(7)}return ye(S),w(i,S),w(a,S),w(y,S),w(E,S),w(c,S),w(m,S),w(g,S),w(r,S),w(T,S),w(p,S),w(k,S),w(l,S),w(b,S),w(n,S),w(d,S),(f,G)=>(I(),M("div",us,[j.value?(I(),M("div",ds)):V.value.length?(I(),Fe(cs,{key:2,id:"line",data:V.value,xkey:R(C),ykey:"value",resize:"true",labels:R(E)?'[ "Visitors" ]':'[ "Pageviews" ]',"line-color":"#2847b7","fill-opacity":"0.16","line-width":"4",dateFormat:z,smooth:!1,xLabelAngle:"45",removed:"","data-xLabelFormat":"labelFormat","data-xLabels":"xLabel",hoverCallback:F,onClick:_,onDblclick:v,grid:"true","grid-text-weight":"bold"},null,8,["data","xkey","labels"])):(I(),M("div",hs,"No data for selected period")),Ae(u("div",ms,null,512),[[Ke,W.value]])]))}};var ps=ge(fs,[["__scopeId","data-v-9084c4ac"]]);const gs={key:0,class:"card-header"},vs={class:"card-body"},ys={key:0,class:"card-title"},_s={key:1,class:"spinner-border spinme",role:"status"},bs={key:1,class:"card-footer"},ks={props:{header:String,title:String,body:String,footer:String,loading:Boolean},setup(e){const{dark:t}=me();return(o,s)=>(I(),M("div",{class:oe(["card min-357",{"bg-dark":R(t)}])},[e.header?(I(),M("div",gs,[Be(o.$slots,"header",{},()=>[ee(K(e.header),1)],!0)])):J("",!0),u("div",vs,[e.title?(I(),M("h5",ys,K(e.title),1)):J("",!0),e.loading?(I(),M("div",_s)):J("",!0),Be(o.$slots,"default",{},()=>[ee(K(e.body),1)],!0)]),e.footer?(I(),M("div",bs,[Be(o.$slots,"footer",{},()=>[ee(K(e.footer),1)],!0)])):J("",!0)],2))}};var Le=ge(ks,[["__scopeId","data-v-0df628f2"]]);const ws={class:"card-title"},Ss={props:{title:String,underline:Boolean,muted:{type:Boolean,default:!0}},setup(e){const t=e,o=he();let s=Q("-");const{host:i,path:a,os:c,device:m,is_bot:g,is_new:r,browser:T,language:p,referrer:k,utm_source:l,utm_medium:b,utm_campaign:n,country:d,range:y,summary:x}=me();function E($){return`${($*100).toFixed(2)}%`}function V($){return $==parseInt($)&&($=parseInt($)),typeof $=="number"&&($=$.toLocaleString()),$}function j($){return($-($%=60))/60+"m "+parseInt($)}async function W(){if(!o.state.host)return;const $=pe(o);if(t.title==="Visitors"){const D=`SELECT count(DISTINCT ip) from visits${$}`;let C=await le(D);s.value=C[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const D=`SELECT count(*) from VISITS${$}`;let C=await le(D);s.value=C[0]["count(*)"]}else if(t.title==="Bounce Rate"){let D=`SELECT count(DISTINCT ip) from visits${$}`,C=await le(D),z=C[0]["count(DISTINCT ip)"];D=`SELECT count(DISTINCT ip) from visits${$} AND is_new = 1`,C=await le(D);let N=C[0]["count(DISTINCT ip)"];s.value=z===0?0:E(N/z)}else if(t.title==="Session Length"){const D=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${$} GROUP BY ip) x`;let C=await le(D);s.value=j(C[0]["AVG(x.MaxValue)"])||0}}return ye(W),w(i,W),w(a,W),w(y,W),w(c,W),w(m,W),w(g,W),w(r,W),w(T,W),w(p,W),w(k,W),w(l,W),w(b,W),w(n,W),w(d,W),($,D)=>(I(),M("div",{class:oe(["col-6 col-md-3",{cp:e.underline,selected:!e.muted&&!e.underline}])},[u("h6",{class:oe(["card-subtitle mb-2",{"text-muted":e.muted,"text-decoration-underline":e.underline,"link-color":e.underline}])},K(e.title),3),u("h4",ws,K(V(R(s))),1)],2))}};var $e=ge(Ss,[["__scopeId","data-v-7d6c9717"]]);const xs={class:"mt-2 pseudotable"},$s={key:0,class:"spinner-border spinme",role:"status"},Cs={key:1,class:"mb-1"},Bs={class:"mb-1"},Ts=ee("\xA0 "),Ds={key:0,style:{display:"inline-block","margin-left":"-3px"}},Os=ee("\xA0\u2009 "),Ls={key:2},As={key:3,style:{display:"inline-block"}},Fs=["src"],Is=ee("\xA0\u2009 "),Es={key:4,style:{display:"inline-block"}},zs=["src"],Ms=ee("\xA0\u2009 "),Rs={key:5,style:{display:"inline-block"}},Ns=["src"],Ps=ee("\xA0\u2009 "),Vs={key:6,style:{display:"inline-block"}},Ws=["onClick"],qs={key:7,style:{display:"inline-block"}},Ks=["href"],Us={key:8},Hs={class:"float-right text-right pt-1"},se={props:{column:String,iconify:Boolean,favicons:Boolean,browserIcons:Boolean,osIcons:Boolean,links:Boolean,setter:String,linkPrefix:String,limit:Number,defaultText:String,valueColumn:String,loadTimes:Boolean,valueFormatter:Function,keyFormatter:Function},setup(e){const{column:t,iconify:o,favicons:s,browserIcons:i,osIcons:a,links:c,setter:m,linkPrefix:g,limit:r,defaultText:T,valueColumn:p,loadTimes:k,valueFormatter:l,keyFormatter:b}=e,n=he(),{host:d,path:y,os:x,device:E,is_bot:V,is_new:j,browser:W,language:$,referrer:D,utm_source:C,utm_medium:z,utm_campaign:N,country:S,range:F,summary:h,showVisitors:_}=me(),v=de(()=>p||(_.value?"count(DISTINCT ip)":"count(*)")),f=Q([]),G=Q(0),X=Q(!0);async function q(){let O=[];p==="AvgLoadTime"?O=await ss(n):p==="EntrypageCount"?O=await Me(n,t,p,r||10):p==="ExitPagecount"?O=await Me(n,t,p,r||10):O=await ze(n,t,r||10);let te=O.filter(P=>!P[t]);if(te.length>1){let P=te.map(ne=>ne[v.value]).reduce((ne,fe)=>ne+=fe),re=O.filter(ne=>ne[t]),ue={};ue[t]=null,ue[v.value]=P,re.unshift(ue),O=re}O.sort((P,re)=>re[v.value]-P[v.value]),f.value=O;try{G.value=O[0][v.value]}catch{G.value=0}X.value=!1}function L(O){return O==parseInt(O)&&(O=parseInt(O)),typeof O=="number"&&(O=O.toLocaleString()),O}function A(O,te=48,P="web"){const re="avant,basilisk,brave,browsh,chrome,chromium,deno,dolphin,edge,electron,epic,falkon,firefox,geckoview,hermes,icecat,jsdom,konqueror,maxthon,midori,netsurf,node.js,nw.js,opera,otter,puffin,qutebrowser,safari,seamonkey,servo,silk,spidermonkey,tor,uc,v8,vivaldi,web,webkit,yandex".split(","),ue=O.toLowerCase().trim().split(" ");let ne=re.filter(fe=>ue.includes(fe));return ne.length&&(P=ne[0]),`https://cdnjs.cloudflare.com/ajax/libs/browser-logos/72.0.0/${P}/${P}_${te}x${te}.png`}function U(O){const te="AIX,AND,AMG,ATV,ARL,BTR,SBA,BEO,BLB,QNX,CAI,CES,COS,CYN,DEB,DEE,DFB,FED,FOS,FIR,BSD,FYD,GNT,GTV,HPX,HAI,IPA,HAR,KOS,KNO,KBT,LIN,LBT,MAC,MAE,MAG,MDR,SMG,MIN,MOR,NBS,WII,NDS,OS2,OBS,OWR,PCL,PSP,PS3,RHT,ROS,ROK,RSO,REM,REX,SAB,SSE,SAF,SLW,SOS,SYL,SYM,SYS,S40,S60,SY3,TDX,TIZ,UBT,WAS,WHS,WIN,WCE,WIO,WMO,WPH,WRT,XBX,XBT,YNS,IOS,POS,WOS".split(","),P="aix,android,amigaos,tvos,arch linux,backtrack,bada,beos,blackberry os,blackberry tablet os,caixa m\xE1gica,centos,chrome os,cyanogenmod,debian,deepin,dragonfly,fedora,firefox os,fire os,freebsd,fydeos,gentoo,google tv,hp-ux,haiku os,ipados,harmonyos,kaios,knoppix,kubuntu,linux,lubuntu,mac,maemo,mageia,mandriva,meego,mint,morphos,netbsd,nintendo,nintendo mobile,os/2,openbsd,openwrt,pclinuxos,playstation portable,playstation,red hat,risc os,roku os,rosa,remix os,rex,sabayon,suse,sailfish os,slackware,solaris,syllable,symbian,symbian os,symbian os series 40,symbian os series 60,symbian^3,threadx,tizen,ubuntu,watchos,whale os,windows,windows ce,windows iot,windows mobile,windows phone,windows rt,xbox,xubuntu,yunos,ios,palmos,webos".split(","),re="16,24,32,48,64,128,256,512".split(",");let ue="",ne=re[3];O=O.toLowerCase().trim();let fe=P.map(Ne=>O.includes(Ne)).indexOf(!0);return fe>0&&(ue=te[fe]),ue?`https://cdn.jsdelivr.net/npm/@egoistdeveloper/operating-system-logos/src/${ne}x${ne}/${ue}.png`:"/default.png"}function ce(O){return O=(O+"").toLowerCase().trim(),{desktop:"bi bi-pc-display-horizontal",laptop:"bi bi-laptop",tablet:"bi bi-tablet",mobile:"bi bi-phone",returning:"bi bi-arrow-repeat",new:"bi bi-person-plus","normal users":"bi bi-person-square","headless browsers":"bi bi-robot"}[O]}function be(O){return O=(O+"").toLowerCase().trim(),O.indexOf("http")===0&&(O=new URL(O).hostname),O}function ve(O,te=40){return O&&O.length>te&&(O=O.substring(0,te)+"..."),O}return ye(q),w(d,q),w(y,q),w(F,q),w(_,q),w(x,q),w(E,q),w(V,q),w(j,q),w(W,q),w($,q),w(D,q),w(C,q),w(z,q),w(N,q),w(S,q),(O,te)=>(I(),M("div",xs,[X.value?(I(),M("div",$s)):f.value.length?(I(!0),M(ke,{key:2},Ce(f.value,P=>(I(),M("div",Bs,[u("div",{class:"shaded d-inline-block bg-grey text-nowrap pt-1 pb-1",style:Ue(`width: ${P[R(v)]/G.value*85}%`)},[Ts,e.iconify&&ce(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column])?(I(),M("div",Ds,[u("i",{class:oe(ce(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column]))},null,2),Os])):J("",!0),!P[e.column]&&e.setter?(I(),M("a",{key:1,class:"text-decoration-underline cp",onClick:te[0]||(te[0]=re=>e.setter&&R(n).commit(e.setter,0))},K(e.defaultText||"None"),1)):P[e.column]?J("",!0):(I(),M("span",Ls,K(e.defaultText||"None"),1)),e.favicons?(I(),M("div",As,[P[e.column]&&e.favicons?(I(),M("img",{key:0,src:`https://logo.clearbit.com/${be(P[e.column])}`,onerror:"this.src='default.png';"},null,8,Fs)):J("",!0),Is])):J("",!0),e.browserIcons?(I(),M("div",Es,[P[e.column]&&e.browserIcons?(I(),M("img",{key:0,src:`${A(P[e.column])}`},null,8,zs)):J("",!0),Ms])):J("",!0),e.osIcons?(I(),M("div",Rs,[P[e.column]&&e.osIcons?(I(),M("img",{key:0,src:`${U(P[e.column])}`},null,8,Ns)):J("",!0),Ps])):J("",!0),e.setter?(I(),M("div",Vs,[P[e.column]?(I(),M("a",{key:0,class:"d-inline-block text-truncate cp",onClick:re=>R(n).commit(e.setter,P[e.column])},K(ve(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column])),9,Ws)):J("",!0)])):e.links?(I(),M("div",qs,[P[e.column]&&e.links?(I(),M("a",{key:0,class:"d-inline-block text-truncate",href:`${P[e.column].indexOf("http")?"http://":""}${e.linkPrefix||""}${P[e.column]}`,target:"_blank"},K(ve(P[e.column])),9,Ks)):J("",!0)])):J("",!0),P[e.column]&&!e.links&&!e.setter?(I(),M("span",Us,K(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column]),1)):J("",!0)],4),u("span",Hs,K(e.valueFormatter?e.valueFormatter(P[R(v)]):L(P[R(v)])),1)]))),256)):(I(),M("div",Cs," No data for selected period "))]))}},Ys={name:"svg-map",data(){return{id:"svg-map-"+Math.random().toString(36).substr(2,9)}},props:{countries:{type:Object},dark:{type:Boolean},showVisitors:{type:Boolean}},methods:{createMap(){let e={};document.querySelectorAll(".svgMap-tooltip").forEach(t=>t.remove()),this.showVisitors?e.visitors={name:"visitors",format:"{0}",thousandSeparator:","}:e.pageviews={name:"pageviews",format:"{0}",thousandSeparator:","},new svgMap({targetElementID:this.id,colorMax:this.dark?"#4c9be8":"#3459E6",colorMin:"#c7d2fc",colorNoData:this.dark?"rgb(78, 93, 108)":"#E2E2E2",data:{data:e,applyData:this.showVisitors?"visitors":"pageviews",values:this.countries||{}}}),this.$nextTick(()=>{document.querySelectorAll(".svgMap-map-image path[data-id]").forEach(t=>{t.onclick=o=>{const s=t.getAttribute("data-id");this.$emit("clicked",s)}})})}},computed:{bundle(){let{countries:e,dark:t}=this;return{countries:e,dark:t}}},mounted(){this.createMap()},watch:{bundle(e){this.$refs.svgMap.innerHTML="",this.$nextTick(()=>{this.createMap()})}}},Gs=["id"];function Xs(e,t,o,s,i,a){return I(),M("div",{id:i.id,ref:"svgMap"},null,8,Gs)}var Zs=ge(Ys,[["render",Xs]]);const Z=e=>(He("data-v-0e2a2154"),e=e(),Ye(),e),js={class:"container mt-5"},Js={class:"row"},Qs={class:"col-md-12"},ei={class:"row p-1 pt-2"},ti={class:"row mt-3"},si={class:"col-md-6"},ii={class:"card-body"},ai=Ie('<h5 class="card-title float-left tweaked" data-v-0e2a2154>Sources</h5><ul class="nav nav-tabs float-right" data-v-0e2a2154><li class="nav-item ms-auto" data-v-0e2a2154><a class="nav-link active" data-bs-toggle="tab" href="#referrers" data-v-0e2a2154><span class="d-none d-sm-inline" data-v-0e2a2154>Referrers</span><span class="d-inline d-sm-none" data-v-0e2a2154>All</span></a></li><li class="nav-item ms-auto" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#referrer_urls" data-v-0e2a2154>URLs</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#medium" data-v-0e2a2154>Medium</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#source" data-v-0e2a2154>Source</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#campaign" data-v-0e2a2154>Campaign</a></li></ul>',2),ni={class:"tab-content mt-5"},oi={class:"tab-pane fade active show",id:"referrers"},ri=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),li={class:"text-muted w-495 d-inline-block text-right"},ci={class:"tab-pane fade show",id:"referrer_urls"},ui=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),di={class:"text-muted w-495 d-inline-block text-right"},hi={class:"tab-pane fade show",id:"medium"},mi=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),fi={class:"text-muted w-495 d-inline-block text-right"},pi={class:"tab-pane fade show",id:"source"},gi=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),vi={class:"text-muted w-495 d-inline-block text-right"},yi={class:"tab-pane fade show",id:"campaign"},_i=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),bi={class:"text-muted w-495 d-inline-block text-right"},ki={class:"col-md-6 mt-3 mt-sm-0"},wi={class:"card-body"},Si=Ie('<h5 class="card-title float-left tweaked" data-v-0e2a2154>Pages</h5><ul class="nav nav-tabs float-right" data-v-0e2a2154><li class="nav-item ms-auto" data-v-0e2a2154><a class="nav-link active" data-bs-toggle="tab" href="#pages" data-v-0e2a2154>Top Pages</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#loadtimes" data-v-0e2a2154>Load Times</a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#entrypages" data-v-0e2a2154>Entry <span class="d-none d-sm-inline" data-v-0e2a2154> Pages</span></a></li><li class="nav-item" data-v-0e2a2154><a class="nav-link" data-bs-toggle="tab" href="#exitpages" data-v-0e2a2154>Exit <span class="d-none d-sm-inline" data-v-0e2a2154> Pages</span></a></li></ul>',2),xi={class:"tab-content mt-5"},$i={class:"tab-pane fade show active",id:"pages"},Ci=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Bi={class:"text-muted w-495 d-inline-block text-right"},Ti={class:"tab-pane fade show",id:"loadtimes"},Di=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Oi=Z(()=>u("small",{class:"text-muted w-495 d-inline-block text-right"},"Avg. Load Time",-1)),Li={class:"tab-pane fade show",id:"entrypages"},Ai=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Fi=Z(()=>u("small",{class:"text-muted w-495 d-inline-block text-right"},"Entries",-1)),Ii={class:"tab-pane fade show",id:"exitpages"},Ei=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),zi=Z(()=>u("small",{class:"text-muted w-495 d-inline-block text-right"},"Exits",-1)),Mi={class:"row mt-3"},Ri={class:"col-md-6"},Ni={class:"col-md-6 mt-3 mt-sm-0"},Pi=Z(()=>u("h5",{class:"card-title float-left tweaked"},"Users",-1)),Vi=Z(()=>u("ul",{class:"nav nav-tabs float-right"},[u("li",{class:"nav-item ms-auto"},[u("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#size"},[u("span",{class:"d-none d-sm-inline"},"Device "),ee("Type")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link d-none d-sm-inline-block","data-bs-toggle":"tab",href:"#new"},"Returning")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#browser"},"Browser")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#language"},[ee("Lang"),u("span",{class:"d-none d-sm-inline"},"uage")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#os"},"OS")])],-1)),Wi={class:"tab-content mt-5"},qi={class:"tab-pane fade show active",id:"size"},Ki=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Device Type",-1)),Ui={class:"text-muted w-495 d-inline-block text-right"},Hi=Z(()=>u("hr",null,null,-1)),Yi={class:"tab-pane fade",id:"new"},Gi=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"New vs. Returning",-1)),Xi={class:"text-muted w-495 d-inline-block text-right"},Zi={class:"tab-pane fade",id:"browser"},ji=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Browser",-1)),Ji={class:"text-muted w-495 d-inline-block text-right"},Qi={class:"tab-pane fade",id:"language"},ea=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"Language",-1)),ta={class:"text-muted w-495 d-inline-block text-right"},sa={class:"tab-pane fade",id:"os"},ia=Z(()=>u("small",{class:"text-muted w-495 d-inline-block"},"OS",-1)),aa={class:"text-muted w-495 d-inline-block text-right"},na={setup(e){const t=F=>typeof F=="number"?Math.max(0,F.toFixed(2)):F,o=F=>(F||"").charAt(0).toUpperCase()+(F||"").slice(1),s=F=>F?"Headless Browsers":"Normal Users",i=F=>F?"New":"Returning",a=F=>{let h={aa:"Afar",ab:"Abkhazian",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bh:"Bihari languages",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan; Valencian",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi; Dhivehi; Maldivian",dz:"Dzongkha",ee:"Ewe",el:"Greek, Modern (1453-)",en:"English",eo:"Esperanto",es:"Spanish; Castilian",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fulah",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Gaelic; Scomttish Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian; Haitian Creole",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ie:"Interlingue; Occidental",ig:"Igbo",ii:"Sichuan Yi; Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu; Gikuyu",kj:"Kuanyama; Kwanyama",kk:"Kazakh",kl:"Kalaallisut; Greenlandic",km:"Central Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kirghiz; Kyrgyz",la:"Latin",lb:"Luxembourgish; Letzeburgesch",lg:"Ganda",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Bokm\xE5l, Norwegian; Norwegian Bokm\xE5l",nd:"Ndebele, North; North Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch; Flemish",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",no:"Norwegian",nr:"Ndebele, South; South Ndebele",nv:"Navajo; Navaho",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",om:"Oromo",or:"Oriya",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",pi:"Pali",pl:"Polish",ps:"Pushto; Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ro:"Romanian; Moldavian; Moldovan",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Sotho, Southern",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap\xFCk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zh:"Chinese",zu:"Zulu"},_=F;try{_=_.toLowerCase().split("-")[0]}catch{}try{_=h[_]}catch{}return(!_||_=="undefined")&&(_="Unknown"),_+" ("+F+")"},c=he(),m=Q({}),{range:g,host:r,path:T,os:p,device:k,is_bot:l,is_new:b,browser:n,language:d,referrer:y,utm_source:x,utm_medium:E,utm_campaign:V,country:j,dark:W,summary:$,showVisitors:D}=me(),C=de(()=>D.value?"Visitors":"Pageviews");async function z(){let F=await ze(c,"country_code",999),h={};F.forEach(_=>{D.value?h[_.country_code]={visitors:_["count(DISTINCT ip)"]}:h[_.country_code]={pageviews:_["count(*)"]}}),m.value=h}function N(F){console.log("clicked on",F),c.commit("setCountry",F)}function S(){clearInterval(window._latest_refresh_timer),window._latest_refresh_timer=setInterval(()=>{g.value==1&&location.reload(!0)},5*60*1e3)}return S(),ye(z),w(r,z),w(T,z),w(g,z),w(D,z),w(p,z),w(k,z),w(l,z),w(b,z),w(n,z),w(d,z),w(y,z),w(x,z),w(E,z),w(V,z),w(j,z),w(g,S),(F,h)=>(I(),M("div",js,[H(jt),u("div",Js,[u("div",Qs,[H(Le,null,{default:Te(()=>[u("div",ei,[H($e,{title:"Visitors",muted:!1,underline:!R(D),onClick:h[0]||(h[0]=_=>R(c).commit("setShowVisitors",!0))},null,8,["underline"]),H($e,{title:"Total Pageviews",muted:!1,underline:R(D),onClick:h[1]||(h[1]=_=>R(c).commit("setShowVisitors",!1))},null,8,["underline"]),H($e,{title:"Bounce Rate"}),H($e,{title:"Session Length"})]),H(ps)]),_:1})])]),u("div",ti,[u("div",si,[u("div",{class:oe(["card min-357",{"bg-dark":R(W)}])},[u("div",ii,[ai,u("div",ni,[u("div",oi,[ri,u("small",li,K(R(C)),1),H(se,{column:"referer_host",setter:"setReferrer",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",ci,[ui,u("small",di,K(R(C)),1),H(se,{column:"referer_url",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",hi,[mi,u("small",fi,K(R(C)),1),H(se,{column:"utm_medium",setter:"setUtm_medium"})]),u("div",pi,[gi,u("small",vi,K(R(C)),1),H(se,{column:"utm_source",setter:"setUtm_source"})]),u("div",yi,[_i,u("small",bi,K(R(C)),1),H(se,{column:"utm_campaign",setter:"setUtm_campaign"})])])])],2)]),u("div",ki,[u("div",{class:oe(["card min-357",{"bg-dark":R(W)}])},[u("div",wi,[Si,u("div",xi,[u("div",$i,[Ci,u("small",Bi,K(R(C)),1),H(se,{column:"pathname",setter:"setPath",defaultText:"None"})]),u("div",Ti,[Di,Oi,H(se,{column:"pathname",valueColumn:"AvgLoadTime",setter:"setPath",loadTimes:!0,valueFormatter:t})]),u("div",Li,[Ai,Fi,H(se,{column:"pathname",valueColumn:"EntrypageCount",setter:"setPath",defaultText:"None"})]),u("div",Ii,[Ei,zi,H(se,{column:"pathname",valueColumn:"ExitPagecount",setter:"setPath",defaultText:"None"})])])])],2)])]),u("div",Mi,[u("div",Ri,[H(Le,{title:"Countries"},{default:Te(()=>[H(Zs,{countries:m.value,dark:R(W),showVisitors:R(D),onClicked:N},null,8,["countries","dark","showVisitors"])]),_:1})]),u("div",Ni,[H(Le,null,{default:Te(()=>[Pi,Vi,u("div",Wi,[u("div",qi,[Ki,u("small",Ui,K(R(C)),1),H(se,{column:"device_type",setter:"setDevice",iconify:!0,keyFormatter:o}),Hi,H(se,{column:"bot",setter:"setIs_bot",iconify:!0,defaultText:"Normal Users",keyFormatter:s})]),u("div",Yi,[Gi,u("small",Xi,K(R(C)),1),H(se,{column:"is_new",setter:"setIs_new",iconify:!0,defaultText:"Returning",keyFormatter:i})]),u("div",Zi,[ji,u("small",Ji,K(R(C)),1),H(se,{column:"browser",setter:"setBrowser",browserIcons:!0})]),u("div",Qi,[ea,u("small",ta,K(R(C)),1),H(se,{column:"lang",setter:"setLanguage",keyFormatter:a})]),u("div",sa,[ia,u("small",aa,K(R(C)),1),H(se,{column:"os",setter:"setOs",osIcons:!0})])])]),_:1})])])]))}};var oa=ge(na,[["__scopeId","data-v-0e2a2154"]]);const ra={setup(e){const t=he();function o(){let s=localStorage.getItem("__analytics_encryption_key"),i=localStorage.getItem("__analytics_public_key"),a=localStorage.getItem("__analytics_hosts");if(a)try{a=JSON.parse(a)}catch{}Array.isArray(a)||(a=null);let c={};location.search.slice(1).split("&").map(g=>g.split("=")).forEach(g=>c[g[0]]=g[1]);async function m(){let g="/keypair";location.hostname==="localhost"&&(g="https://analytics.servers.do/keypair");let T=await(await fetch(g)).json(),{public_key:p,private_key:k}=T;localStorage.setItem("__analytics_encryption_key",k),localStorage.setItem("__analytics_public_key",p),t.commit("setPublicKey",p),t.commit("setKey",k)}if(c.key){try{c.key=decodeURIComponent(c.key)}catch{}localStorage.setItem("__analytics_encryption_key",c.key),t.commit("setKey",c.key)}else s&&t.commit("setKey",s);if(c.pkey){try{c.pkey=decodeURIComponent(c.pkey)}catch{}localStorage.setItem("__analytics_public_key",c.pkey),t.commit("setPublicKey",c.pkey)}else i?t.commit("setPublicKey",i):m();c.host&&((!a||!Array.isArray(a))&&(a=[]),a.includes(c.host)||a.push(c.host),localStorage.setItem("__analytics_hosts",JSON.stringify(a))),a&&(a.sort((g,r)=>g.localeCompare(r)),t.commit("setDomains",a),c.host||(c.host=a[0])),c.range||(c.range=7),t.commit("setPath",c.path||""),t.commit("setHost",c.host||""),t.commit("setRange",c.range),t.commit("setOs",c.os||""),t.commit("setDevice",c.device||""),t.commit("setIs_bot",c.is_bot||""),t.commit("setIs_new",c.is_new||""),t.commit("setBrowser",c.browser||""),t.commit("setLanguage",c.language||""),t.commit("setReferrer",c.referrer||""),t.commit("setUtm_source",c.utm_source||""),t.commit("setUtm_medium",c.utm_medium||""),t.commit("setUtm_campaign",c.utm_campaign||"")}return o(),addEventListener("popstate",s=>{console.log("onpopstate location: "+document.location),o()}),(s,i)=>(I(),M(ke,null,[H(dt),H(oa),H(it),H(Bt)],64))}};Ge(ra).use(Ze).mount("#app");
