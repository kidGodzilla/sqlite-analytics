import{c as We,o as F,a as z,b as l,t as q,u as D,d as te,e as he,r as j,f as be,w,n as re,g as De,v as qe,h as ce,F as Se,i as Le,j as J,k as Ae,m as Ke,l as Ue,p as Fe,q as Oe,s as He,x as U,y as xe,z as Me,A as Ye,B as Ge,C as Xe}from"./vendor.a79dc407.js";const Ze=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function u(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=u(i);fetch(i.href,o)}};Ze();function me(e){e==parseInt(e)&&(e=parseInt(e));const t=new Date;return t.setDate(t.getDate()-e)}function $e(e){return Math.floor((+new Date-+new Date(e))/(25*60*60*1e3))}function ae(e){let t=`?host=${e.host}&range=${e.range}`;e.os&&(t+=`&os=${e.os}`),e.path&&(t+=`&path=${e.path}`),e.device&&(t+=`&device=${e.device}`),e.is_bot!==""&&(t+=`&is_bot=${e.is_bot}`),e.is_new!==""&&(t+=`&is_new=${e.is_new}`),e.browser&&(t+=`&browser=${e.browser}`),e.language&&(t+=`&language=${e.language}`),e.referrer&&(t+=`&referrer=${e.referrer}`),e.utm_source!==""&&(t+=`&utm_source=${e.utm_source}`),e.utm_medium!==""&&(t+=`&utm_medium=${e.utm_medium}`),e.utm_campaign!==""&&(t+=`&utm_campaign=${e.utm_campaign}`),e.country!==""&&(t+=`&country=${e.country}`),e.event!==""&&(t+=`&event=${e.event}`),location.search!==t&&window.history.pushState("","",t)}var je=We({state(){return{publicKey:"",domains:[],host:"",path:"",key:"",start:me(0),end:me(0),comparisonStart:me(0),comparisonEnd:me(0),range:"1",rangeString:"Latest",liveVisitors:0,showVisitors:!0,summary:{},dark:!1,os:"",device:"",is_bot:"",is_new:"",browser:"",language:"",referrer:"",utm_source:"",utm_medium:"",utm_campaign:"",country:"",event:""}},getters:{domains:e=>e.domains,dark:e=>e.dark,key:e=>e.key,publicKey:e=>e.publicKey,host:e=>e.host,path:e=>e.path,start:e=>e.start,end:e=>e.end,comparisonStart:e=>e.comparisonStart,comparisonEnd:e=>e.comparisonEnd,range:e=>e.range,rangeString:e=>e.rangeString,liveVisitors:e=>e.liveVisitors,showVisitors:e=>e.showVisitors,summary:e=>e.summary,os:e=>e.os,device:e=>e.device,is_bot:e=>e.is_bot,is_new:e=>e.is_new,browser:e=>e.browser,language:e=>e.language,referrer:e=>e.referrer,utm_source:e=>e.utm_source,utm_medium:e=>e.utm_medium,utm_campaign:e=>e.utm_campaign,country:e=>e.country,event:e=>e.event},mutations:{setDark(e,t){e.dark=t},setKey(e,t){e.key=t},setPublicKey(e,t){e.publicKey=t},setDomains(e,t){e.domains=t},setHost(e,t){e.host=t,ae(e)},setPath(e,t){e.path=t,ae(e)},setOs(e,t){e.os=t,ae(e)},setDevice(e,t){e.device=t,ae(e)},setIs_bot(e,t){e.is_bot=t,ae(e)},setIs_new(e,t){e.is_new=t,ae(e)},setBrowser(e,t){e.browser=t,ae(e)},setLanguage(e,t){e.language=t,ae(e)},setReferrer(e,t){e.referrer=t,ae(e)},setUtm_source(e,t){e.utm_source=t,ae(e)},setUtm_medium(e,t){e.utm_medium=t,ae(e)},setUtm_campaign(e,t){e.utm_campaign=t,ae(e)},setCountry(e,t){e.country=t,ae(e)},setEvent(e,t){e.event=t,ae(e)},setStart(e,t){e.start=t},setEnd(e,t){e.end=t},setComparisonStart(e,t){e.comparisonStart=t},setComparisonEnd(e,t){e.comparisonEnd=t},setLiveVisitors(e,t){e.liveVisitors=t},setShowVisitors(e,t){e.showVisitors=t},setSummary(e,t){e.summary=t},setRangeString(e,t){e.rangeString=t},setRange(e,t){t||(t="1");let s={"-1":["Yesterday",1,1],"1":["Latest",0,0],"7":["Last 7 Days",7,0],"14":["1 week ago",14,7],"21":["2 weeks ago",21,14],"28":["3 weeks ago",28,21],"30":["Last 30 Days",30,0]}[t];if(t<-1&&t>-32){let o=t*-1;s=[`${new Date(me(o)).toDateString()}`,o,o]}if(t.length===7){let o=$e(t),a=new Date(t);a=a.setMonth(a.getMonth()+1);let h=$e(a);h<0&&(h=0),s=[`${t}`,o,h]}if(t>1e3&&t<3e3){let o=$e(t),a=new Date(t);a=a.setFullYear(a.getFullYear()+1);let h=$e(a);h<0&&(h=0),s=[`${t}`,o,h]}e.rangeString=s[0],e.start=me(s[1]),e.end=me(s[2]);const i=e.end-e.start;e.comparisonEnd=e.start,e.comparisonStart=e.start-i,parseInt(t)==t&&(t=parseInt(t)),e.range=t,ae(e)}}});const Je={class:"text-center mt-3"},Qe=te(" Copyright \xA9 2021-"),et={class:"year"},tt=te(),st=l("a",{href:"https://jamesfuthey.com/",target:"_blank"},"James Futhey",-1),it=te(". \xA0All Rights Reserved. "),at={setup(e){const t=new Date().getFullYear();return(u,s)=>(F(),z("p",Je,[Qe,l("span",et,q(D(t)),1),tt,st,it]))}},nt={class:"container"},ot=l("a",{class:"navbar-brand",href:"/"},"Website Analytics",-1),rt=l("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[l("span",{class:"navbar-toggler-icon"})],-1),lt={class:"collapse navbar-collapse",id:"navbarColor01"},ct={class:"navbar-nav me-auto"},ut={class:"nav-item"},dt={class:"d-none d-md-inline-block form-check form-switch float-right"},ht={setup(e){const t=he(),u=j(!1);return be(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(u.value=!0)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{u.value=s.matches}),w(u,()=>{t.commit("setDark",u.value),document.querySelector("#theme").href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/${u.value?"superhero":"zephyr"}/bootstrap.min.css`,u.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),(s,i)=>(F(),z("nav",{class:re(["navbar navbar-expand-lg navbar-dark",{"mt-1":u.value,"bg-primary":!u.value}])},[l("div",nt,[ot,rt,l("div",lt,[l("ul",ct,[l("li",ut,[l("a",{class:re(["nav-link cp",{"btn-dark":u.value,nudge:u.value}]),"data-bs-toggle":"modal","data-bs-target":"#embedScript"},"Add to your Website",2)])])]),l("div",dt,[De(l("input",{class:"form-check-input",type:"checkbox",id:"themer","onUpdate:modelValue":i[0]||(i[0]=o=>u.value=o)},null,512),[[qe,u.value]]),l("label",{class:re(["form-check-label",{"text-white":!u.value}]),for:"themer",style:{"user-select":"none"}},"Dark mode",2)])])],2))}},fe=()=>{const e=he();return Object.fromEntries(Object.keys(e.getters).map(t=>[t,ce(()=>e.getters[t])]))},mt={class:"modal",id:"embedScript",tabindex:"-1"},ft={class:"modal-dialog modal-lg"},pt=l("div",{class:"modal-header"},[l("h5",{class:"modal-title"},"Add to your Website"),l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),vt={class:"modal-body"},gt=l("h5",null,"Embed Code",-1),_t=l("p",null,"Embed this script on your website, and your analytics data will appear here.",-1),yt={rows:"4",spellcheck:"false",class:"form-control",id:"script","data-clipboard-target":"#script",style:{resize:"none","font-family":"monospace"}},bt=l("small",{class:"d-block mt-1"},[l("a",{class:"cp","data-clipboard-target":"#script"},"Copy to clipboard"),l("span",{class:"d-none"},"\xA0Copied!")],-1),kt=l("br",null,null,-1),wt=l("h5",null,"URL to View Analytics",-1),St=l("p",null,"You will need the following URL to access (and decrypt) your analytics:",-1),xt={rows:"3",spellcheck:"false",class:"form-control",id:"url","data-clipboard-target":"#url",style:{resize:"none","font-family":"monospace"}},$t=l("small",{class:"d-block mt-1"},[l("a",{class:"cp","data-clipboard-target":"#url"},"Copy to clipboard"),l("span",{class:"d-none"},"\xA0Copied!")],-1),Ct=l("p",null,[l("small",null,[l("strong",null,"Save your URL."),te(" If you lose this, you will need to reinstall analytics with a new encryption key.")])],-1),Bt=l("div",{class:"modal-footer"},[l("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),Tt={setup(e){const{key:t,publicKey:u,dark:s}=fe();let i={};location.search.slice(1).split("&").map(B=>B.split("=")).forEach(B=>i[B[0]]=B[1]);let o="https://analytics.servers.do",a=ce(()=>u.value?`&lt;script>window.__analytics_encryption_key = '${u.value}';&lt;/script>
`:"");const h=ce(()=>c(`&lt;!-- Servers.do Analytics -->
${a.value}&lt;script src='${o}/a.js'>&lt;/script>`)),g=ce(()=>`${o}?host=${i.host}&range=${i.range}&key=${encodeURIComponent(t.value)}&pkey=${u.value}`);function c(B){return window.$("<textarea />").html(B).text()}return(B,_)=>(F(),z("div",mt,[l("div",ft,[l("div",{class:re(["modal-content",{"bg-dark":D(s)}])},[pt,l("div",vt,[gt,_t,l("p",null,[l("textarea",yt,q(D(h)),1),bt]),kt,wt,St,l("p",null,[l("textarea",xt,q(D(g)),1),$t]),Ct]),Bt],2)])]))}};const Et={class:"row"},Dt={key:0,class:"col-12 mb-3"},Lt=["onClick"],Ot=te(" = \xA0"),It=te(" \xA0 "),At=l("a",null,"\u2715",-1),Ft={class:"col-6"},Mt={class:"nav nav-pills mb-1 d-inline-block"},zt={class:"nav-item dropdown ms-auto"},Rt={class:"nav-link dropdown-toggle cp","data-bs-toggle":"dropdown",role:"button"},Nt=["src"],Pt={class:"d-inline pt-2 mb-0 name"},Vt={class:"dropdown-menu websites left"},Wt=["onClick"],qt=l("span",{class:"text-success d-none d-md-inline-block dot"},"\xB7",-1),Kt={class:"current-visitors d-none d-md-inline-block"},Ut={class:"col-6"},Ht={class:"nav nav-pills mb-1"},Yt={class:"nav-item dropdown ms-auto"},Gt={class:"dropdown-menu right"},Xt=l("div",{class:"dropdown-divider"},null,-1),Zt=l("div",{class:"dropdown-divider"},null,-1),jt=l("div",{class:"dropdown-divider"},null,-1),Jt={setup(e){const t=j(new Date),u=j(!1),s=j("month"),i=j("month"),o=j("month"),a={to:new Date(new Date().setDate(new Date().getDate()-32)),from:new Date,preventDisableDateSelection:!0},{host:h,path:g,os:c,device:B,is_bot:_,is_new:k,browser:d,language:b,referrer:n,utm_source:m,utm_medium:y,utm_campaign:S,country:R,domains:V,event:Q,range:X,rangeString:L,liveVisitors:M}=fe(),x=he(),N=j({path:g,os:c,device:B,is_bot:_,is_new:k,browser:d,language:b,referrer:n,utm_source:m,utm_medium:y,utm_campaign:S,country:R,event:Q}),$="path, os, device, is_bot, is_new, browser, language, referrer, utm_source, utm_medium, utm_campaign, country, event".split(", "),O=j([]);ce(()=>location.search);function E(){O.value=[],$.forEach(I=>{N.value[I]!==""&&(O.value.includes(I)||O.value.push(I))})}w(c,E),w(g,E),w(B,E),w(_,E),w(k,E),w(d,E),w(b,E),w(n,E),w(m,E),w(y,E),w(S,E),w(R,E),w(Q,E),E();function r(I,A){x.commit("setRange",I),A||(u.value=!1)}const v=I=>I.charAt(0).toUpperCase()+I.slice(1);function f(){var I=prompt("Enter domain name");if(I){if(I=I.toLowerCase().trim().replace("www.",""),I&&window.history.pushState("","",`?host=${I}&range=${X.value}`),I&&!(V.value||[]).includes(I)){let A=V.value;Array.isArray(A)||(A=[]),A.includes(I)||A.push(I),localStorage.setItem("__analytics_hosts",JSON.stringify(A)),x.commit("setDomains",A)}I&&p(I)}}function p(I){window.history.pushState("","",`?host=${I}&range=${X.value}`),x.commit("setHost",I)}function W(I){I==="month"?(s.value="month",i.value="month",o.value="month",x.commit("setRangeString","Custom month:")):I==="year"?(s.value="year",i.value="year",o.value="year",x.commit("setRangeString","Custom year:")):I==="day"&&(s.value="day",i.value="day",o.value="day",x.commit("setRangeString","Custom day:")),document.querySelector(".dropdown-menu.right.show").classList.remove("show"),u.value=!0,setTimeout(()=>{document.querySelector(".vuejs3-datepicker__value").click()},123)}function Y(I){if(s.value==="year"){let K=new Date(I).getFullYear();r(K)}else if(s.value==="month"){let A=new Date(I),K=A.getMonth()+1;r(`${A.getFullYear()}-${K<10?"0":""}${K}`)}else if(s.value==="day"){t.value=new Date(I);let A=new Date-new Date(I),K=Math.floor(A/864e5)*-1;r(K)}}function ee(I){x.commit(I,"")}function H(I){return"set"+I[0].toUpperCase()+I.substring(1)}return(I,A)=>(F(),z("div",Et,[O.value.length?(F(),z("div",Dt,[(F(!0),z(Se,null,Le(O.value,K=>(F(),z("button",{type:"button",class:"btn btn-dark mr-5 mb-1",onClick:_e=>ee(H(K))},[l("strong",null,q(v(K)),1),Ot,l("code",null,q(N.value[K]),1),It,At],8,Lt))),256))])):J("",!0),l("div",Ft,[l("ul",Mt,[l("li",zt,[l("a",Rt,[D(h)?(F(),z("img",{key:0,class:"favicon",src:`https://logo.clearbit.com/${D(h)}`,onerror:"this.src='default.png';"},null,8,Nt)):J("",!0),l("h5",Pt,q(v(D(h))||"Select a Domain"),1)]),l("div",Vt,[(F(!0),z(Se,null,Le(D(V),K=>(F(),z("a",{class:"dropdown-item cp",onClick:_e=>p(K)},q(v(K)),9,Wt))),256)),l("a",{class:"dropdown-item cp",onClick:f},"Add Domain")])])]),qt,l("span",Kt,"\xA0"+q(D(M)?`${D(M)} current visitor${D(M)==1?"":"s"}`:"No current visitors"),1)]),l("div",Ut,[l("ul",Ht,[l("li",Yt,[l("a",{class:re(["nav-link right cp",{"dropdown-toggle":!u.value}]),"data-bs-toggle":"dropdown",role:"button"},q(D(L)),3),l("div",Gt,[l("a",{class:"dropdown-item cp",onClick:A[0]||(A[0]=K=>r(1))},"Latest"),l("a",{class:"dropdown-item cp",onClick:A[1]||(A[1]=K=>r(-1))},"Yesterday"),l("a",{class:"dropdown-item cp",onClick:A[2]||(A[2]=K=>{W("day")})},"Custom Day"),Xt,l("a",{class:"dropdown-item cp",onClick:A[3]||(A[3]=K=>r(7))},"Last 7 Days"),l("a",{class:"dropdown-item cp",onClick:A[4]||(A[4]=K=>r(14))},"1 week ago"),l("a",{class:"dropdown-item cp",onClick:A[5]||(A[5]=K=>r(21))},"2 weeks ago"),l("a",{class:"dropdown-item cp",onClick:A[6]||(A[6]=K=>r(28))},"3 weeks ago"),Zt,l("a",{class:"dropdown-item cp",onClick:A[7]||(A[7]=K=>r(30))},"Last 30 Days"),jt,l("a",{class:"dropdown-item cp",onClick:A[8]||(A[8]=K=>{W("month")})},"Custom Month"),l("a",{class:"dropdown-item cp",onClick:A[9]||(A[9]=K=>{W("year")})},"Custom Year")])]),u.value?(F(),Ae(D(Ke),{key:0,name:"datepick",value:t.value,"disabled-dates":i.value=="day"?a:null,"initial-view":s.value,"minimum-view":i.value,"maximum-view":o.value,onInput:Y},null,8,["value","disabled-dates","initial-view","minimum-view","maximum-view"])):J("",!0)])])]))}};var G=G||function(e,t){var u={},s=u.lib={},i=function(){},o=s.Base={extend:function(d){i.prototype=this;var b=new i;return d&&b.mixIn(d),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var b in d)d.hasOwnProperty(b)&&(this[b]=d[b]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}},a=s.WordArray=o.extend({init:function(d,b){d=this.words=d||[],this.sigBytes=b!=t?b:4*d.length},toString:function(d){return(d||g).stringify(this)},concat:function(d){var b=this.words,n=d.words,m=this.sigBytes;if(d=d.sigBytes,this.clamp(),m%4)for(var y=0;y<d;y++)b[m+y>>>2]|=(n[y>>>2]>>>24-8*(y%4)&255)<<24-8*((m+y)%4);else if(65535<n.length)for(y=0;y<d;y+=4)b[m+y>>>2]=n[y>>>2];else b.push.apply(b,n);return this.sigBytes+=d,this},clamp:function(){var d=this.words,b=this.sigBytes;d[b>>>2]&=4294967295<<32-8*(b%4),d.length=e.ceil(b/4)},clone:function(){var d=o.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var b=[],n=0;n<d;n+=4)b.push(4294967296*e.random()|0);return new a.init(b,d)}}),h=u.enc={},g=h.Hex={stringify:function(d){var b=d.words;d=d.sigBytes;for(var n=[],m=0;m<d;m++){var y=b[m>>>2]>>>24-8*(m%4)&255;n.push((y>>>4).toString(16)),n.push((y&15).toString(16))}return n.join("")},parse:function(d){for(var b=d.length,n=[],m=0;m<b;m+=2)n[m>>>3]|=parseInt(d.substr(m,2),16)<<24-4*(m%8);return new a.init(n,b/2)}},c=h.Latin1={stringify:function(d){var b=d.words;d=d.sigBytes;for(var n=[],m=0;m<d;m++)n.push(String.fromCharCode(b[m>>>2]>>>24-8*(m%4)&255));return n.join("")},parse:function(d){for(var b=d.length,n=[],m=0;m<b;m++)n[m>>>2]|=(d.charCodeAt(m)&255)<<24-8*(m%4);return new a.init(n,b)}},B=h.Utf8={stringify:function(d){try{return decodeURIComponent(escape(c.stringify(d)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(d){return c.parse(unescape(encodeURIComponent(d)))}},_=s.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=B.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var b=this._data,n=b.words,m=b.sigBytes,y=this.blockSize,S=m/(4*y),S=d?e.ceil(S):e.max((S|0)-this._minBufferSize,0);if(d=S*y,m=e.min(4*d,m),d){for(var R=0;R<d;R+=y)this._doProcessBlock(n,R);R=n.splice(0,d),b.sigBytes-=m}return new a.init(R,m)},clone:function(){var d=o.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});s.Hasher=_.extend({cfg:o.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){return d&&this._append(d),this._doFinalize()},blockSize:16,_createHelper:function(d){return function(b,n){return new d.init(n).finalize(b)}},_createHmacHelper:function(d){return function(b,n){return new k.HMAC.init(d,n).finalize(b)}}});var k=u.algo={};return u}(Math);(function(){var e=G,t=e.lib.WordArray;e.enc.Base64={stringify:function(u){var s=u.words,i=u.sigBytes,o=this._map;u.clamp(),u=[];for(var a=0;a<i;a+=3)for(var h=(s[a>>>2]>>>24-8*(a%4)&255)<<16|(s[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|s[a+2>>>2]>>>24-8*((a+2)%4)&255,g=0;4>g&&a+.75*g<i;g++)u.push(o.charAt(h>>>6*(3-g)&63));if(s=o.charAt(64))for(;u.length%4;)u.push(s);return u.join("")},parse:function(u){var s=u.length,i=this._map,o=i.charAt(64);o&&(o=u.indexOf(o),o!=-1&&(s=o));for(var o=[],a=0,h=0;h<s;h++)if(h%4){var g=i.indexOf(u.charAt(h-1))<<2*(h%4),c=i.indexOf(u.charAt(h))>>>6-2*(h%4);o[a>>>2]|=(g|c)<<24-8*(a%4),a++}return t.create(o,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(_,k,d,b,n,m,y){return _=_+(k&d|~k&b)+n+y,(_<<m|_>>>32-m)+k}function u(_,k,d,b,n,m,y){return _=_+(k&b|d&~b)+n+y,(_<<m|_>>>32-m)+k}function s(_,k,d,b,n,m,y){return _=_+(k^d^b)+n+y,(_<<m|_>>>32-m)+k}function i(_,k,d,b,n,m,y){return _=_+(d^(k|~b))+n+y,(_<<m|_>>>32-m)+k}for(var o=G,a=o.lib,h=a.WordArray,g=a.Hasher,a=o.algo,c=[],B=0;64>B;B++)c[B]=4294967296*e.abs(e.sin(B+1))|0;a=a.MD5=g.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,k){for(var d=0;16>d;d++){var b=k+d,n=_[b];_[b]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var d=this._hash.words,b=_[k+0],n=_[k+1],m=_[k+2],y=_[k+3],S=_[k+4],R=_[k+5],V=_[k+6],Q=_[k+7],X=_[k+8],L=_[k+9],M=_[k+10],x=_[k+11],N=_[k+12],$=_[k+13],O=_[k+14],E=_[k+15],r=d[0],v=d[1],f=d[2],p=d[3],r=t(r,v,f,p,b,7,c[0]),p=t(p,r,v,f,n,12,c[1]),f=t(f,p,r,v,m,17,c[2]),v=t(v,f,p,r,y,22,c[3]),r=t(r,v,f,p,S,7,c[4]),p=t(p,r,v,f,R,12,c[5]),f=t(f,p,r,v,V,17,c[6]),v=t(v,f,p,r,Q,22,c[7]),r=t(r,v,f,p,X,7,c[8]),p=t(p,r,v,f,L,12,c[9]),f=t(f,p,r,v,M,17,c[10]),v=t(v,f,p,r,x,22,c[11]),r=t(r,v,f,p,N,7,c[12]),p=t(p,r,v,f,$,12,c[13]),f=t(f,p,r,v,O,17,c[14]),v=t(v,f,p,r,E,22,c[15]),r=u(r,v,f,p,n,5,c[16]),p=u(p,r,v,f,V,9,c[17]),f=u(f,p,r,v,x,14,c[18]),v=u(v,f,p,r,b,20,c[19]),r=u(r,v,f,p,R,5,c[20]),p=u(p,r,v,f,M,9,c[21]),f=u(f,p,r,v,E,14,c[22]),v=u(v,f,p,r,S,20,c[23]),r=u(r,v,f,p,L,5,c[24]),p=u(p,r,v,f,O,9,c[25]),f=u(f,p,r,v,y,14,c[26]),v=u(v,f,p,r,X,20,c[27]),r=u(r,v,f,p,$,5,c[28]),p=u(p,r,v,f,m,9,c[29]),f=u(f,p,r,v,Q,14,c[30]),v=u(v,f,p,r,N,20,c[31]),r=s(r,v,f,p,R,4,c[32]),p=s(p,r,v,f,X,11,c[33]),f=s(f,p,r,v,x,16,c[34]),v=s(v,f,p,r,O,23,c[35]),r=s(r,v,f,p,n,4,c[36]),p=s(p,r,v,f,S,11,c[37]),f=s(f,p,r,v,Q,16,c[38]),v=s(v,f,p,r,M,23,c[39]),r=s(r,v,f,p,$,4,c[40]),p=s(p,r,v,f,b,11,c[41]),f=s(f,p,r,v,y,16,c[42]),v=s(v,f,p,r,V,23,c[43]),r=s(r,v,f,p,L,4,c[44]),p=s(p,r,v,f,N,11,c[45]),f=s(f,p,r,v,E,16,c[46]),v=s(v,f,p,r,m,23,c[47]),r=i(r,v,f,p,b,6,c[48]),p=i(p,r,v,f,Q,10,c[49]),f=i(f,p,r,v,O,15,c[50]),v=i(v,f,p,r,R,21,c[51]),r=i(r,v,f,p,N,6,c[52]),p=i(p,r,v,f,y,10,c[53]),f=i(f,p,r,v,M,15,c[54]),v=i(v,f,p,r,n,21,c[55]),r=i(r,v,f,p,X,6,c[56]),p=i(p,r,v,f,E,10,c[57]),f=i(f,p,r,v,V,15,c[58]),v=i(v,f,p,r,$,21,c[59]),r=i(r,v,f,p,S,6,c[60]),p=i(p,r,v,f,x,10,c[61]),f=i(f,p,r,v,m,15,c[62]),v=i(v,f,p,r,L,21,c[63]);d[0]=d[0]+r|0,d[1]=d[1]+v|0,d[2]=d[2]+f|0,d[3]=d[3]+p|0},_doFinalize:function(){var _=this._data,k=_.words,d=8*this._nDataBytes,b=8*_.sigBytes;k[b>>>5]|=128<<24-b%32;var n=e.floor(d/4294967296);for(k[(b+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,k[(b+64>>>9<<4)+14]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,_.sigBytes=4*(k.length+1),this._process(),_=this._hash,k=_.words,d=0;4>d;d++)b=k[d],k[d]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;return _},clone:function(){var _=g.clone.call(this);return _._hash=this._hash.clone(),_}}),o.MD5=g._createHelper(a),o.HmacMD5=g._createHmacHelper(a)})(Math);(function(){var e=G,t=e.lib,u=t.Base,s=t.WordArray,t=e.algo,i=t.EvpKDF=u.extend({cfg:u.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(o){this.cfg=this.cfg.extend(o)},compute:function(o,a){for(var h=this.cfg,g=h.hasher.create(),c=s.create(),B=c.words,_=h.keySize,h=h.iterations;B.length<_;){k&&g.update(k);var k=g.update(o).finalize(a);g.reset();for(var d=1;d<h;d++)k=g.finalize(k),g.reset();c.concat(k)}return c.sigBytes=4*_,c}});e.EvpKDF=function(o,a,h){return i.create(h).compute(o,a)}})();G.lib.Cipher||function(e){var t=G,u=t.lib,s=u.Base,i=u.WordArray,o=u.BufferedBlockAlgorithm,a=t.enc.Base64,h=t.algo.EvpKDF,g=u.Cipher=o.extend({cfg:s.extend(),createEncryptor:function(n,m){return this.create(this._ENC_XFORM_MODE,n,m)},createDecryptor:function(n,m){return this.create(this._DEC_XFORM_MODE,n,m)},init:function(n,m,y){this.cfg=this.cfg.extend(y),this._xformMode=n,this._key=m,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(m,y,S){return(typeof y=="string"?b:d).encrypt(n,m,y,S)},decrypt:function(m,y,S){return(typeof y=="string"?b:d).decrypt(n,m,y,S)}}}});u.StreamCipher=g.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=t.mode={},B=function(n,m,y){var S=this._iv;S?this._iv=e:S=this._prevBlock;for(var R=0;R<y;R++)n[m+R]^=S[R]},_=(u.BlockCipherMode=s.extend({createEncryptor:function(n,m){return this.Encryptor.create(n,m)},createDecryptor:function(n,m){return this.Decryptor.create(n,m)},init:function(n,m){this._cipher=n,this._iv=m}})).extend();_.Encryptor=_.extend({processBlock:function(n,m){var y=this._cipher,S=y.blockSize;B.call(this,n,m,S),y.encryptBlock(n,m),this._prevBlock=n.slice(m,m+S)}}),_.Decryptor=_.extend({processBlock:function(n,m){var y=this._cipher,S=y.blockSize,R=n.slice(m,m+S);y.decryptBlock(n,m),B.call(this,n,m,S),this._prevBlock=R}}),c=c.CBC=_,_=(t.pad={}).Pkcs7={pad:function(n,m){for(var y=4*m,y=y-n.sigBytes%y,S=y<<24|y<<16|y<<8|y,R=[],V=0;V<y;V+=4)R.push(S);y=i.create(R,y),n.concat(y)},unpad:function(n){n.sigBytes-=n.words[n.sigBytes-1>>>2]&255}},u.BlockCipher=g.extend({cfg:g.cfg.extend({mode:c,padding:_}),reset:function(){g.reset.call(this);var n=this.cfg,m=n.iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var y=n.createEncryptor;else y=n.createDecryptor,this._minBufferSize=1;this._mode=y.call(n,this,m&&m.words)},_doProcessBlock:function(n,m){this._mode.processBlock(n,m)},_doFinalize:function(){var n=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){n.pad(this._data,this.blockSize);var m=this._process(!0)}else m=this._process(!0),n.unpad(m);return m},blockSize:4});var k=u.CipherParams=s.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),c=(t.format={}).OpenSSL={stringify:function(n){var m=n.ciphertext;return n=n.salt,(n?i.create([1398893684,1701076831]).concat(n).concat(m):m).toString(a)},parse:function(n){n=a.parse(n);var m=n.words;if(m[0]==1398893684&&m[1]==1701076831){var y=i.create(m.slice(2,4));m.splice(0,4),n.sigBytes-=16}return k.create({ciphertext:n,salt:y})}},d=u.SerializableCipher=s.extend({cfg:s.extend({format:c}),encrypt:function(n,m,y,S){S=this.cfg.extend(S);var R=n.createEncryptor(y,S);return m=R.finalize(m),R=R.cfg,k.create({ciphertext:m,key:y,iv:R.iv,algorithm:n,mode:R.mode,padding:R.padding,blockSize:n.blockSize,formatter:S.format})},decrypt:function(n,m,y,S){return S=this.cfg.extend(S),m=this._parse(m,S.format),n.createDecryptor(y,S).finalize(m.ciphertext)},_parse:function(n,m){return typeof n=="string"?m.parse(n,this):n}}),t=(t.kdf={}).OpenSSL={execute:function(n,m,y,S){return S||(S=i.random(8)),n=h.create({keySize:m+y}).compute(n,S),y=i.create(n.words.slice(m),4*y),n.sigBytes=4*m,k.create({key:n,iv:y,salt:S})}},b=u.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:t}),encrypt:function(n,m,y,S){return S=this.cfg.extend(S),y=S.kdf.execute(y,n.keySize,n.ivSize),S.iv=y.iv,n=d.encrypt.call(this,n,m,y.key,S),n.mixIn(y),n},decrypt:function(n,m,y,S){return S=this.cfg.extend(S),m=this._parse(m,S.format),y=S.kdf.execute(y,n.keySize,n.ivSize,m.salt),S.iv=y.iv,d.decrypt.call(this,n,m,y.key,S)}})}();(function(){for(var e=G,t=e.lib.BlockCipher,X=e.algo,u=[],s=[],i=[],o=[],a=[],h=[],g=[],c=[],B=[],_=[],k=[],d=0;256>d;d++)k[d]=128>d?d<<1:d<<1^283;for(var b=0,n=0,d=0;256>d;d++){var m=n^n<<1^n<<2^n<<3^n<<4,m=m>>>8^m&255^99;u[b]=m,s[m]=b;var y=k[b],S=k[y],R=k[S],V=257*k[m]^16843008*m;i[b]=V<<24|V>>>8,o[b]=V<<16|V>>>16,a[b]=V<<8|V>>>24,h[b]=V,V=16843009*R^65537*S^257*y^16843008*b,g[m]=V<<24|V>>>8,c[m]=V<<16|V>>>16,B[m]=V<<8|V>>>24,_[m]=V,b?(b=y^k[k[k[R^y]]],n^=k[k[n]]):b=n=1}var Q=[0,1,2,4,8,16,32,64,128,27,54],X=X.AES=t.extend({_doReset:function(){for(var L=this._key,M=L.words,x=L.sigBytes/4,L=4*((this._nRounds=x+6)+1),N=this._keySchedule=[],$=0;$<L;$++)if($<x)N[$]=M[$];else{var O=N[$-1];$%x?6<x&&$%x==4&&(O=u[O>>>24]<<24|u[O>>>16&255]<<16|u[O>>>8&255]<<8|u[O&255]):(O=O<<8|O>>>24,O=u[O>>>24]<<24|u[O>>>16&255]<<16|u[O>>>8&255]<<8|u[O&255],O^=Q[$/x|0]<<24),N[$]=N[$-x]^O}for(M=this._invKeySchedule=[],x=0;x<L;x++)$=L-x,O=x%4?N[$]:N[$-4],M[x]=4>x||4>=$?O:g[u[O>>>24]]^c[u[O>>>16&255]]^B[u[O>>>8&255]]^_[u[O&255]]},encryptBlock:function(L,M){this._doCryptBlock(L,M,this._keySchedule,i,o,a,h,u)},decryptBlock:function(L,M){var x=L[M+1];L[M+1]=L[M+3],L[M+3]=x,this._doCryptBlock(L,M,this._invKeySchedule,g,c,B,_,s),x=L[M+1],L[M+1]=L[M+3],L[M+3]=x},_doCryptBlock:function(L,M,x,N,$,O,E,r){for(var v=this._nRounds,f=L[M]^x[0],p=L[M+1]^x[1],W=L[M+2]^x[2],Y=L[M+3]^x[3],ee=4,H=1;H<v;H++)var I=N[f>>>24]^$[p>>>16&255]^O[W>>>8&255]^E[Y&255]^x[ee++],A=N[p>>>24]^$[W>>>16&255]^O[Y>>>8&255]^E[f&255]^x[ee++],K=N[W>>>24]^$[Y>>>16&255]^O[f>>>8&255]^E[p&255]^x[ee++],Y=N[Y>>>24]^$[f>>>16&255]^O[p>>>8&255]^E[W&255]^x[ee++],f=I,p=A,W=K;I=(r[f>>>24]<<24|r[p>>>16&255]<<16|r[W>>>8&255]<<8|r[Y&255])^x[ee++],A=(r[p>>>24]<<24|r[W>>>16&255]<<16|r[Y>>>8&255]<<8|r[f&255])^x[ee++],K=(r[W>>>24]<<24|r[Y>>>16&255]<<16|r[f>>>8&255]<<8|r[p&255])^x[ee++],Y=(r[Y>>>24]<<24|r[f>>>16&255]<<16|r[p>>>8&255]<<8|r[W&255])^x[ee++],L[M]=I,L[M+1]=A,L[M+2]=K,L[M+3]=Y},keySize:8});e.AES=t._createHelper(X)})();G.mode.CTR=function(){var e=G.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(u,s){var i=this._cipher,o=i.blockSize,a=this._iv,h=this._counter;a&&(h=this._counter=a.slice(0),this._iv=void 0);var g=h.slice(0);i.encryptBlock(g,0),h[o-1]=h[o-1]+1|0;for(var c=0;c<o;c++)u[s+c]^=g[c]}});return e.Decryptor=t,e}();(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},t.bitshift=function(u,s){var i=0,o=u.words,a,h=0,g;if(s>0){for(;s>31;)o.splice(0,1),o.push(0),s-=32,h++;if(s==0)return i;for(var c=o.length-h-1;c>=0;c--)a=o[c],o[c]<<=s,o[c]|=i,i=a>>>32-s}else if(s<0){for(;s<-31;)o.splice(0,0,0),o.length--,s+=32,h++;if(s==0)return i;s=-s,g=(1<<s)-1;for(var c=h;c<o.length;c++)a=o[c]&g,o[c]>>>=s,o[c]|=i,i=a<<32-s}return i},t.neg=function(u){for(var s=u.words,i=0;i<s.length;i++)s[i]=~s[i];return u},t.xor=function(u,s){for(var i=0;i<u.words.length;i++)u.words[i]^=s.words[i];return u},t.bitand=function(u,s){for(var i=u.clone(),o=i.words,a=s.words,h=0;h<o.length;h++)o[h]&=a[h];return i}})(G);(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},e.lib.Base;var u=e.lib.WordArray;e.algo.AES,t.const_Zero=u.create([0,0,0,0]),t.const_One=u.create([0,0,0,1]),t.const_Rb=u.create([0,0,0,135]),t.const_Rb_Shifted=u.create([2147483648,0,0,67]),t.const_nonMSB=u.create([4294967295,4294967295,2147483647,2147483647]),t.isWordArray=function(s){return s&&typeof s.clamp=="function"&&typeof s.concat=="function"&&typeof s.words=="array"},e.pad.OneZeroPadding={pad:function(s,i){for(var o=i*4,a=o-s.sigBytes%o,h=[],g=0;g<a;g+=4){var c=0;g===0&&(c=2147483648),h.push(c)}var B=u.create(h,a);s.concat(B)},unpad:function(){}},e.pad.NoPadding={pad:function(){},unpad:function(){}},t.leftmostBytes=function(s,i){var o=s.clone();return o.sigBytes=i,o.clamp(),o},t.rightmostBytes=function(s,i){s.clamp();var o=32,a=s.clone(),h=(a.sigBytes-i)*8;if(h>=o){var g=Math.floor(h/o);h-=g*o,a.words.splice(0,g),a.sigBytes-=g*o/8}return h>0&&(t.bitshift(a,h),a.sigBytes-=h/8),a},t.popWords=function(s,i){var o=t.leftmostBytes(s,i*4);return s.words=s.words.slice(i),s.sigBytes-=i*4,o},t.shiftBytes=function(s,i){i=i||16;var o=i%4;i-=o;for(var a=u.create(),h=0;h<i;h+=4)a.words.push(s.words.shift()),s.sigBytes-=4,a.sigBytes+=4;return o>0&&(a.words.push(s.words[0]),a.sigBytes+=o,t.bitshift(s,o*8),s.sigBytes-=o),a},t.xorendBytes=function(s,i){return t.leftmostBytes(s,s.sigBytes-i.sigBytes).concat(t.xor(t.rightmostBytes(s,i.sigBytes),i))},t.dbl=function(s){var i=t.msb(s);return t.bitshift(s,1),t.xor(s,i===1?t.const_Rb:t.const_Zero),s},t.inv=function(s){var i=s.words[4]&1;return t.bitshift(s,-1),t.xor(s,i===1?t.const_Rb_Shifted:t.const_Zero),s},t.equals=function(s,i){if(!i||!i.words||s.sigBytes!==i.sigBytes)return!1;s.clamp(),i.clamp();for(var o=0,a=0;a<s.words.length;a++)o|=s.words[a]^i.words[a];return o===0},t.msb=function(s){return s.words[0]>>>31}})(G);(function(e){var t=e.lib.Base,u=e.lib.WordArray,s=e.algo.AES,i=e.ext,o=e.pad.OneZeroPadding;function a(g,c){var B=s.createEncryptor(g,{iv:u.create(),padding:e.pad.NoPadding}),_=B.finalize(c);return _}var h=e.algo.CMAC=t.extend({init:function(g){var c=a(g,i.const_Zero),B=c.clone();if(i.dbl(B),this._isTwo){var _=c.clone();i.inv(_)}else{var _=B.clone();i.dbl(_)}this._K1=B,this._K2=_,this._K=g,this._const_Bsize=16,this.reset()},reset:function(){this._x=i.const_Zero.clone(),this._counter=0,this._buffer=u.create()},update:function(g){if(!g)return this;var c=this._buffer,B=this._const_Bsize;for(typeof g=="string"&&(g=e.enc.Utf8.parse(g)),c.concat(g);c.sigBytes>B;){var _=i.shiftBytes(c,B);i.xor(this._x,_),this._x.clamp(),this._x=a(this._K,this._x),this._counter++}return this},finalize:function(g){this.update(g);var c=this._buffer,B=this._const_Bsize,_=c.clone();return c.sigBytes===B?i.xor(_,this._K1):(o.pad(_,B/4),i.xor(_,this._K2)),i.xor(_,this._x),this.reset(),a(this._K,_)},_isTwo:!1});e.CMAC=function(g,c){return h.create(g).finalize(c)},e.algo.OMAC1=h,e.algo.OMAC2=h.extend({_isTwo:!0})})(G);(function(e){var t=e.lib.Base,u=e.lib.WordArray;e.algo.AES;var s=e.ext,i=e.pad.OneZeroPadding,o=e.algo.CMAC,a=e.algo.S2V=t.extend({init:function(h){this._blockSize=16,this._cmacAD=o.create(h),this._cmacPT=o.create(h),this.reset()},reset:function(){this._buffer=u.create(),this._cmacAD.reset(),this._cmacPT.reset(),this._d=this._cmacAD.finalize(s.const_Zero),this._empty=!0,this._ptStarted=!1},updateAAD:function(h){return this._ptStarted?this:h?(typeof h=="string"&&(h=e.enc.Utf8.parse(h)),this._d=s.xor(s.dbl(this._d),this._cmacAD.finalize(h)),this._empty=!1,this):this},update:function(h){if(!h)return this;this._ptStarted=!0;var g=this._buffer,c=this._blockSize,B=c/4,_=this._cmacPT;for(typeof h=="string"&&(h=e.enc.Utf8.parse(h)),g.concat(h);g.sigBytes>=2*c;){this._empty=!1;var k=s.popWords(g,B);_.update(k)}return this},finalize:function(h){this.update(h);var g=this._blockSize,c=this._buffer;if(this._empty&&c.sigBytes===0)return this._cmacAD.finalize(s.const_One);var B;return c.sigBytes>=g?B=s.xorendBytes(c,this._d):(i.pad(c,g),B=s.xor(s.dbl(this._d),c)),this._cmacPT.finalize(B)}});e.SIV=t.extend({init:function(h){var g=h.sigBytes/2;this._s2vKey=s.shiftBytes(h,g),this._ctrKey=h},encrypt:function(h,g){!g&&h&&(g=h,h=[]);var c=a.create(this._s2vKey);Array.prototype.forEach.call(h,function(d){c.updateAAD(d)});var B=c.finalize(g),_=s.bitand(B,s.const_nonMSB),k=e.AES.encrypt(g,this._ctrKey,{iv:_,mode:e.mode.CTR,padding:e.pad.NoPadding});return B.concat(k.ciphertext)},decrypt:function(h,g){!g&&h&&(g=h,h=[]);var c=s.shiftBytes(g,16),B=s.bitand(c,s.const_nonMSB),_=e.AES.decrypt({ciphertext:g},this._ctrKey,{iv:B,mode:e.mode.CTR,padding:e.pad.NoPadding}),k=a.create(this._s2vKey);Array.prototype.forEach.call(h,function(b){k.updateAAD(b)});var d=k.finalize(_);return s.equals(c,d)?_:!1}})})(G);const Qt=new URL("/assets/sqlite.worker.710c9469.js",self.location),es=new URL("/assets/sql-wasm.dd613b12.wasm",self.location),ts=()=>Math.random().toString(36).substr(2,9);let ze=0;async function ss(){if(window._worker)return window._worker;if(ze)return new Promise((t,u)=>{function s(){setTimeout(()=>{if(window._worker){t(window._worker);return}s()},50)}s()});ze=1;async function e(){return await Ue.exports.createDbWorker([{from:"inline",config:{serverMode:"full",url:`${location.protocol}//${location.host}/analytics.sqlite3.png`,requestChunkSize:1024*32}}],Qt.toString(),es.toString())}return window._worker=await e(),window._worker}async function ne(e){let t=await ss(),u=ts();console.time("query time "+u);let s=await t.db.query(e);return console.log("query",e,s),console.timeEnd("query time "+u),s}function ke(e){return e||(e=new Date),(typeof e!="object"||!e.toISOString)&&(e=new Date(e)),e.toISOString().slice(0,10)}function pe(e,t,u,s){let i=[],o;if(e.state.key&&(o=G.SIV.create(G.enc.Hex.parse(e.state.key))),e.state.host){let a=`host = '${e.state.host}'`;if(o){let h=o.encrypt(e.state.host).toString();a=`(${a} OR host = '${h}')`}i.push(a)}if(e.state.path){let a=`pathname = '${e.state.path}'`;if(o){let h=o.encrypt(e.state.path).toString();a=`(${a} OR pathname = '${h}')`}i.push(a)}if(e.state.referrer!==""){let a=e.state.referrer||"",h=`referer_host = '${a}'`;if(o&&a){let g=o.encrypt(a).toString();h=`(${h} OR referer_host = '${g}')`}i.push(h)}if(e.state.utm_source!==""){let a=e.state.utm_source||null,h=a?`utm_source = '${a}'`:"utm_source is null";if(o&&a){let g=o.encrypt(a).toString();h=`(${h} OR utm_source = '${g}')`}i.push(h)}if(e.state.utm_medium!==""){let a=e.state.utm_medium||null,h=a?`utm_medium = '${a}'`:"utm_medium is null";if(o&&a){let g=o.encrypt(a).toString();h=`(${h} OR utm_medium = '${g}')`}i.push(h)}if(e.state.utm_campaign!==""){let a=e.state.utm_campaign||null,h=a?`utm_campaign = '${a}'`:"utm_campaign is null";if(o&&a){let g=o.encrypt(a).toString();h=`(${h} OR utm_campaign = '${g}')`}i.push(h)}return e.state.os&&i.push(`os = '${e.state.os}'`),e.state.device&&i.push(`device_type = '${e.state.device}'`),e.state.is_bot!==""&&i.push(`bot = '${e.state.is_bot}'`),e.state.is_new!==""&&i.push(`is_new = '${e.state.is_new}'`),e.state.browser&&i.push(`browser = '${e.state.browser}'`),e.state.language&&i.push(`lang = '${e.state.language}'`),e.state.country&&i.push(`country_code = '${e.state.country}'`),s||i.push(`event = '${e.state.event||"pageview"}'`),u?i.push(`date BETWEEN '${ke(e.state.comparisonStart)}' AND '${ke(e.state.comparisonEnd)}'`):t||i.push(`date BETWEEN '${ke(e.state.start)}' AND '${ke(e.state.end)}'`),(i.length?" WHERE ":"")+(i.join(" AND ")||"")}async function is(e){if(!e.state.host)return[];const t=e.state.key?G.SIV.create(G.enc.Hex.parse(e.state.key)):null;let u=`SELECT pathname, AVG(load_time) as AvgLoadTime from visits${pe(e)} GROUP BY pathname ORDER BY AvgLoadTime DESC LIMIT 10;`,s=await ne(u);return t&&s.forEach(i=>{try{let o=t.decrypt(G.enc.Hex.parse(i.pathname)).toString(G.enc.Utf8);o&&o!="false"&&(i.pathname=o)}catch{}}),s}async function Re(e,t="hour",u=10){if(!e.state.host)return[];const s=e.state.key?G.SIV.create(G.enc.Hex.parse(e.state.key)):null,i=e.state.showVisitors?"count(DISTINCT ip)":"count(*)";let o=t==="hour"||t==="date",a=o?t:i,h=o?"ASC":"DESC",g=o?"":` LIMIT ${u}`,c=`SELECT ${t}, ${i} FROM visits${pe(e,0,0,t==="event"&&!e.state.event)} GROUP BY ${t} ORDER BY ${a} ${h}${g};`,B=await ne(c);return s&&B.forEach(_=>{try{let k=s.decrypt(G.enc.Hex.parse(_[t])).toString(G.enc.Utf8);k&&k!="false"&&(_[t]=k)}catch{}}),B}async function Ne(e,t="pathname",u="EntrypageCount",s=10){if(!e.state.host)return[];const i=e.state.key?G.SIV.create(G.enc.Hex.parse(e.state.key)):null;let o=`SELECT ${t},
    COUNT(CASE WHEN ts = First THEN 1 END) AS EntrypageCount,
    COUNT(CASE WHEN ts = Last THEN 1 END) AS ExitPagecount
FROM (SELECT *,
    MIN(ts) OVER (PARTITION BY ip, 'date') AS First,
    MAX(ts) OVER (PARTITION BY ip, 'date') AS Last
    FROM visits) T
${pe(e)}
GROUP BY ${t}
ORDER BY ${u} DESC LIMIT ${s}`,a=await ne(o);return a=a.filter(h=>h[u]>0),i&&a.forEach(h=>{try{let g=i.decrypt(G.enc.Hex.parse(h[t])).toString(G.enc.Utf8);g&&g!="false"&&(h[t]=g)}catch{}}),a}const oe={toObject:function(e){return typeof e=="string"?JSON.parse(e):e},toBoolean:function(e){return typeof e=="string"?e==="true":e},toInt:function(e){return typeof e=="string"?parseInt(e):e}},C={id:{type:String,required:!0},data:{type:[String,Array],required:!0},barColors:{type:[String,Array,Function],required:!1},xkey:{type:String,required:!1,default:"key"},ykeys:{type:[String,Array],required:!1,default:function(){return["value"]}},labels:{type:[String,Array],required:!1,default:function(){return["Value"]}},hoverCallback:{type:Function,required:!1},axes:{type:[Boolean,String],required:!1,default:!0},hideHover:{type:String,required:!1},stacked:{type:[Boolean,String],required:!1},resize:{type:[Boolean,String],required:!1},horizontal:{type:[Boolean,String],required:!1,default:!1},grid:{type:[Boolean,String],required:!1,default:!0},gridTextColor:{type:String,required:!1,default:"#888"},gridTextSize:{type:[Number,String],required:!1,default:12},gridTextFamily:{type:String,required:!1,default:"sans-serif"},gridTextWeight:{type:String,required:!1,default:"normal"},colors:{type:[String,Array],required:!1},formatter:{type:Function,required:!1},lineColors:{type:[String,Array,Function],required:!1},xLabels:{type:String,required:!1},lineWidth:{type:[Number,String],required:!1},pointSize:{type:[Number,String],required:!1},pointFillColors:{type:[String,Array],required:!1},pointStrokeColors:{type:[String,Array],required:!1},ymax:{type:String,required:!1},ymin:{type:String,required:!1},smooth:{type:[Boolean,String],required:!1,default:!0},parseTime:{type:[Boolean,String],required:!1,default:!0},postUnits:{type:String,required:!1},preUnits:{type:String,required:!1},dateFormat:{type:Function,required:!1},xLabelFormat:{type:Function,required:!1},yLabelFormat:{type:Function,required:!1},xLabelAngle:{type:String,required:!1},goals:{type:[String,Array],required:!1},goalStrokeWidth:{type:[Number,String],required:!1},goalLineColors:{type:[String,Array],required:!1},events:{type:[String,Array],required:!1},eventStrokeWidth:{type:String,required:!1},eventLineColors:{type:[String,Array],required:!1},fillOpacity:{type:String,required:!1},behaveLikeLine:{type:[Boolean,String],required:!1,default:!1}},as={id:C.id,data:C.data,barColors:C.barColors,xkey:C.xkey,ykeys:C.ykeys,labels:C.labels,xLabelFormat:C.xLabelFormat,yLabelFormat:C.yLabelFormat,xLabelAngle:C.xLabelAngle,hoverCallback:C.hoverCallback,grid:C.grid,horizontal:C.horizontal,axes:C.axes,hideHover:C.hideHover,stacked:C.stacked,resize:C.resize,ymax:C.ymax,ymin:C.ymin,gridTextColor:C.gridTextColor,gridTextSize:C.gridTextSize,gridTextFamily:C.gridTextFamily,gridTextWeight:C.gridTextWeight},ns={id:C.id,data:C.data,colors:C.colors,formatter:C.formatter,resize:C.resize},Ce={id:C.id,data:C.data,resize:C.resize,lineColors:C.lineColors,xkey:C.xkey,ykeys:C.ykeys,labels:C.labels,xLabels:C.xLabels,grid:C.grid,gridTextColor:C.gridTextColor,gridTextSize:C.gridTextSize,gridTextFamily:C.gridTextFamily,gridTextWeight:C.gridTextWeight,lineWidth:C.lineWidth,pointSize:C.pointSize,pointFillColors:C.pointFillColors,pointStrokeColors:C.pointStrokeColors,ymax:C.ymax,ymin:C.ymin,smooth:C.smooth,hideHover:C.hideHover,parseTime:C.parseTime,postUnits:C.postUnits,preUnits:C.preUnits,dateFormat:C.dateFormat,xLabelFormat:C.xLabelFormat,yLabelFormat:C.yLabelFormat,xLabelAngle:C.xLabelAngle,goals:C.goals,goalStrokeWidth:C.goalStrokeWidth,goalLineColors:C.goalLineColors,events:C.events,eventStrokeWidth:C.eventStrokeWidth,eventLineColors:C.eventLineColors,fillOpacity:C.fillOpacity,hoverCallback:C.hoverCallback},Pe={behaveLikeLine:C.behaveLikeLine};for(var Ie in Ce)Ce.hasOwnProperty(Ie)&&(Pe[Ie]=Ce[Ie]);const Be={addOption(e,t){this[e]&&(t[e]=this[e])},addOptionAsObject(e,t){this[e]&&(t[e]=oe.toObject(this[e]))}};var os={bar:{props:as,methods:Be},donut:{props:ns,methods:Be},line:{props:Ce,methods:Be},area:{props:Pe,methods:Be}},ge=(e,t)=>{const u=e.__vccOpts||e;for(const[s,i]of t)u[s]=i;return u};const rs={name:"area-chart",mixins:[os.area],data(){return{chart:null}},watch:{data(e){this.$nextTick(()=>{this.chart.options.labels=oe.toObject(this.labels),this.chart.options.xkey=this.xkey,this.chart.options.ykeys=oe.toObject(this.ykeys),this.lineColors&&(this.chart.options.lineColors=oe.toObject(this.lineColors)),this.chart.setData(oe.toObject(this.data))})}},mounted(){let e={element:this.id,data:oe.toObject(this.data),resize:oe.toBoolean(this.resize),labels:oe.toObject(this.labels),xkey:this.xkey,ykeys:oe.toObject(this.ykeys),grid:oe.toBoolean(this.grid),gridTextColor:this.gridTextColor,gridTextSize:oe.toInt(this.gridTextSize),gridTextFamily:this.gridTextFamily,gridTextWeight:this.gridTextWeight,lineWidth:this.lineWidth,pointSize:this.pointSize,ymax:this.ymax,ymin:this.ymin,smooth:oe.toBoolean(this.smooth),hideHover:this.hideHover,parseTime:oe.toBoolean(this.parseTime),postUnits:this.postUnits,preUnits:this.preUnits,xLabelAngle:this.xLabelAngle,goalStrokeWidth:this.goalStrokeWidth,eventStrokeWidth:this.eventStrokeWidth,fillOpacity:this.fillOpacity,behaveLikeLine:this.behaveLikeLine};this.addOptionAsObject("lineColors",e),this.addOption("xLabels",e),this.addOptionAsObject("pointFillColors",e),this.addOptionAsObject("pointStrokeColors",e),this.addOption("dateFormat",e),this.addOption("xLabelFormat",e),this.addOption("yLabelFormat",e),this.addOptionAsObject("goals",e),this.addOptionAsObject("goalLineColors",e),this.addOptionAsObject("events",e),this.addOptionAsObject("eventLineColors",e),this.addOption("hoverCallback",e),this.chart=Morris.Area(e)}},ls=["id"];function cs(e,t,u,s,i,o){return F(),z("div",{id:e.id},null,8,ls)}var us=ge(rs,[["render",cs]]);const ds={id:"visits"},hs={key:0,class:"spinner-border spinme",role:"status"},ms={key:1},fs={class:"edge"},ps={setup(e){const t=he();let{start:u,end:s,host:i,path:o,os:a,device:h,is_bot:g,is_new:c,browser:B,language:_,referrer:k,utm_source:d,utm_medium:b,utm_campaign:n,country:m,event:y,range:S,summary:R,showVisitors:V}=fe();const Q=j([]),X=j(!0),L=j(!1),M=j(null),x=ce(()=>S.value<2),N=ce(()=>x.value?"hour":"date"),$=W=>x.value?new Date(W).toLocaleString():`${new Date(W).toLocaleString(navigator.language||"en-us",{weekday:"long"})},
${new Date(W).toLocaleDateString()}`,O=j("day");async function E(){if(!i.value)return X.value=!1;S.value>1e3?O.value="month":O.value=x.value?"hour":"day";const W=pe(t);let Y=W.split(" ").pop().replace("'","").replace("'",""),ee=V.value?"count(DISTINCT ip)":"count(*)",H=x.value?"hour":"date";const I=`SELECT ${H}, ${ee} FROM visits${W} GROUP BY ${H} ORDER BY ${H} ASC;`;let A=await ne(I);A.forEach(T=>{x.value&&(T.hour=+new Date(`${Y}T${T.hour<10?"0":""}${T.hour}:00:00Z`)),T.value=T["count(DISTINCT ip)"]||T["count(*)"],delete T["count(DISTINCT ip)"],delete T["count(*)"]}),A.filter(T=>T.date==new Date().toISOString().split("T")[0]).length||S.value==1?L.value=!0:L.value=!1,Q.value=A,X.value=!1;const K=`SELECT hour, count(*) FROM visits${pe(t,1)} AND date = '${ke()}' GROUP BY hour`,we=(await ne(K)).pop();let ye=0;we&&(ye=we["count(*)"]),t.commit("setLiveVisitors",ye)}function r(W,Y,ee,H){return H.date&&(M.value=H.date),ee}function v(W,Y){t.commit("setRange",W)}function f(){if(M.value){let W=new Date-new Date(M.value),Y=Math.floor(W/864e5)*-1;Y>-33&&Y<2&&v(Y)}}function p(){(S.value===1||S.value<0)&&v(7)}return be(E),w(i,E),w(o,E),w(S,E),w(V,E),w(a,E),w(h,E),w(g,E),w(c,E),w(B,E),w(_,E),w(k,E),w(d,E),w(b,E),w(n,E),w(m,E),w(y,E),(W,Y)=>(F(),z("div",ds,[X.value?(F(),z("div",hs)):Q.value.length?(F(),Ae(us,{key:2,id:"line",data:Q.value,xkey:D(N),ykey:"value",resize:"true",labels:D(V)?'[ "Visitors" ]':'[ "Pageviews" ]',"line-color":"#2847b7","fill-opacity":"0.16","line-width":"4",dateFormat:$,smooth:!1,xLabelAngle:"45",removed:"","data-xLabelFormat":"labelFormat","data-xLabels":"xLabel",hoverCallback:r,onClick:f,onDblclick:p,grid:"true","grid-text-weight":"bold"},null,8,["data","xkey","labels"])):(F(),z("div",ms,"No data for selected period")),De(l("div",fs,null,512),[[Fe,L.value]])]))}};var vs=ge(ps,[["__scopeId","data-v-1c76f892"]]);const gs={key:0,class:"card-header"},_s={class:"card-body"},ys={key:0,class:"card-title"},bs={key:1,class:"spinner-border spinme",role:"status"},ks={key:1,class:"card-footer"},ws={props:{header:String,title:String,body:String,footer:String,loading:Boolean},setup(e){const{dark:t}=fe();return(u,s)=>(F(),z("div",{class:re(["card min-357",{"bg-dark":D(t)}])},[e.header?(F(),z("div",gs,[Oe(u.$slots,"header",{},()=>[te(q(e.header),1)],!0)])):J("",!0),l("div",_s,[e.title?(F(),z("h5",ys,q(e.title),1)):J("",!0),e.loading?(F(),z("div",bs)):J("",!0),Oe(u.$slots,"default",{},()=>[te(q(e.body),1)],!0)]),e.footer?(F(),z("div",ks,[Oe(u.$slots,"footer",{},()=>[te(q(e.footer),1)],!0)])):J("",!0)],2))}};var Te=ge(ws,[["__scopeId","data-v-0df628f2"]]);const Ss={class:"card-title mb-1"},xs={props:{title:String,underline:Boolean,muted:{type:Boolean,default:!0}},setup(e){const t=e,u=he(),s=j("0"),i=j("0"),{host:o,path:a,os:h,device:g,is_bot:c,is_new:B,browser:_,language:k,referrer:d,utm_source:b,utm_medium:n,utm_campaign:m,country:y,event:S,range:R,start:V,summary:Q}=fe();function X(r){return`${parseFloat((r*100).toFixed(2)).toLocaleString()}%`}function L(r){return r==parseInt(r)&&(r=parseInt(r)),typeof r=="number"&&(r=r.toLocaleString()),r}function M(r){return(r-(r%=60))/60+"m "+parseInt(r)}let x=ce(()=>{let r=(i.value-s.value)/s.value;return s.value?r:0});function N(r){return t.title==="Bounce Rate"?x.value>0:x.value<0}async function $(){if(!u.state.host)return;const r=pe(u);if(t.title==="Visitors"){const v=`SELECT count(DISTINCT ip) from visits${r}`;let f=await ne(v);i.value=f[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const v=`SELECT count(*) from VISITS${r}`;let f=await ne(v);i.value=f[0]["count(*)"]}else if(t.title==="Bounce Rate"){let v=`SELECT count(DISTINCT ip) from visits${r}`,f=await ne(v),p=f[0]["count(DISTINCT ip)"];v=`SELECT count(DISTINCT ip) from visits${r} AND is_new = 1`,f=await ne(v);let W=f[0]["count(DISTINCT ip)"];i.value=p===0?0:W/p}else if(t.title==="Session Length"){const v=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${r} GROUP BY ip) x`;let f=await ne(v);i.value=f[0]["AVG(x.MaxValue)"]}O()}async function O(r){if(!u.state.host)return;const v=pe(u,0,1);if(t.title==="Visitors"){const f=`SELECT count(DISTINCT ip) from visits${v}`;let p=await ne(f);s.value=p[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const f=`SELECT count(*) from VISITS${v}`;let p=await ne(f);s.value=p[0]["count(*)"]}else if(t.title==="Bounce Rate"){let f=`SELECT count(DISTINCT ip) from visits${v}`,p=await ne(f),W=p[0]["count(DISTINCT ip)"];f=`SELECT count(DISTINCT ip) from visits${v} AND is_new = 1`,p=await ne(f);let Y=p[0]["count(DISTINCT ip)"];s.value=W===0?0:Y/W}else if(t.title==="Session Length"){const f=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${v} GROUP BY ip) x`;let p=await ne(f);s.value=p[0]["AVG(x.MaxValue)"]}}const E=ce(()=>{if(console.log("range",R),t.title==="Visitors")return i.value;if(t.title==="Total Pageviews")return i.value;if(t.title==="Bounce Rate")return i.value?X(i.value):0;if(t.title==="Session Length")return M(i.value)||0});return be($),w(o,$),w(a,$),w(R,$),w(h,$),w(g,$),w(c,$),w(B,$),w(_,$),w(k,$),w(d,$),w(b,$),w(n,$),w(m,$),w(y,$),w(S,$),(r,v)=>(F(),z("div",{class:re(["col-6 col-md-3",{cp:e.underline,selected:!e.muted&&!e.underline}])},[l("h6",{class:re(["card-subtitle mb-2",{"text-muted":e.muted,"text-decoration-underline":e.underline,"link-color":e.underline}])},q(e.title),3),l("h4",Ss,q(L(D(E))),1),De(l("span",{class:re(["badge rounded-pill",{"bg-danger":N(D(x)),"bg-success":!N(D(x))}])},q((D(x)>0?"+":"")+X(D(x))),3),[[Fe,D(x)]])],2))}};var Ee=ge(xs,[["__scopeId","data-v-0d621e0b"]]);const $s={class:"mt-2 pseudotable"},Cs={key:0,class:"spinner-border spinme",role:"status"},Bs={key:1,class:"mb-1"},Ts={class:"mb-1"},Es=te("\xA0 "),Ds={key:0,style:{display:"inline-block","margin-left":"-3px"}},Ls=te("\xA0\u2009 "),Os={key:2},Is={key:3,style:{display:"inline-block"}},As=["src"],Fs=te("\xA0\u2009 "),Ms={key:4,style:{display:"inline-block"}},zs=["src"],Rs=te("\xA0\u2009 "),Ns={key:5,style:{display:"inline-block"}},Ps=["src"],Vs=te("\xA0\u2009 "),Ws={key:6,style:{display:"inline-block"}},qs=["onClick"],Ks={key:7,style:{display:"inline-block"}},Us=["href"],Hs={key:8},Ys={class:"float-right text-right pt-1"},se={props:{column:String,iconify:Boolean,favicons:Boolean,browserIcons:Boolean,osIcons:Boolean,links:Boolean,setter:String,linkPrefix:String,limit:Number,defaultText:String,valueColumn:String,loadTimes:Boolean,valueFormatter:Function,keyFormatter:Function},setup(e){const{column:t,iconify:u,favicons:s,browserIcons:i,osIcons:o,links:a,setter:h,linkPrefix:g,limit:c,defaultText:B,valueColumn:_,loadTimes:k,valueFormatter:d,keyFormatter:b}=e,n=he(),{host:m,path:y,os:S,device:R,is_bot:V,is_new:Q,browser:X,language:L,referrer:M,utm_source:x,utm_medium:N,utm_campaign:$,country:O,event:E,range:r,summary:v,showVisitors:f}=fe(),p=ce(()=>_||(f.value?"count(DISTINCT ip)":"count(*)")),W=j([]),Y=j(0),ee=j(!0);async function H(){let T=[];_==="AvgLoadTime"?T=await is(n):_==="EntrypageCount"?T=await Ne(n,t,_,c||10):_==="ExitPagecount"?T=await Ne(n,t,_,c||10):T=await Re(n,t,c||10);let ie=T.filter(P=>!P[t]);if(ie.length>1){let P=ie.map(le=>le[p.value]).reduce((le,ve)=>le+=ve),ue=T.filter(le=>le[t]),de={};de[t]=null,de[p.value]=P,ue.unshift(de),T=ue}T.sort((P,ue)=>ue[p.value]-P[p.value]),W.value=T;try{Y.value=T[0][p.value]}catch{Y.value=0}ee.value=!1}function I(T){return T==parseInt(T)&&(T=parseInt(T)),typeof T=="number"&&(T=T.toLocaleString()),T}function A(T,ie=48,P="web"){const ue="avant,basilisk,brave,browsh,chrome,chromium,deno,dolphin,edge,electron,epic,falkon,firefox,geckoview,hermes,icecat,jsdom,konqueror,maxthon,midori,netsurf,node.js,nw.js,opera,otter,puffin,qutebrowser,safari,seamonkey,servo,silk,spidermonkey,tor,uc,v8,vivaldi,web,webkit,yandex".split(","),de=T.toLowerCase().trim().split(" ");let le=ue.filter(ve=>de.includes(ve));return le.length&&(P=le[0]),`https://cdnjs.cloudflare.com/ajax/libs/browser-logos/72.0.0/${P}/${P}_${ie}x${ie}.png`}function K(T){const ie="AIX,AND,AMG,ATV,ARL,BTR,SBA,BEO,BLB,QNX,CAI,CES,COS,CYN,DEB,DEE,DFB,FED,FOS,FIR,BSD,FYD,GNT,GTV,HPX,HAI,IPA,HAR,KOS,KNO,KBT,LIN,LBT,MAC,MAE,MAG,MDR,SMG,MIN,MOR,NBS,WII,NDS,OS2,OBS,OWR,PCL,PSP,PS3,RHT,ROS,ROK,RSO,REM,REX,SAB,SSE,SAF,SLW,SOS,SYL,SYM,SYS,S40,S60,SY3,TDX,TIZ,UBT,WAS,WHS,WIN,WCE,WIO,WMO,WPH,WRT,XBX,XBT,YNS,IOS,POS,WOS".split(","),P="aix,android,amigaos,tvos,arch linux,backtrack,bada,beos,blackberry os,blackberry tablet os,caixa m\xE1gica,centos,chrome os,cyanogenmod,debian,deepin,dragonfly,fedora,firefox os,fire os,freebsd,fydeos,gentoo,google tv,hp-ux,haiku os,ipados,harmonyos,kaios,knoppix,kubuntu,linux,lubuntu,mac,maemo,mageia,mandriva,meego,mint,morphos,netbsd,nintendo,nintendo mobile,os/2,openbsd,openwrt,pclinuxos,playstation portable,playstation,red hat,risc os,roku os,rosa,remix os,rex,sabayon,suse,sailfish os,slackware,solaris,syllable,symbian,symbian os,symbian os series 40,symbian os series 60,symbian^3,threadx,tizen,ubuntu,watchos,whale os,windows,windows ce,windows iot,windows mobile,windows phone,windows rt,xbox,xubuntu,yunos,ios,palmos,webos".split(","),ue="16,24,32,48,64,128,256,512".split(",");let de="",le=ue[3];T=T.toLowerCase().trim();let ve=P.map(Ve=>T.includes(Ve)).indexOf(!0);return ve>0&&(de=ie[ve]),de?`https://cdn.jsdelivr.net/npm/@egoistdeveloper/operating-system-logos/src/${le}x${le}/${de}.png`:"/default.png"}function _e(T){return T=(T+"").toLowerCase().trim(),{desktop:"bi bi-pc-display-horizontal",laptop:"bi bi-laptop",tablet:"bi bi-tablet",mobile:"bi bi-phone",returning:"bi bi-arrow-repeat",new:"bi bi-person-plus","normal users":"bi bi-person-square","headless browsers":"bi bi-robot"}[T]}function we(T){return T=(T+"").toLowerCase().trim(),T.indexOf("http")===0&&(T=new URL(T).hostname),T}function ye(T,ie=40){return T&&T.length>ie&&(T=T.substring(0,ie)+"..."),T}return be(H),w(m,H),w(y,H),w(r,H),w(f,H),w(S,H),w(R,H),w(V,H),w(Q,H),w(X,H),w(L,H),w(M,H),w(x,H),w(N,H),w($,H),w(O,H),w(E,H),(T,ie)=>(F(),z("div",$s,[ee.value?(F(),z("div",Cs)):W.value.length?(F(!0),z(Se,{key:2},Le(W.value,P=>(F(),z("div",Ts,[l("div",{class:"shaded d-inline-block bg-grey text-nowrap pt-1 pb-1",style:He(`width: ${P[D(p)]/Y.value*85}%`)},[Es,e.iconify&&_e(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column])?(F(),z("div",Ds,[l("i",{class:re(_e(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column]))},null,2),Ls])):J("",!0),!P[e.column]&&e.setter?(F(),z("a",{key:1,class:"text-decoration-underline cp",onClick:ie[0]||(ie[0]=ue=>e.setter&&D(n).commit(e.setter,0))},q(e.defaultText||"None"),1)):P[e.column]?J("",!0):(F(),z("span",Os,q(e.defaultText||"None"),1)),e.favicons?(F(),z("div",Is,[P[e.column]&&e.favicons?(F(),z("img",{key:0,src:`https://logo.clearbit.com/${we(P[e.column])}`,onerror:"this.src='default.png';"},null,8,As)):J("",!0),Fs])):J("",!0),e.browserIcons?(F(),z("div",Ms,[P[e.column]&&e.browserIcons?(F(),z("img",{key:0,src:`${A(P[e.column])}`},null,8,zs)):J("",!0),Rs])):J("",!0),e.osIcons?(F(),z("div",Ns,[P[e.column]&&e.osIcons?(F(),z("img",{key:0,src:`${K(P[e.column])}`},null,8,Ps)):J("",!0),Vs])):J("",!0),e.setter?(F(),z("div",Ws,[P[e.column]?(F(),z("a",{key:0,class:"d-inline-block text-truncate cp",onClick:ue=>D(n).commit(e.setter,P[e.column])},q(ye(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column])),9,qs)):J("",!0)])):e.links?(F(),z("div",Ks,[P[e.column]&&e.links?(F(),z("a",{key:0,class:"d-inline-block text-truncate",href:`${P[e.column].indexOf("http")?"http://":""}${e.linkPrefix||""}${P[e.column]}`,target:"_blank"},q(ye(P[e.column])),9,Us)):J("",!0)])):J("",!0),P[e.column]&&!e.links&&!e.setter?(F(),z("span",Hs,q(e.keyFormatter?e.keyFormatter(P[e.column]):P[e.column]),1)):J("",!0)],4),l("span",Ys,q(e.valueFormatter?e.valueFormatter(P[D(p)]):I(P[D(p)])),1)]))),256)):(F(),z("div",Bs," No data for selected period "))]))}},Gs={name:"svg-map",data(){return{id:"svg-map-"+Math.random().toString(36).substr(2,9)}},props:{countries:{type:Object},dark:{type:Boolean},showVisitors:{type:Boolean}},methods:{createMap(){let e={};document.querySelectorAll(".svgMap-tooltip").forEach(t=>t.remove()),this.showVisitors?e.visitors={name:"visitors",format:"{0}",thousandSeparator:","}:e.pageviews={name:"pageviews",format:"{0}",thousandSeparator:","},new svgMap({targetElementID:this.id,colorMax:this.dark?"#4c9be8":"#3459E6",colorMin:"#c7d2fc",colorNoData:this.dark?"rgb(78, 93, 108)":"#E2E2E2",data:{data:e,applyData:this.showVisitors?"visitors":"pageviews",values:this.countries||{}}}),this.$nextTick(()=>{document.querySelectorAll(".svgMap-map-image path[data-id]").forEach(t=>{t.onclick=u=>{const s=t.getAttribute("data-id");this.$emit("clicked",s)}})})}},computed:{bundle(){let{countries:e,dark:t}=this;return{countries:e,dark:t}}},mounted(){this.createMap()},watch:{bundle(e){this.$refs.svgMap.innerHTML="",this.$nextTick(()=>{this.createMap()})}}},Xs=["id"];function Zs(e,t,u,s,i,o){return F(),z("div",{id:i.id,ref:"svgMap"},null,8,Xs)}var js=ge(Gs,[["render",Zs]]);const Z=e=>(Ye("data-v-34cce3f6"),e=e(),Ge(),e),Js={class:"container mt-5"},Qs={class:"row"},ei={class:"col-md-12"},ti={class:"row p-1 pt-2"},si={class:"row mt-3"},ii={class:"col-md-6"},ai={class:"card-body"},ni=Me('<h5 class="card-title float-left tweaked" data-v-34cce3f6>Sources</h5><ul class="nav nav-tabs float-right" data-v-34cce3f6><li class="nav-item ms-auto" data-v-34cce3f6><a class="nav-link active" data-bs-toggle="tab" href="#referrers" data-v-34cce3f6><span class="d-none d-sm-inline" data-v-34cce3f6>Referrers</span><span class="d-inline d-sm-none" data-v-34cce3f6>All</span></a></li><li class="nav-item ms-auto" data-v-34cce3f6><a class="nav-link" data-bs-toggle="tab" href="#referrer_urls" data-v-34cce3f6>URLs</a></li><li class="nav-item" data-v-34cce3f6><a class="nav-link" data-bs-toggle="tab" href="#medium" data-v-34cce3f6>Medium</a></li><li class="nav-item" data-v-34cce3f6><a class="nav-link" data-bs-toggle="tab" href="#source" data-v-34cce3f6>Source</a></li><li class="nav-item" data-v-34cce3f6><a class="nav-link" data-bs-toggle="tab" href="#campaign" data-v-34cce3f6>Campaign</a></li></ul>',2),oi={class:"tab-content mt-5"},ri={class:"tab-pane fade active show",id:"referrers"},li=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),ci={class:"text-muted w-495 d-inline-block text-right"},ui={class:"tab-pane fade show",id:"referrer_urls"},di=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),hi={class:"text-muted w-495 d-inline-block text-right"},mi={class:"tab-pane fade show",id:"medium"},fi=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),pi={class:"text-muted w-495 d-inline-block text-right"},vi={class:"tab-pane fade show",id:"source"},gi=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),_i={class:"text-muted w-495 d-inline-block text-right"},yi={class:"tab-pane fade show",id:"campaign"},bi=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),ki={class:"text-muted w-495 d-inline-block text-right"},wi={class:"col-md-6 mt-3 mt-sm-0"},Si={class:"card-body"},xi=Me('<h5 class="card-title float-left tweaked" data-v-34cce3f6>Pages</h5><ul class="nav nav-tabs float-right" data-v-34cce3f6><li class="nav-item ms-auto" data-v-34cce3f6><a class="nav-link active" data-bs-toggle="tab" href="#pages" data-v-34cce3f6>Top Pages</a></li><li class="nav-item" data-v-34cce3f6><a class="nav-link" data-bs-toggle="tab" href="#loadtimes" data-v-34cce3f6>Load Times</a></li><li class="nav-item" data-v-34cce3f6><a class="nav-link" data-bs-toggle="tab" href="#entrypages" data-v-34cce3f6>Entry <span class="d-none d-sm-inline" data-v-34cce3f6> Pages</span></a></li><li class="nav-item" data-v-34cce3f6><a class="nav-link" data-bs-toggle="tab" href="#exitpages" data-v-34cce3f6>Exit <span class="d-none d-sm-inline" data-v-34cce3f6> Pages</span></a></li></ul>',2),$i={class:"tab-content mt-5"},Ci={class:"tab-pane fade show active",id:"pages"},Bi=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Ti={class:"text-muted w-495 d-inline-block text-right"},Ei={class:"tab-pane fade show",id:"loadtimes"},Di=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Li=Z(()=>l("small",{class:"text-muted w-495 d-inline-block text-right"},"Avg. Load Time",-1)),Oi={class:"tab-pane fade show",id:"entrypages"},Ii=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Ai=Z(()=>l("small",{class:"text-muted w-495 d-inline-block text-right"},"Entries",-1)),Fi={class:"tab-pane fade show",id:"exitpages"},Mi=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),zi=Z(()=>l("small",{class:"text-muted w-495 d-inline-block text-right"},"Exits",-1)),Ri={class:"row mt-3"},Ni={class:"col-md-6"},Pi={class:"col-md-6 mt-3 mt-sm-0"},Vi=Z(()=>l("h5",{class:"card-title float-left tweaked"},"Users",-1)),Wi=Z(()=>l("ul",{class:"nav nav-tabs float-right"},[l("li",{class:"nav-item ms-auto"},[l("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#size"},[l("span",{class:"d-none d-sm-inline"},"Device "),te("Type")])]),l("li",{class:"nav-item"},[l("a",{class:"nav-link d-none d-sm-inline-block","data-bs-toggle":"tab",href:"#new"},"Returning")]),l("li",{class:"nav-item"},[l("a",{class:"nav-link","data-bs-toggle":"tab",href:"#browser"},"Browser")]),l("li",{class:"nav-item"},[l("a",{class:"nav-link","data-bs-toggle":"tab",href:"#language"},[te("Lang"),l("span",{class:"d-none d-sm-inline"},"uage")])]),l("li",{class:"nav-item"},[l("a",{class:"nav-link","data-bs-toggle":"tab",href:"#os"},"OS")])],-1)),qi={class:"tab-content mt-5"},Ki={class:"tab-pane fade show active",id:"size"},Ui=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Device Type",-1)),Hi={class:"text-muted w-495 d-inline-block text-right"},Yi=Z(()=>l("hr",null,null,-1)),Gi={class:"tab-pane fade",id:"new"},Xi=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"New vs. Returning",-1)),Zi={class:"text-muted w-495 d-inline-block text-right"},ji={class:"tab-pane fade",id:"browser"},Ji=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Browser",-1)),Qi={class:"text-muted w-495 d-inline-block text-right"},ea={class:"tab-pane fade",id:"language"},ta=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Language",-1)),sa={class:"text-muted w-495 d-inline-block text-right"},ia={class:"tab-pane fade",id:"os"},aa=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"OS",-1)),na={class:"text-muted w-495 d-inline-block text-right"},oa={class:"row mt-3"},ra={class:"col-md-12"},la=Z(()=>l("h5",{class:"card-title float-left tweaked"},"Events",-1)),ca={class:"mt-5"},ua=Z(()=>l("small",{class:"text-muted w-495 d-inline-block"},"Event Name",-1)),da={class:"text-muted w-495 d-inline-block text-right float-right"},ha={setup(e){const t=r=>typeof r=="number"?Math.max(0,r.toFixed(2)):r,u=r=>(r||"").charAt(0).toUpperCase()+(r||"").slice(1),s=r=>r?"Headless Browsers":"Normal Users",i=r=>r?"New":"Returning",o=r=>{let v={aa:"Afar",ab:"Abkhazian",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bh:"Bihari languages",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan; Valencian",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi; Dhivehi; Maldivian",dz:"Dzongkha",ee:"Ewe",el:"Greek, Modern (1453-)",en:"English",eo:"Esperanto",es:"Spanish; Castilian",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fulah",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Gaelic; Scomttish Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian; Haitian Creole",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ie:"Interlingue; Occidental",ig:"Igbo",ii:"Sichuan Yi; Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu; Gikuyu",kj:"Kuanyama; Kwanyama",kk:"Kazakh",kl:"Kalaallisut; Greenlandic",km:"Central Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kirghiz; Kyrgyz",la:"Latin",lb:"Luxembourgish; Letzeburgesch",lg:"Ganda",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Bokm\xE5l, Norwegian; Norwegian Bokm\xE5l",nd:"Ndebele, North; North Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch; Flemish",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",no:"Norwegian",nr:"Ndebele, South; South Ndebele",nv:"Navajo; Navaho",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",om:"Oromo",or:"Oriya",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",pi:"Pali",pl:"Polish",ps:"Pushto; Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ro:"Romanian; Moldavian; Moldovan",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Sotho, Southern",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap\xFCk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zh:"Chinese",zu:"Zulu"},f=r;try{f=f.toLowerCase().split("-")[0]}catch{}try{f=v[f]}catch{}return(!f||f=="undefined")&&(f="Unknown"),f+" ("+r+")"},a=he(),h=j({}),{range:g,host:c,path:B,os:_,device:k,is_bot:d,is_new:b,browser:n,language:m,referrer:y,utm_source:S,utm_medium:R,utm_campaign:V,country:Q,event:X,dark:L,summary:M,showVisitors:x}=fe(),N=ce(()=>x.value?"Visitors":"Pageviews");async function $(){let r=await Re(a,"country_code",999),v={};r.forEach(f=>{x.value?v[f.country_code]={visitors:f["count(DISTINCT ip)"]}:v[f.country_code]={pageviews:f["count(*)"]}}),h.value=v}function O(r){console.log("clicked on",r),a.commit("setCountry",r)}function E(){clearInterval(window._latest_refresh_timer),window._latest_refresh_timer=setInterval(()=>{g.value==1&&location.reload(!0)},5*60*1e3)}return E(),be($),w(c,$),w(B,$),w(g,$),w(x,$),w(_,$),w(k,$),w(d,$),w(b,$),w(n,$),w(m,$),w(y,$),w(S,$),w(R,$),w(V,$),w(Q,$),w(X,$),w(g,E),(r,v)=>(F(),z("div",Js,[U(Jt),l("div",Qs,[l("div",ei,[U(Te,null,{default:xe(()=>[l("div",ti,[U(Ee,{title:"Visitors",muted:!1,underline:!D(x),onClick:v[0]||(v[0]=f=>D(a).commit("setShowVisitors",!0))},null,8,["underline"]),U(Ee,{title:"Total Pageviews",muted:!1,underline:D(x),onClick:v[1]||(v[1]=f=>D(a).commit("setShowVisitors",!1))},null,8,["underline"]),U(Ee,{title:"Bounce Rate"}),U(Ee,{title:"Session Length"})]),U(vs)]),_:1})])]),l("div",si,[l("div",ii,[l("div",{class:re(["card min-357",{"bg-dark":D(L)}])},[l("div",ai,[ni,l("div",oi,[l("div",ri,[li,l("small",ci,q(D(N)),1),U(se,{column:"referer_host",setter:"setReferrer",favicons:!0,links:!0,defaultText:"Direct / None"})]),l("div",ui,[di,l("small",hi,q(D(N)),1),U(se,{column:"referer_url",favicons:!0,links:!0,defaultText:"Direct / None"})]),l("div",mi,[fi,l("small",pi,q(D(N)),1),U(se,{column:"utm_medium",setter:"setUtm_medium"})]),l("div",vi,[gi,l("small",_i,q(D(N)),1),U(se,{column:"utm_source",setter:"setUtm_source"})]),l("div",yi,[bi,l("small",ki,q(D(N)),1),U(se,{column:"utm_campaign",setter:"setUtm_campaign"})])])])],2)]),l("div",wi,[l("div",{class:re(["card min-357",{"bg-dark":D(L)}])},[l("div",Si,[xi,l("div",$i,[l("div",Ci,[Bi,l("small",Ti,q(D(N)),1),U(se,{column:"pathname",setter:"setPath",defaultText:"None"})]),l("div",Ei,[Di,Li,U(se,{column:"pathname",valueColumn:"AvgLoadTime",setter:"setPath",loadTimes:!0,valueFormatter:t})]),l("div",Oi,[Ii,Ai,U(se,{column:"pathname",valueColumn:"EntrypageCount",setter:"setPath",defaultText:"None"})]),l("div",Fi,[Mi,zi,U(se,{column:"pathname",valueColumn:"ExitPagecount",setter:"setPath",defaultText:"None"})])])])],2)])]),l("div",Ri,[l("div",Ni,[U(Te,{title:"Countries"},{default:xe(()=>[U(js,{countries:h.value,dark:D(L),showVisitors:D(x),onClicked:O},null,8,["countries","dark","showVisitors"])]),_:1})]),l("div",Pi,[U(Te,null,{default:xe(()=>[Vi,Wi,l("div",qi,[l("div",Ki,[Ui,l("small",Hi,q(D(N)),1),U(se,{column:"device_type",setter:"setDevice",iconify:!0,keyFormatter:u}),Yi,U(se,{column:"bot",setter:"setIs_bot",iconify:!0,defaultText:"Normal Users",keyFormatter:s})]),l("div",Gi,[Xi,l("small",Zi,q(D(N)),1),U(se,{column:"is_new",setter:"setIs_new",iconify:!0,defaultText:"Returning",keyFormatter:i})]),l("div",ji,[Ji,l("small",Qi,q(D(N)),1),U(se,{column:"browser",setter:"setBrowser",browserIcons:!0})]),l("div",ea,[ta,l("small",sa,q(D(N)),1),U(se,{column:"lang",setter:"setLanguage",keyFormatter:o})]),l("div",ia,[aa,l("small",na,q(D(N)),1),U(se,{column:"os",setter:"setOs",osIcons:!0})])])]),_:1})])]),l("div",oa,[l("div",ra,[U(Te,null,{default:xe(()=>[la,l("div",ca,[ua,l("small",da,q(D(N)==="Visitors"?"Events from Unique Visitors":"Event Count"),1),U(se,{column:"event",setter:"setEvent"})])]),_:1})])])]))}};var ma=ge(ha,[["__scopeId","data-v-34cce3f6"]]);const fa={setup(e){const t=he();function u(){let s=localStorage.getItem("__analytics_encryption_key"),i=localStorage.getItem("__analytics_public_key"),o=localStorage.getItem("__analytics_hosts");if(o)try{o=JSON.parse(o)}catch{}Array.isArray(o)||(o=null);let a={};location.search.slice(1).split("&").map(g=>g.split("=")).forEach(g=>a[g[0]]=g[1]);async function h(){let g="/keypair";location.hostname==="localhost"&&(g="https://analytics.servers.do/keypair");let B=await(await fetch(g)).json(),{public_key:_,private_key:k}=B;localStorage.setItem("__analytics_encryption_key",k),localStorage.setItem("__analytics_public_key",_),t.commit("setPublicKey",_),t.commit("setKey",k)}if(a.key){try{a.key=decodeURIComponent(a.key)}catch{}localStorage.setItem("__analytics_encryption_key",a.key),t.commit("setKey",a.key)}else s&&t.commit("setKey",s);if(a.pkey){try{a.pkey=decodeURIComponent(a.pkey)}catch{}localStorage.setItem("__analytics_public_key",a.pkey),t.commit("setPublicKey",a.pkey)}else i?t.commit("setPublicKey",i):h();a.host&&((!o||!Array.isArray(o))&&(o=[]),o.includes(a.host)||o.push(a.host),localStorage.setItem("__analytics_hosts",JSON.stringify(o))),o&&(o.sort((g,c)=>g.localeCompare(c)),t.commit("setDomains",o),a.host||(a.host=o[0])),a.range||(a.range=7),t.commit("setPath",a.path||""),t.commit("setHost",a.host||""),t.commit("setRange",a.range),t.commit("setOs",a.os||""),t.commit("setDevice",a.device||""),t.commit("setIs_bot",a.is_bot||""),t.commit("setIs_new",a.is_new||""),t.commit("setBrowser",a.browser||""),t.commit("setLanguage",a.language||""),t.commit("setReferrer",a.referrer||""),t.commit("setUtm_source",a.utm_source||""),t.commit("setUtm_medium",a.utm_medium||""),t.commit("setUtm_campaign",a.utm_campaign||""),t.commit("setEvent",a.event||"")}return u(),addEventListener("popstate",s=>{console.log("onpopstate location: "+document.location),u()}),(s,i)=>(F(),z(Se,null,[U(ht),U(ma),U(at),U(Tt)],64))}};Xe(fa).use(je).mount("#app");
