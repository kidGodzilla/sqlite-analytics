import{c as Be,o as z,a as I,b as d,t as M,u as A,d as Y,e as Q,r as U,f as se,w as q,n as Z,g as Ce,v as Te,h as ee,i as H,F as de,j as _e,k as be,m as Oe,l as Le,p as he,q as De,s as P,x as fe,y as ke,z as Fe}from"./vendor.d16a1b09.js";const Ae=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}};Ae();function ae(e){const t=new Date;return t.setDate(t.getDate()-e)}var ze=Be({state(){return{publicKey:"",domains:[],host:"",key:"",start:ae(0),end:ae(0),range:"1",rangeString:"Latest",liveVisitors:0,showVisitors:!0,summary:{},dark:!1}},getters:{domains:e=>e.domains,dark:e=>e.dark,key:e=>e.key,publicKey:e=>e.publicKey,host:e=>e.host,start:e=>e.start,end:e=>e.end,range:e=>e.range,rangeString:e=>e.rangeString,liveVisitors:e=>e.liveVisitors,showVisitors:e=>e.showVisitors,summary:e=>e.summary},mutations:{setDark(e,t){e.dark=t},setKey(e,t){e.key=t},setPublicKey(e,t){e.publicKey=t},setDomains(e,t){e.domains=t},setHost(e,t){e.host=t},setStart(e,t){e.start=t},setEnd(e,t){e.end=t},setLiveVisitors(e,t){e.liveVisitors=t},setShowVisitors(e,t){e.showVisitors=t},setSummary(e,t){e.summary=t},setRangeString(e,t){e.rangeString=t},setRange(e,t){t||(t="1");let s={"-1":["Yesterday",1,1],"1":["Latest",0,0],"7":["Last 7 Days",7,0],"14":["1 week ago",14,7],"21":["2 weeks ago",21,14],"28":["3 weeks ago",28,21],"30":["Last 30 Days",30,0]}[t];if(t<-1&&t>-32){let c=t*-1;s=[`${new Date(ae(c)).toDateString()}`,c,c]}t.length===7&&(s=[`${t}`,t,t]),t>1e3&&t<3e3&&(s=[`${t}`,t,t]),e.rangeString=s[0],e.start=ae(s[1]),e.end=ae(s[2]),parseInt(t)==t&&(t=parseInt(t)),e.range=t;let a=`?host=${e.host}&range=${t}`;location.search!==a&&window.history.pushState("","",a)}}});const Ie={class:"text-center mt-3"},Ee=Y(" Copyright \xA9 2021-"),Me={class:"year"},Ne=Y(),Re=d("a",{href:"https://jamesfuthey.com/",target:"_blank"},"James Futhey",-1),Pe=Y(". \xA0All Rights Reserved. "),Ve={setup(e){const t=new Date().getFullYear();return(r,s)=>(z(),I("p",Ie,[Ee,d("span",Me,M(A(t)),1),Ne,Re,Pe]))}},We={class:"container"},qe=d("a",{class:"navbar-brand",href:"/"},"Website Analytics",-1),Ke=d("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[d("span",{class:"navbar-toggler-icon"})],-1),He={class:"collapse navbar-collapse",id:"navbarColor01"},Ue={class:"navbar-nav me-auto"},Ye={class:"nav-item"},Ge={class:"d-none d-md-inline-block form-check form-switch float-right"},je={setup(e){const t=Q(),r=U(!1);return se(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(r.value=!0)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{r.value=s.matches}),q(r,()=>{t.commit("setDark",r.value),document.querySelector("#theme").href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/${r.value?"superhero":"zephyr"}/bootstrap.min.css`,r.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),(s,a)=>(z(),I("nav",{class:Z(["navbar navbar-expand-lg navbar-dark",{"mt-1":r.value,"bg-primary":!r.value}])},[d("div",We,[qe,Ke,d("div",He,[d("ul",Ue,[d("li",Ye,[d("a",{class:Z(["nav-link cp",{"btn-dark":r.value,nudge:r.value}]),"data-bs-toggle":"modal","data-bs-target":"#embedScript"},"Add to your Website",2)])])]),d("div",Ge,[Ce(d("input",{class:"form-check-input",type:"checkbox",id:"themer","onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c)},null,512),[[Te,r.value]]),d("label",{class:Z(["form-check-label",{"text-white":!r.value}]),for:"themer",style:{"user-select":"none"}},"Dark mode",2)])])],2))}},te=()=>{const e=Q();return Object.fromEntries(Object.keys(e.getters).map(t=>[t,ee(()=>e.getters[t])]))},Ze={class:"modal",id:"embedScript",tabindex:"-1"},Je={class:"modal-dialog modal-lg"},Xe=d("div",{class:"modal-header"},[d("h5",{class:"modal-title"},"Add to your Website"),d("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qe={class:"modal-body"},et=d("h5",null,"Embed Code",-1),tt=d("p",null,"Embed this script on your website, and your analytics data will appear here.",-1),st={rows:"4",spellcheck:"false",class:"form-control",id:"script","data-clipboard-target":"#script",style:{resize:"none","font-family":"monospace"}},it=d("small",{class:"d-block mt-1"},[d("a",{class:"cp","data-clipboard-target":"#script"},"Copy to clipboard"),d("span",{class:"d-none"},"\xA0Copied!")],-1),at=d("br",null,null,-1),nt=d("h5",null,"URL to View Analytics",-1),ot=d("p",null,"You will need the following URL to access (and decrypt) your analytics:",-1),rt={rows:"3",spellcheck:"false",class:"form-control",id:"url","data-clipboard-target":"#url",style:{resize:"none","font-family":"monospace"}},lt=d("small",{class:"d-block mt-1"},[d("a",{class:"cp","data-clipboard-target":"#url"},"Copy to clipboard"),d("span",{class:"d-none"},"\xA0Copied!")],-1),ct=d("p",null,[d("small",null,[d("strong",null,"Save your URL."),Y(" If you lose this, you will need to reinstall analytics with a new encryption key.")])],-1),ut=d("div",{class:"modal-footer"},[d("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),dt={setup(e){const{key:t,publicKey:r,dark:s}=te();let a="https://analytics.servers.do",c=ee(()=>r.value?`&lt;script>window.__analytics_encryption_key = '${r.value}';&lt;/script>
`:"");const m=ee(()=>u(`&lt;!-- Servers.do Analytics -->
${c.value}&lt;script src='${a}/a.js'>&lt;/script>`)),f=ee(()=>`${a}?key=${encodeURIComponent(t.value)}&pkey=${r.value}`);function u(n){return window.$("<textarea />").html(n).text()}return(n,x)=>(z(),I("div",Ze,[d("div",Je,[d("div",{class:Z(["modal-content",{"bg-dark":A(s)}])},[Xe,d("div",Qe,[et,tt,d("p",null,[d("textarea",st,M(A(m)),1),it]),at,nt,ot,d("p",null,[d("textarea",rt,M(A(f)),1),lt]),ct]),ut],2)])]))}};const ht={class:"row"},ft={class:"col-6"},mt={class:"nav nav-pills mb-1 d-inline-block"},pt={class:"nav-item dropdown ms-auto"},vt={class:"nav-link dropdown-toggle cp","data-bs-toggle":"dropdown",role:"button"},gt=["src"],yt={class:"d-inline pt-2 mb-0 name"},_t={class:"dropdown-menu websites left"},bt=["onClick"],kt=d("span",{class:"text-success d-none d-md-inline-block dot"},"\xB7",-1),St={class:"current-visitors d-none d-md-inline-block"},wt={class:"col-6"},xt={class:"nav nav-pills mb-1"},$t={class:"nav-item dropdown ms-auto"},Bt={class:"dropdown-menu right"},Ct=d("div",{class:"dropdown-divider"},null,-1),Tt=d("div",{class:"dropdown-divider"},null,-1),Ot=d("div",{class:"dropdown-divider"},null,-1),Lt={setup(e){const t=U(new Date),r=U(!1),s=U("month"),a=U("month"),c=U("month"),m={to:new Date(new Date().setDate(new Date().getDate()-32)),from:new Date,preventDisableDateSelection:!0},{host:f,domains:u,range:n,rangeString:x,liveVisitors:h}=te(),_=Q();function i(S,$){_.commit("setRange",S),$||(r.value=!1)}const p=S=>S.charAt(0).toUpperCase()+S.slice(1);function o(){var S=prompt("Enter domain name");if(S){if(S=S.toLowerCase().trim().replace("www.",""),S&&window.history.pushState("","",`?host=${S}&range=${n.value}`),S&&!(u.value||[]).includes(S)){let $=u.value;Array.isArray($)||($=[]),$.includes(S)||$.push(S),localStorage.setItem("__analytics_hosts",JSON.stringify($)),_.commit("setDomains",$)}S&&l(S)}}function l(S){window.history.pushState("","",`?host=${S}&range=${n.value}`),_.commit("setHost",S)}function v(S){S==="month"?(s.value="month",a.value="month",c.value="month",_.commit("setRangeString","Custom month:")):S==="year"?(s.value="year",a.value="year",c.value="year",_.commit("setRangeString","Custom year:")):S==="day"&&(s.value="day",a.value="day",c.value="day",_.commit("setRangeString","Custom day:")),document.querySelector(".dropdown-menu.right.show").classList.remove("show"),r.value=!0,setTimeout(()=>{document.querySelector(".vuejs3-datepicker__value").click()},123)}function w(S){if(s.value==="year"){let L=new Date(S).getFullYear();i(L)}else if(s.value==="month"){let $=new Date(S),L=$.getMonth()+1;i(`${$.getFullYear()}-${L<10?"0":""}${L}`)}else if(s.value==="day"){t.value=new Date(S);let $=new Date-new Date(S),L=Math.floor($/864e5)*-1;i(L)}}return(S,$)=>(z(),I("div",ht,[d("div",ft,[d("ul",mt,[d("li",pt,[d("a",vt,[A(f)?(z(),I("img",{key:0,class:"favicon",src:`https://logo.clearbit.com/${A(f)}`,onerror:"this.src='default.png';"},null,8,gt)):H("",!0),d("h5",yt,M(p(A(f))||"Select a Domain"),1)]),d("div",_t,[(z(!0),I(de,null,_e(A(u),L=>(z(),I("a",{class:"dropdown-item cp",onClick:V=>l(L)},M(p(L)),9,bt))),256)),d("a",{class:"dropdown-item cp",onClick:o},"Add Domain")])])]),kt,d("span",St,"\xA0"+M(A(h)?`${A(h)} current visitor${A(h)==1?"":"s"}`:"No current visitors"),1)]),d("div",wt,[d("ul",xt,[d("li",$t,[d("a",{class:Z(["nav-link right cp",{"dropdown-toggle":!r.value}]),"data-bs-toggle":"dropdown",role:"button"},M(A(x)),3),d("div",Bt,[d("a",{class:"dropdown-item cp",onClick:$[0]||($[0]=L=>i(1))},"Latest"),d("a",{class:"dropdown-item cp",onClick:$[1]||($[1]=L=>i(-1))},"Yesterday"),d("a",{class:"dropdown-item cp",onClick:$[2]||($[2]=L=>{v("day")})},"Custom Day"),Ct,d("a",{class:"dropdown-item cp",onClick:$[3]||($[3]=L=>i(7))},"Last 7 Days"),d("a",{class:"dropdown-item cp",onClick:$[4]||($[4]=L=>i(14))},"1 week ago"),d("a",{class:"dropdown-item cp",onClick:$[5]||($[5]=L=>i(21))},"2 weeks ago"),d("a",{class:"dropdown-item cp",onClick:$[6]||($[6]=L=>i(28))},"3 weeks ago"),Tt,d("a",{class:"dropdown-item cp",onClick:$[7]||($[7]=L=>i(30))},"Last 30 Days"),Ot,d("a",{class:"dropdown-item cp",onClick:$[8]||($[8]=L=>{v("month")})},"Custom Month"),d("a",{class:"dropdown-item cp",onClick:$[9]||($[9]=L=>{v("year")})},"Custom Year")])]),r.value?(z(),be(A(Oe),{key:0,name:"datepick",value:t.value,"disabled-dates":a.value=="day"?m:null,"initial-view":s.value,"minimum-view":a.value,"maximum-view":c.value,onInput:w},null,8,["value","disabled-dates","initial-view","minimum-view","maximum-view"])):H("",!0)])])]))}};var N=N||function(e,t){var r={},s=r.lib={},a=function(){},c=s.Base={extend:function(i){a.prototype=this;var p=new a;return i&&p.mixIn(i),p.hasOwnProperty("init")||(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var i=this.extend();return i.init.apply(i,arguments),i},init:function(){},mixIn:function(i){for(var p in i)i.hasOwnProperty(p)&&(this[p]=i[p]);i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.init.prototype.extend(this)}},m=s.WordArray=c.extend({init:function(i,p){i=this.words=i||[],this.sigBytes=p!=t?p:4*i.length},toString:function(i){return(i||u).stringify(this)},concat:function(i){var p=this.words,o=i.words,l=this.sigBytes;if(i=i.sigBytes,this.clamp(),l%4)for(var v=0;v<i;v++)p[l+v>>>2]|=(o[v>>>2]>>>24-8*(v%4)&255)<<24-8*((l+v)%4);else if(65535<o.length)for(v=0;v<i;v+=4)p[l+v>>>2]=o[v>>>2];else p.push.apply(p,o);return this.sigBytes+=i,this},clamp:function(){var i=this.words,p=this.sigBytes;i[p>>>2]&=4294967295<<32-8*(p%4),i.length=e.ceil(p/4)},clone:function(){var i=c.clone.call(this);return i.words=this.words.slice(0),i},random:function(i){for(var p=[],o=0;o<i;o+=4)p.push(4294967296*e.random()|0);return new m.init(p,i)}}),f=r.enc={},u=f.Hex={stringify:function(i){var p=i.words;i=i.sigBytes;for(var o=[],l=0;l<i;l++){var v=p[l>>>2]>>>24-8*(l%4)&255;o.push((v>>>4).toString(16)),o.push((v&15).toString(16))}return o.join("")},parse:function(i){for(var p=i.length,o=[],l=0;l<p;l+=2)o[l>>>3]|=parseInt(i.substr(l,2),16)<<24-4*(l%8);return new m.init(o,p/2)}},n=f.Latin1={stringify:function(i){var p=i.words;i=i.sigBytes;for(var o=[],l=0;l<i;l++)o.push(String.fromCharCode(p[l>>>2]>>>24-8*(l%4)&255));return o.join("")},parse:function(i){for(var p=i.length,o=[],l=0;l<p;l++)o[l>>>2]|=(i.charCodeAt(l)&255)<<24-8*(l%4);return new m.init(o,p)}},x=f.Utf8={stringify:function(i){try{return decodeURIComponent(escape(n.stringify(i)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(i){return n.parse(unescape(encodeURIComponent(i)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(i){typeof i=="string"&&(i=x.parse(i)),this._data.concat(i),this._nDataBytes+=i.sigBytes},_process:function(i){var p=this._data,o=p.words,l=p.sigBytes,v=this.blockSize,w=l/(4*v),w=i?e.ceil(w):e.max((w|0)-this._minBufferSize,0);if(i=w*v,l=e.min(4*i,l),i){for(var S=0;S<i;S+=v)this._doProcessBlock(o,S);S=o.splice(0,i),p.sigBytes-=l}return new m.init(S,l)},clone:function(){var i=c.clone.call(this);return i._data=this._data.clone(),i},_minBufferSize:0});s.Hasher=h.extend({cfg:c.extend(),init:function(i){this.cfg=this.cfg.extend(i),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(i){return this._append(i),this._process(),this},finalize:function(i){return i&&this._append(i),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(p,o){return new i.init(o).finalize(p)}},_createHmacHelper:function(i){return function(p,o){return new _.HMAC.init(i,o).finalize(p)}}});var _=r.algo={};return r}(Math);(function(){var e=N,t=e.lib.WordArray;e.enc.Base64={stringify:function(r){var s=r.words,a=r.sigBytes,c=this._map;r.clamp(),r=[];for(var m=0;m<a;m+=3)for(var f=(s[m>>>2]>>>24-8*(m%4)&255)<<16|(s[m+1>>>2]>>>24-8*((m+1)%4)&255)<<8|s[m+2>>>2]>>>24-8*((m+2)%4)&255,u=0;4>u&&m+.75*u<a;u++)r.push(c.charAt(f>>>6*(3-u)&63));if(s=c.charAt(64))for(;r.length%4;)r.push(s);return r.join("")},parse:function(r){var s=r.length,a=this._map,c=a.charAt(64);c&&(c=r.indexOf(c),c!=-1&&(s=c));for(var c=[],m=0,f=0;f<s;f++)if(f%4){var u=a.indexOf(r.charAt(f-1))<<2*(f%4),n=a.indexOf(r.charAt(f))>>>6-2*(f%4);c[m>>>2]|=(u|n)<<24-8*(m%4),m++}return t.create(c,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(h,_,i,p,o,l,v){return h=h+(_&i|~_&p)+o+v,(h<<l|h>>>32-l)+_}function r(h,_,i,p,o,l,v){return h=h+(_&p|i&~p)+o+v,(h<<l|h>>>32-l)+_}function s(h,_,i,p,o,l,v){return h=h+(_^i^p)+o+v,(h<<l|h>>>32-l)+_}function a(h,_,i,p,o,l,v){return h=h+(i^(_|~p))+o+v,(h<<l|h>>>32-l)+_}for(var c=N,m=c.lib,f=m.WordArray,u=m.Hasher,m=c.algo,n=[],x=0;64>x;x++)n[x]=4294967296*e.abs(e.sin(x+1))|0;m=m.MD5=u.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,_){for(var i=0;16>i;i++){var p=_+i,o=h[p];h[p]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360}var i=this._hash.words,p=h[_+0],o=h[_+1],l=h[_+2],v=h[_+3],w=h[_+4],S=h[_+5],$=h[_+6],L=h[_+7],V=h[_+8],D=h[_+9],E=h[_+10],F=h[_+11],W=h[_+12],O=h[_+13],T=h[_+14],C=h[_+15],g=i[0],k=i[1],b=i[2],y=i[3],g=t(g,k,b,y,p,7,n[0]),y=t(y,g,k,b,o,12,n[1]),b=t(b,y,g,k,l,17,n[2]),k=t(k,b,y,g,v,22,n[3]),g=t(g,k,b,y,w,7,n[4]),y=t(y,g,k,b,S,12,n[5]),b=t(b,y,g,k,$,17,n[6]),k=t(k,b,y,g,L,22,n[7]),g=t(g,k,b,y,V,7,n[8]),y=t(y,g,k,b,D,12,n[9]),b=t(b,y,g,k,E,17,n[10]),k=t(k,b,y,g,F,22,n[11]),g=t(g,k,b,y,W,7,n[12]),y=t(y,g,k,b,O,12,n[13]),b=t(b,y,g,k,T,17,n[14]),k=t(k,b,y,g,C,22,n[15]),g=r(g,k,b,y,o,5,n[16]),y=r(y,g,k,b,$,9,n[17]),b=r(b,y,g,k,F,14,n[18]),k=r(k,b,y,g,p,20,n[19]),g=r(g,k,b,y,S,5,n[20]),y=r(y,g,k,b,E,9,n[21]),b=r(b,y,g,k,C,14,n[22]),k=r(k,b,y,g,w,20,n[23]),g=r(g,k,b,y,D,5,n[24]),y=r(y,g,k,b,T,9,n[25]),b=r(b,y,g,k,v,14,n[26]),k=r(k,b,y,g,V,20,n[27]),g=r(g,k,b,y,O,5,n[28]),y=r(y,g,k,b,l,9,n[29]),b=r(b,y,g,k,L,14,n[30]),k=r(k,b,y,g,W,20,n[31]),g=s(g,k,b,y,S,4,n[32]),y=s(y,g,k,b,V,11,n[33]),b=s(b,y,g,k,F,16,n[34]),k=s(k,b,y,g,T,23,n[35]),g=s(g,k,b,y,o,4,n[36]),y=s(y,g,k,b,w,11,n[37]),b=s(b,y,g,k,L,16,n[38]),k=s(k,b,y,g,E,23,n[39]),g=s(g,k,b,y,O,4,n[40]),y=s(y,g,k,b,p,11,n[41]),b=s(b,y,g,k,v,16,n[42]),k=s(k,b,y,g,$,23,n[43]),g=s(g,k,b,y,D,4,n[44]),y=s(y,g,k,b,W,11,n[45]),b=s(b,y,g,k,C,16,n[46]),k=s(k,b,y,g,l,23,n[47]),g=a(g,k,b,y,p,6,n[48]),y=a(y,g,k,b,L,10,n[49]),b=a(b,y,g,k,T,15,n[50]),k=a(k,b,y,g,S,21,n[51]),g=a(g,k,b,y,W,6,n[52]),y=a(y,g,k,b,v,10,n[53]),b=a(b,y,g,k,E,15,n[54]),k=a(k,b,y,g,o,21,n[55]),g=a(g,k,b,y,V,6,n[56]),y=a(y,g,k,b,C,10,n[57]),b=a(b,y,g,k,$,15,n[58]),k=a(k,b,y,g,O,21,n[59]),g=a(g,k,b,y,w,6,n[60]),y=a(y,g,k,b,F,10,n[61]),b=a(b,y,g,k,l,15,n[62]),k=a(k,b,y,g,D,21,n[63]);i[0]=i[0]+g|0,i[1]=i[1]+k|0,i[2]=i[2]+b|0,i[3]=i[3]+y|0},_doFinalize:function(){var h=this._data,_=h.words,i=8*this._nDataBytes,p=8*h.sigBytes;_[p>>>5]|=128<<24-p%32;var o=e.floor(i/4294967296);for(_[(p+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,_[(p+64>>>9<<4)+14]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,h.sigBytes=4*(_.length+1),this._process(),h=this._hash,_=h.words,i=0;4>i;i++)p=_[i],_[i]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360;return h},clone:function(){var h=u.clone.call(this);return h._hash=this._hash.clone(),h}}),c.MD5=u._createHelper(m),c.HmacMD5=u._createHmacHelper(m)})(Math);(function(){var e=N,t=e.lib,r=t.Base,s=t.WordArray,t=e.algo,a=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,m){for(var f=this.cfg,u=f.hasher.create(),n=s.create(),x=n.words,h=f.keySize,f=f.iterations;x.length<h;){_&&u.update(_);var _=u.update(c).finalize(m);u.reset();for(var i=1;i<f;i++)_=u.finalize(_),u.reset();n.concat(_)}return n.sigBytes=4*h,n}});e.EvpKDF=function(c,m,f){return a.create(f).compute(c,m)}})();N.lib.Cipher||function(e){var t=N,r=t.lib,s=r.Base,a=r.WordArray,c=r.BufferedBlockAlgorithm,m=t.enc.Base64,f=t.algo.EvpKDF,u=r.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(o,l){return this.create(this._ENC_XFORM_MODE,o,l)},createDecryptor:function(o,l){return this.create(this._DEC_XFORM_MODE,o,l)},init:function(o,l,v){this.cfg=this.cfg.extend(v),this._xformMode=o,this._key=l,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(o){return this._append(o),this._process()},finalize:function(o){return o&&this._append(o),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(o){return{encrypt:function(l,v,w){return(typeof v=="string"?p:i).encrypt(o,l,v,w)},decrypt:function(l,v,w){return(typeof v=="string"?p:i).decrypt(o,l,v,w)}}}});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var n=t.mode={},x=function(o,l,v){var w=this._iv;w?this._iv=e:w=this._prevBlock;for(var S=0;S<v;S++)o[l+S]^=w[S]},h=(r.BlockCipherMode=s.extend({createEncryptor:function(o,l){return this.Encryptor.create(o,l)},createDecryptor:function(o,l){return this.Decryptor.create(o,l)},init:function(o,l){this._cipher=o,this._iv=l}})).extend();h.Encryptor=h.extend({processBlock:function(o,l){var v=this._cipher,w=v.blockSize;x.call(this,o,l,w),v.encryptBlock(o,l),this._prevBlock=o.slice(l,l+w)}}),h.Decryptor=h.extend({processBlock:function(o,l){var v=this._cipher,w=v.blockSize,S=o.slice(l,l+w);v.decryptBlock(o,l),x.call(this,o,l,w),this._prevBlock=S}}),n=n.CBC=h,h=(t.pad={}).Pkcs7={pad:function(o,l){for(var v=4*l,v=v-o.sigBytes%v,w=v<<24|v<<16|v<<8|v,S=[],$=0;$<v;$+=4)S.push(w);v=a.create(S,v),o.concat(v)},unpad:function(o){o.sigBytes-=o.words[o.sigBytes-1>>>2]&255}},r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:n,padding:h}),reset:function(){u.reset.call(this);var o=this.cfg,l=o.iv,o=o.mode;if(this._xformMode==this._ENC_XFORM_MODE)var v=o.createEncryptor;else v=o.createDecryptor,this._minBufferSize=1;this._mode=v.call(o,this,l&&l.words)},_doProcessBlock:function(o,l){this._mode.processBlock(o,l)},_doFinalize:function(){var o=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){o.pad(this._data,this.blockSize);var l=this._process(!0)}else l=this._process(!0),o.unpad(l);return l},blockSize:4});var _=r.CipherParams=s.extend({init:function(o){this.mixIn(o)},toString:function(o){return(o||this.formatter).stringify(this)}}),n=(t.format={}).OpenSSL={stringify:function(o){var l=o.ciphertext;return o=o.salt,(o?a.create([1398893684,1701076831]).concat(o).concat(l):l).toString(m)},parse:function(o){o=m.parse(o);var l=o.words;if(l[0]==1398893684&&l[1]==1701076831){var v=a.create(l.slice(2,4));l.splice(0,4),o.sigBytes-=16}return _.create({ciphertext:o,salt:v})}},i=r.SerializableCipher=s.extend({cfg:s.extend({format:n}),encrypt:function(o,l,v,w){w=this.cfg.extend(w);var S=o.createEncryptor(v,w);return l=S.finalize(l),S=S.cfg,_.create({ciphertext:l,key:v,iv:S.iv,algorithm:o,mode:S.mode,padding:S.padding,blockSize:o.blockSize,formatter:w.format})},decrypt:function(o,l,v,w){return w=this.cfg.extend(w),l=this._parse(l,w.format),o.createDecryptor(v,w).finalize(l.ciphertext)},_parse:function(o,l){return typeof o=="string"?l.parse(o,this):o}}),t=(t.kdf={}).OpenSSL={execute:function(o,l,v,w){return w||(w=a.random(8)),o=f.create({keySize:l+v}).compute(o,w),v=a.create(o.words.slice(l),4*v),o.sigBytes=4*l,_.create({key:o,iv:v,salt:w})}},p=r.PasswordBasedCipher=i.extend({cfg:i.cfg.extend({kdf:t}),encrypt:function(o,l,v,w){return w=this.cfg.extend(w),v=w.kdf.execute(v,o.keySize,o.ivSize),w.iv=v.iv,o=i.encrypt.call(this,o,l,v.key,w),o.mixIn(v),o},decrypt:function(o,l,v,w){return w=this.cfg.extend(w),l=this._parse(l,w.format),v=w.kdf.execute(v,o.keySize,o.ivSize,l.salt),w.iv=v.iv,i.decrypt.call(this,o,l,v.key,w)}})}();(function(){for(var e=N,t=e.lib.BlockCipher,V=e.algo,r=[],s=[],a=[],c=[],m=[],f=[],u=[],n=[],x=[],h=[],_=[],i=0;256>i;i++)_[i]=128>i?i<<1:i<<1^283;for(var p=0,o=0,i=0;256>i;i++){var l=o^o<<1^o<<2^o<<3^o<<4,l=l>>>8^l&255^99;r[p]=l,s[l]=p;var v=_[p],w=_[v],S=_[w],$=257*_[l]^16843008*l;a[p]=$<<24|$>>>8,c[p]=$<<16|$>>>16,m[p]=$<<8|$>>>24,f[p]=$,$=16843009*S^65537*w^257*v^16843008*p,u[l]=$<<24|$>>>8,n[l]=$<<16|$>>>16,x[l]=$<<8|$>>>24,h[l]=$,p?(p=v^_[_[_[S^v]]],o^=_[_[o]]):p=o=1}var L=[0,1,2,4,8,16,32,64,128,27,54],V=V.AES=t.extend({_doReset:function(){for(var D=this._key,E=D.words,F=D.sigBytes/4,D=4*((this._nRounds=F+6)+1),W=this._keySchedule=[],O=0;O<D;O++)if(O<F)W[O]=E[O];else{var T=W[O-1];O%F?6<F&&O%F==4&&(T=r[T>>>24]<<24|r[T>>>16&255]<<16|r[T>>>8&255]<<8|r[T&255]):(T=T<<8|T>>>24,T=r[T>>>24]<<24|r[T>>>16&255]<<16|r[T>>>8&255]<<8|r[T&255],T^=L[O/F|0]<<24),W[O]=W[O-F]^T}for(E=this._invKeySchedule=[],F=0;F<D;F++)O=D-F,T=F%4?W[O]:W[O-4],E[F]=4>F||4>=O?T:u[r[T>>>24]]^n[r[T>>>16&255]]^x[r[T>>>8&255]]^h[r[T&255]]},encryptBlock:function(D,E){this._doCryptBlock(D,E,this._keySchedule,a,c,m,f,r)},decryptBlock:function(D,E){var F=D[E+1];D[E+1]=D[E+3],D[E+3]=F,this._doCryptBlock(D,E,this._invKeySchedule,u,n,x,h,s),F=D[E+1],D[E+1]=D[E+3],D[E+3]=F},_doCryptBlock:function(D,E,F,W,O,T,C,g){for(var k=this._nRounds,b=D[E]^F[0],y=D[E+1]^F[1],R=D[E+2]^F[2],K=D[E+3]^F[3],X=4,ye=1;ye<k;ye++)var le=W[b>>>24]^O[y>>>16&255]^T[R>>>8&255]^C[K&255]^F[X++],ce=W[y>>>24]^O[R>>>16&255]^T[K>>>8&255]^C[b&255]^F[X++],ue=W[R>>>24]^O[K>>>16&255]^T[b>>>8&255]^C[y&255]^F[X++],K=W[K>>>24]^O[b>>>16&255]^T[y>>>8&255]^C[R&255]^F[X++],b=le,y=ce,R=ue;le=(g[b>>>24]<<24|g[y>>>16&255]<<16|g[R>>>8&255]<<8|g[K&255])^F[X++],ce=(g[y>>>24]<<24|g[R>>>16&255]<<16|g[K>>>8&255]<<8|g[b&255])^F[X++],ue=(g[R>>>24]<<24|g[K>>>16&255]<<16|g[b>>>8&255]<<8|g[y&255])^F[X++],K=(g[K>>>24]<<24|g[b>>>16&255]<<16|g[y>>>8&255]<<8|g[R&255])^F[X++],D[E]=le,D[E+1]=ce,D[E+2]=ue,D[E+3]=K},keySize:8});e.AES=t._createHelper(V)})();N.mode.CTR=function(){var e=N.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,s){var a=this._cipher,c=a.blockSize,m=this._iv,f=this._counter;m&&(f=this._counter=m.slice(0),this._iv=void 0);var u=f.slice(0);a.encryptBlock(u,0),f[c-1]=f[c-1]+1|0;for(var n=0;n<c;n++)r[s+n]^=u[n]}});return e.Decryptor=t,e}();(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},t.bitshift=function(r,s){var a=0,c=r.words,m,f=0,u;if(s>0){for(;s>31;)c.splice(0,1),c.push(0),s-=32,f++;if(s==0)return a;for(var n=c.length-f-1;n>=0;n--)m=c[n],c[n]<<=s,c[n]|=a,a=m>>>32-s}else if(s<0){for(;s<-31;)c.splice(0,0,0),c.length--,s+=32,f++;if(s==0)return a;s=-s,u=(1<<s)-1;for(var n=f;n<c.length;n++)m=c[n]&u,c[n]>>>=s,c[n]|=a,a=m<<32-s}return a},t.neg=function(r){for(var s=r.words,a=0;a<s.length;a++)s[a]=~s[a];return r},t.xor=function(r,s){for(var a=0;a<r.words.length;a++)r.words[a]^=s.words[a];return r},t.bitand=function(r,s){for(var a=r.clone(),c=a.words,m=s.words,f=0;f<c.length;f++)c[f]&=m[f];return a}})(N);(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},e.lib.Base;var r=e.lib.WordArray;e.algo.AES,t.const_Zero=r.create([0,0,0,0]),t.const_One=r.create([0,0,0,1]),t.const_Rb=r.create([0,0,0,135]),t.const_Rb_Shifted=r.create([2147483648,0,0,67]),t.const_nonMSB=r.create([4294967295,4294967295,2147483647,2147483647]),t.isWordArray=function(s){return s&&typeof s.clamp=="function"&&typeof s.concat=="function"&&typeof s.words=="array"},e.pad.OneZeroPadding={pad:function(s,a){for(var c=a*4,m=c-s.sigBytes%c,f=[],u=0;u<m;u+=4){var n=0;u===0&&(n=2147483648),f.push(n)}var x=r.create(f,m);s.concat(x)},unpad:function(){}},e.pad.NoPadding={pad:function(){},unpad:function(){}},t.leftmostBytes=function(s,a){var c=s.clone();return c.sigBytes=a,c.clamp(),c},t.rightmostBytes=function(s,a){s.clamp();var c=32,m=s.clone(),f=(m.sigBytes-a)*8;if(f>=c){var u=Math.floor(f/c);f-=u*c,m.words.splice(0,u),m.sigBytes-=u*c/8}return f>0&&(t.bitshift(m,f),m.sigBytes-=f/8),m},t.popWords=function(s,a){var c=t.leftmostBytes(s,a*4);return s.words=s.words.slice(a),s.sigBytes-=a*4,c},t.shiftBytes=function(s,a){a=a||16;var c=a%4;a-=c;for(var m=r.create(),f=0;f<a;f+=4)m.words.push(s.words.shift()),s.sigBytes-=4,m.sigBytes+=4;return c>0&&(m.words.push(s.words[0]),m.sigBytes+=c,t.bitshift(s,c*8),s.sigBytes-=c),m},t.xorendBytes=function(s,a){return t.leftmostBytes(s,s.sigBytes-a.sigBytes).concat(t.xor(t.rightmostBytes(s,a.sigBytes),a))},t.dbl=function(s){var a=t.msb(s);return t.bitshift(s,1),t.xor(s,a===1?t.const_Rb:t.const_Zero),s},t.inv=function(s){var a=s.words[4]&1;return t.bitshift(s,-1),t.xor(s,a===1?t.const_Rb_Shifted:t.const_Zero),s},t.equals=function(s,a){if(!a||!a.words||s.sigBytes!==a.sigBytes)return!1;s.clamp(),a.clamp();for(var c=0,m=0;m<s.words.length;m++)c|=s.words[m]^a.words[m];return c===0},t.msb=function(s){return s.words[0]>>>31}})(N);(function(e){var t=e.lib.Base,r=e.lib.WordArray,s=e.algo.AES,a=e.ext,c=e.pad.OneZeroPadding;function m(u,n){var x=s.createEncryptor(u,{iv:r.create(),padding:e.pad.NoPadding}),h=x.finalize(n);return h}var f=e.algo.CMAC=t.extend({init:function(u){var n=m(u,a.const_Zero),x=n.clone();if(a.dbl(x),this._isTwo){var h=n.clone();a.inv(h)}else{var h=x.clone();a.dbl(h)}this._K1=x,this._K2=h,this._K=u,this._const_Bsize=16,this.reset()},reset:function(){this._x=a.const_Zero.clone(),this._counter=0,this._buffer=r.create()},update:function(u){if(!u)return this;var n=this._buffer,x=this._const_Bsize;for(typeof u=="string"&&(u=e.enc.Utf8.parse(u)),n.concat(u);n.sigBytes>x;){var h=a.shiftBytes(n,x);a.xor(this._x,h),this._x.clamp(),this._x=m(this._K,this._x),this._counter++}return this},finalize:function(u){this.update(u);var n=this._buffer,x=this._const_Bsize,h=n.clone();return n.sigBytes===x?a.xor(h,this._K1):(c.pad(h,x/4),a.xor(h,this._K2)),a.xor(h,this._x),this.reset(),m(this._K,h)},_isTwo:!1});e.CMAC=function(u,n){return f.create(u).finalize(n)},e.algo.OMAC1=f,e.algo.OMAC2=f.extend({_isTwo:!0})})(N);(function(e){var t=e.lib.Base,r=e.lib.WordArray;e.algo.AES;var s=e.ext,a=e.pad.OneZeroPadding,c=e.algo.CMAC,m=e.algo.S2V=t.extend({init:function(f){this._blockSize=16,this._cmacAD=c.create(f),this._cmacPT=c.create(f),this.reset()},reset:function(){this._buffer=r.create(),this._cmacAD.reset(),this._cmacPT.reset(),this._d=this._cmacAD.finalize(s.const_Zero),this._empty=!0,this._ptStarted=!1},updateAAD:function(f){return this._ptStarted?this:f?(typeof f=="string"&&(f=e.enc.Utf8.parse(f)),this._d=s.xor(s.dbl(this._d),this._cmacAD.finalize(f)),this._empty=!1,this):this},update:function(f){if(!f)return this;this._ptStarted=!0;var u=this._buffer,n=this._blockSize,x=n/4,h=this._cmacPT;for(typeof f=="string"&&(f=e.enc.Utf8.parse(f)),u.concat(f);u.sigBytes>=2*n;){this._empty=!1;var _=s.popWords(u,x);h.update(_)}return this},finalize:function(f){this.update(f);var u=this._blockSize,n=this._buffer;if(this._empty&&n.sigBytes===0)return this._cmacAD.finalize(s.const_One);var x;return n.sigBytes>=u?x=s.xorendBytes(n,this._d):(a.pad(n,u),x=s.xor(s.dbl(this._d),n)),this._cmacPT.finalize(x)}});e.SIV=t.extend({init:function(f){var u=f.sigBytes/2;this._s2vKey=s.shiftBytes(f,u),this._ctrKey=f},encrypt:function(f,u){!u&&f&&(u=f,f=[]);var n=m.create(this._s2vKey);Array.prototype.forEach.call(f,function(i){n.updateAAD(i)});var x=n.finalize(u),h=s.bitand(x,s.const_nonMSB),_=e.AES.encrypt(u,this._ctrKey,{iv:h,mode:e.mode.CTR,padding:e.pad.NoPadding});return x.concat(_.ciphertext)},decrypt:function(f,u){!u&&f&&(u=f,f=[]);var n=s.shiftBytes(u,16),x=s.bitand(n,s.const_nonMSB),h=e.AES.decrypt({ciphertext:u},this._ctrKey,{iv:x,mode:e.mode.CTR,padding:e.pad.NoPadding}),_=m.create(this._s2vKey);Array.prototype.forEach.call(f,function(p){_.updateAAD(p)});var i=_.finalize(h);return s.equals(n,i)?h:!1}})})(N);const Dt=new URL("/assets/sqlite.worker.710c9469.js",self.location),Ft=new URL("/assets/sql-wasm.dd613b12.wasm",self.location),At=()=>Math.random().toString(36).substr(2,9);let Se=0;async function zt(e){const t=e.state.key?N.SIV.create(N.enc.Hex.parse(e.state.key)):null;return function(s){if(t)try{let a=t.decrypt(N.enc.Hex.parse(s)).toString(N.enc.Utf8);a&&a!="false"&&(s=a)}catch{}return s}}async function It(){if(window._worker)return window._worker;if(Se)return new Promise((t,r)=>{function s(){setTimeout(()=>{if(window._worker){t(window._worker);return}s()},50)}s()});Se=1;async function e(){return await Le.exports.createDbWorker([{from:"inline",config:{serverMode:"full",url:`${location.protocol}//${location.host}/analytics.sqlite3.png`,requestChunkSize:1024*32}}],Dt.toString(),Ft.toString())}return window._worker=await e(),window._worker}async function J(e){let t=await It(),r=At();console.time("query time "+r);let s=await t.db.query(e);return console.log("query",e,s),console.timeEnd("query time "+r),s}function me(e){return e||(e=new Date),(typeof e!="object"||!e.toISOString)&&(e=new Date(e)),e.toISOString().slice(0,10)}function ie(e,t){let r=[];if(e.state.host&&r.push(`host = '${e.state.host}'`),e.state.host&&e.state.key){const a=N.SIV.create(N.enc.Hex.parse(e.state.key)).encrypt(e.state.host).toString();r[0]=`(${r[0]} OR host = '${a}')`}return e.state.start&&e.state.end&&!t&&r.push(`date BETWEEN '${me(e.state.start)}' AND '${me(e.state.end)}'`),(r.length?" WHERE ":"")+(r.join(" AND ")||"")}async function Et(e){if(!e.state.host)return[];const t=e.state.key?N.SIV.create(N.enc.Hex.parse(e.state.key)):null;let r=`SELECT pathname, AVG(load_time) as AvgLoadTime from visits${ie(e)} GROUP BY pathname ORDER BY AvgLoadTime DESC LIMIT 10;`,s=await J(r);return t&&s.forEach(a=>{try{let c=t.decrypt(N.enc.Hex.parse(a.pathname)).toString(N.enc.Utf8);c&&c!="false"&&(a.pathname=c)}catch{}}),s}async function we(e,t="hour",r=10){if(!e.state.host)return[];const s=e.state.key?N.SIV.create(N.enc.Hex.parse(e.state.key)):null,a=e.state.showVisitors?"count(DISTINCT ip)":"count(*)";let c=t==="hour"||t==="date",m=c?t:a,f=c?"ASC":"DESC",u=c?"":` LIMIT ${r}`,n=`SELECT ${t}, ${a} FROM visits${ie(e)} GROUP BY ${t} ORDER BY ${m} ${f}${u};`,x=await J(n);return s&&x.forEach(h=>{try{let _=s.decrypt(N.enc.Hex.parse(h[t])).toString(N.enc.Utf8);_&&_!="false"&&(h[t]=_)}catch{}}),x}async function xe(e,t){let r=`SELECT * FROM summaries${ie(e,1)} AND date ${t>1e3&&t<3e3?"LIKE":"="} '${t}${t>1e3&&t<3e3?"-%":""}';`,s={},a=[];(await J(r)).forEach(m=>{let f=JSON.parse(m.data);Object.keys(f).forEach(u=>{typeof f[u]=="number"?(s[u]||(s[u]=0),s[u]+=f[u]):u==="loadTimes"?(s[u]=[],s[u]||(s[u]=[]),a=a.concat(f[u]),a.map(x=>x.pathname).filter((x,h,_)=>_.indexOf(x)===h).forEach(x=>{let h=a.filter(p=>p.pathname=x),i=h.map(p=>p.AvgLoadTime).reduce((p,o)=>p+o,0)/h.length;s[u].push({pathname:x,AvgLoadTime:i})})):typeof f[u]=="object"&&(s[u]||(s[u]={}),Object.keys(f[u]).forEach(n=>{s[u][n]||(s[u][n]=0),s[u][n]+=f[u][n]}))})}),e.commit("setSummary",s)}const G={toObject:function(e){return typeof e=="string"?JSON.parse(e):e},toBoolean:function(e){return typeof e=="string"?e==="true":e},toInt:function(e){return typeof e=="string"?parseInt(e):e}},B={id:{type:String,required:!0},data:{type:[String,Array],required:!0},barColors:{type:[String,Array,Function],required:!1},xkey:{type:String,required:!1,default:"key"},ykeys:{type:[String,Array],required:!1,default:function(){return["value"]}},labels:{type:[String,Array],required:!1,default:function(){return["Value"]}},hoverCallback:{type:Function,required:!1},axes:{type:[Boolean,String],required:!1,default:!0},hideHover:{type:String,required:!1},stacked:{type:[Boolean,String],required:!1},resize:{type:[Boolean,String],required:!1},horizontal:{type:[Boolean,String],required:!1,default:!1},grid:{type:[Boolean,String],required:!1,default:!0},gridTextColor:{type:String,required:!1,default:"#888"},gridTextSize:{type:[Number,String],required:!1,default:12},gridTextFamily:{type:String,required:!1,default:"sans-serif"},gridTextWeight:{type:String,required:!1,default:"normal"},colors:{type:[String,Array],required:!1},formatter:{type:Function,required:!1},lineColors:{type:[String,Array,Function],required:!1},xLabels:{type:String,required:!1},lineWidth:{type:[Number,String],required:!1},pointSize:{type:[Number,String],required:!1},pointFillColors:{type:[String,Array],required:!1},pointStrokeColors:{type:[String,Array],required:!1},ymax:{type:String,required:!1},ymin:{type:String,required:!1},smooth:{type:[Boolean,String],required:!1,default:!0},parseTime:{type:[Boolean,String],required:!1,default:!0},postUnits:{type:String,required:!1},preUnits:{type:String,required:!1},dateFormat:{type:Function,required:!1},xLabelFormat:{type:Function,required:!1},yLabelFormat:{type:Function,required:!1},xLabelAngle:{type:String,required:!1},goals:{type:[String,Array],required:!1},goalStrokeWidth:{type:[Number,String],required:!1},goalLineColors:{type:[String,Array],required:!1},events:{type:[String,Array],required:!1},eventStrokeWidth:{type:String,required:!1},eventLineColors:{type:[String,Array],required:!1},fillOpacity:{type:String,required:!1},behaveLikeLine:{type:[Boolean,String],required:!1,default:!1}},Mt={id:B.id,data:B.data,barColors:B.barColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,hoverCallback:B.hoverCallback,grid:B.grid,horizontal:B.horizontal,axes:B.axes,hideHover:B.hideHover,stacked:B.stacked,resize:B.resize,ymax:B.ymax,ymin:B.ymin,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight},Nt={id:B.id,data:B.data,colors:B.colors,formatter:B.formatter,resize:B.resize},ne={id:B.id,data:B.data,resize:B.resize,lineColors:B.lineColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabels:B.xLabels,grid:B.grid,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight,lineWidth:B.lineWidth,pointSize:B.pointSize,pointFillColors:B.pointFillColors,pointStrokeColors:B.pointStrokeColors,ymax:B.ymax,ymin:B.ymin,smooth:B.smooth,hideHover:B.hideHover,parseTime:B.parseTime,postUnits:B.postUnits,preUnits:B.preUnits,dateFormat:B.dateFormat,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,goals:B.goals,goalStrokeWidth:B.goalStrokeWidth,goalLineColors:B.goalLineColors,events:B.events,eventStrokeWidth:B.eventStrokeWidth,eventLineColors:B.eventLineColors,fillOpacity:B.fillOpacity,hoverCallback:B.hoverCallback},$e={behaveLikeLine:B.behaveLikeLine};for(var pe in ne)ne.hasOwnProperty(pe)&&($e[pe]=ne[pe]);const oe={addOption(e,t){this[e]&&(t[e]=this[e])},addOptionAsObject(e,t){this[e]&&(t[e]=G.toObject(this[e]))}};var Rt={bar:{props:Mt,methods:oe},donut:{props:Nt,methods:oe},line:{props:ne,methods:oe},area:{props:$e,methods:oe}},ve=(e,t)=>{const r=e.__vccOpts||e;for(const[s,a]of t)r[s]=a;return r};const Pt={name:"area-chart",mixins:[Rt.area],data(){return{chart:null}},watch:{data(e){this.$nextTick(()=>{this.chart.options.labels=G.toObject(this.labels),this.chart.options.xkey=this.xkey,this.chart.options.ykeys=G.toObject(this.ykeys),this.lineColors&&(this.chart.options.lineColors=G.toObject(this.lineColors)),this.chart.setData(G.toObject(this.data))})}},mounted(){let e={element:this.id,data:G.toObject(this.data),resize:G.toBoolean(this.resize),labels:G.toObject(this.labels),xkey:this.xkey,ykeys:G.toObject(this.ykeys),grid:G.toBoolean(this.grid),gridTextColor:this.gridTextColor,gridTextSize:G.toInt(this.gridTextSize),gridTextFamily:this.gridTextFamily,gridTextWeight:this.gridTextWeight,lineWidth:this.lineWidth,pointSize:this.pointSize,ymax:this.ymax,ymin:this.ymin,smooth:G.toBoolean(this.smooth),hideHover:this.hideHover,parseTime:G.toBoolean(this.parseTime),postUnits:this.postUnits,preUnits:this.preUnits,xLabelAngle:this.xLabelAngle,goalStrokeWidth:this.goalStrokeWidth,eventStrokeWidth:this.eventStrokeWidth,fillOpacity:this.fillOpacity,behaveLikeLine:this.behaveLikeLine};this.addOptionAsObject("lineColors",e),this.addOption("xLabels",e),this.addOptionAsObject("pointFillColors",e),this.addOptionAsObject("pointStrokeColors",e),this.addOption("dateFormat",e),this.addOption("xLabelFormat",e),this.addOption("yLabelFormat",e),this.addOptionAsObject("goals",e),this.addOptionAsObject("goalLineColors",e),this.addOptionAsObject("events",e),this.addOptionAsObject("eventLineColors",e),this.addOption("hoverCallback",e),this.chart=Morris.Area(e)}},Vt=["id"];function Wt(e,t,r,s,a,c){return z(),I("div",{id:e.id},null,8,Vt)}var qt=ve(Pt,[["render",Wt]]);const Kt={id:"visits"},Ht={key:0,class:"spinner-border spinme",role:"status"},Ut={key:1},Yt={setup(e){const t=Q();let{start:r,end:s,host:a,range:c,summary:m,showVisitors:f}=te();const u=U([]),n=U(!0),x=U(null),h=ee(()=>c.value<2),_=ee(()=>h.value?"hour":"date"),i=S=>h.value?new Date(S).toLocaleString():`${new Date(S).toLocaleString(navigator.language||"en-us",{weekday:"long"})},
${new Date(S).toLocaleDateString()}`,p=U("day");async function o(){if(!a.value)return n.value=!1;if(c.value>1e3?p.value="month":p.value=h.value?"hour":"day",c.value.length===7||c.value>1e3){let C=[],g=JSON.parse(JSON.stringify(m.value)),{pageviewsTimeseries:k,visitorsTimeseries:b}=g;if(!k||!k)return;Object.keys(f.value?b:k).forEach(y=>{C.push({date:y,value:(f.value?b:k)[y]})}),u.value=C,n.value=!1;return}const S=ie(t);let $=S.split(" ").pop().replace("'","").replace("'",""),L=f.value?"count(DISTINCT ip)":"count(*)",V=h.value?"hour":"date";const D=`SELECT ${V}, ${L} FROM visits${S} GROUP BY ${V} ORDER BY ${V} ASC;`;let E=await J(D);E.forEach(C=>{h.value&&(C.hour=+new Date(`${$}T${C.hour<10?"0":""}${C.hour}:00:00Z`)),C.value=C["count(DISTINCT ip)"]||C["count(*)"],delete C["count(DISTINCT ip)"],delete C["count(*)"]}),u.value=E,n.value=!1;const F=`SELECT hour, count(*) FROM visits${ie(t,1)} AND date = '${me()}' GROUP BY hour`,O=(await J(F)).pop();let T=0;O&&(T=O["count(*)"]),t.commit("setLiveVisitors",T)}function l(S,$,L,V){return V.date&&(x.value=V.date),L}function v(S,$){t.commit("setRange",S)}function w(){if(console.log("chart clicked",x.value),x.value){let S=new Date-new Date(x.value),$=Math.floor(S/864e5)*-1;$>-33&&$<2&&v($)}}return se(o),q(a,o),q(c,o),q(m,o),q(f,o),(S,$)=>(z(),I("div",Kt,[n.value?(z(),I("div",Ht)):u.value.length?(z(),be(qt,{key:2,id:"line",data:u.value,xkey:A(_),ykey:"value",resize:"true",labels:A(f)?'[ "Visitors" ]':'[ "Pageviews" ]',"line-color":"#2847b7","fill-opacity":"0.16","line-width":"4",dateFormat:i,smooth:!1,xLabelAngle:"45",removed:"","data-xLabelFormat":"labelFormat","data-xLabels":"xLabel",hoverCallback:l,onClick:w,grid:"true","grid-text-weight":"bold"},null,8,["data","xkey","labels"])):(z(),I("div",Ut,"No data for selected period"))]))}};var Gt=ve(Yt,[["__scopeId","data-v-d8b3d90e"]]);const jt={key:0,class:"card-header"},Zt={class:"card-body"},Jt={key:0,class:"card-title"},Xt={key:1,class:"spinner-border spinme",role:"status"},Qt={key:1,class:"card-footer"},ge={props:{header:String,title:String,body:String,footer:String,loading:Boolean},setup(e){const{dark:t}=te();return(r,s)=>(z(),I("div",{class:Z(["card min-357",{"bg-dark":A(t)}])},[e.header?(z(),I("div",jt,[he(r.$slots,"header",{},()=>[Y(M(e.header),1)])])):H("",!0),d("div",Zt,[e.title?(z(),I("h5",Jt,M(e.title),1)):H("",!0),e.loading?(z(),I("div",Xt)):H("",!0),he(r.$slots,"default",{},()=>[Y(M(e.body),1)])]),e.footer?(z(),I("div",Qt,[he(r.$slots,"footer",{},()=>[Y(M(e.footer),1)])])):H("",!0)],2))}};const es={class:"col-6 col-md-3"},ts={class:"card-title"},re={props:{title:String,underline:Boolean,muted:{type:Boolean,default:!0}},setup(e){const t=e,r=Q();let s=U("-");const{host:a,range:c,summary:m}=te();function f(x){return`${(x*100).toFixed(2)}%`}function u(x){return(x-(x%=60))/60+"m "+parseInt(x)}async function n(){if(!r.state.host)return;if(c.value.length===7||c.value>1e3){t.title==="Visitors"?s.value=m.value.visitors:t.title==="Total Pageviews"?s.value=m.value.pageviews:t.title==="Bounce Rate"?s.value=f(m.value.onePageVisits/m.value.visitors):t.title==="Session Length"&&(s.value=u(m.value.sessionLength));return}const x=ie(r);if(t.title==="Visitors"){const h=`SELECT count(DISTINCT ip) from visits${x}`;let _=await J(h);s.value=_[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const h=`SELECT count(*) from VISITS${x}`;let _=await J(h);s.value=_[0]["count(*)"]}else if(t.title==="Bounce Rate"){let h=`SELECT count(DISTINCT ip) from visits${x}`,_=await J(h),i=_[0]["count(DISTINCT ip)"];h=`SELECT count(DISTINCT ip) from visits${x} AND is_new = 1`,_=await J(h);let p=_[0]["count(DISTINCT ip)"];s.value=i===0?0:f(p/i)}else if(t.title==="Session Length"){const h=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${x} GROUP BY ip) x`;let _=await J(h);s.value=u(_[0]["AVG(x.MaxValue)"])||0}}return se(n),q(a,n),q(c,n),q(m,n),(x,h)=>(z(),I("div",es,[d("h6",{class:Z(["card-subtitle mb-2",{"text-muted":e.muted,"text-decoration-underline":e.underline,"link-color":e.underline}])},M(e.title),3),d("h4",ts,M(A(s)),1)]))}},ss={class:"mt-2 pseudotable"},is={key:0,class:"spinner-border spinme",role:"status"},as={key:1,class:"mb-1"},ns={class:"mb-1"},os=Y("\xA0 "),rs={key:0,style:{display:"inline-block","margin-left":"-3px"}},ls=Y("\xA0\u2009 "),cs={key:1},us={key:2,style:{display:"inline-block"}},ds=["src"],hs=Y("\xA0\u2009 "),fs={key:3,style:{display:"inline-block"}},ms=["src"],ps=Y("\xA0\u2009 "),vs={key:4,style:{display:"inline-block"}},gs=["src"],ys=Y("\xA0\u2009 "),_s={key:5,style:{display:"inline-block"}},bs=["href"],ks={key:6},Ss={class:"float-right text-right pt-1"},j={props:{column:String,iconify:Boolean,favicons:Boolean,browserIcons:Boolean,osIcons:Boolean,links:Boolean,linkPrefix:String,limit:Number,defaultText:String,valueColumn:String,loadTimes:Boolean,valueFormatter:Function,keyFormatter:Function},setup(e){const{column:t,iconify:r,favicons:s,browserIcons:a,osIcons:c,links:m,linkPrefix:f,limit:u,defaultText:n,valueColumn:x,loadTimes:h,valueFormatter:_,keyFormatter:i}=e,p=Q(),{host:o,range:l,summary:v,showVisitors:w}=te(),S=ee(()=>x||(w.value?"count(DISTINCT ip)":"count(*)")),$=U([]),L=U(0),V=U(!0);async function D(){if(l.value.length===7||l.value>1e3){let T=JSON.parse(JSON.stringify(v.value)),C=await zt(p),g=S.value,k=t+(w.value?"__visitors":"");h&&(k="loadTimes");let b=T[k];if(b){let y=[];h?y=b:Object.keys(b).forEach(R=>{let K={};parseInt(R)==R&&(R=parseInt(R)),R=="null"&&(R=null),K[g]=b[R],K[t]=R,y.push(K)}),y.sort((R,K)=>K[g]-R[g]),y.forEach(R=>R[t]=C(R[t])),y.length>10&&(y=y.slice(0,10)),$.value=y;try{L.value=y[0][g]}catch{L.value=0}V.value=!1}return}let O=h?await Et(p):await we(p,t,u||10);$.value=O;try{L.value=O[0][S.value]}catch{L.value=0}V.value=!1}function E(O,T=48,C="web"){const g="avant,basilisk,brave,browsh,chrome,chromium,deno,dolphin,edge,electron,epic,falkon,firefox,geckoview,hermes,icecat,jsdom,konqueror,maxthon,midori,netsurf,node.js,nw.js,opera,otter,puffin,qutebrowser,safari,seamonkey,servo,silk,spidermonkey,tor,uc,v8,vivaldi,web,webkit,yandex".split(","),k=O.toLowerCase().trim().split(" ");let b=g.filter(y=>k.includes(y));return b.length&&(C=b[0]),`https://cdnjs.cloudflare.com/ajax/libs/browser-logos/72.0.0/${C}/${C}_${T}x${T}.png`}function F(O){const T="AIX,AND,AMG,ATV,ARL,BTR,SBA,BEO,BLB,QNX,CAI,CES,COS,CYN,DEB,DEE,DFB,FED,FOS,FIR,BSD,FYD,GNT,GTV,HPX,HAI,IPA,HAR,KOS,KNO,KBT,LIN,LBT,MAC,MAE,MAG,MDR,SMG,MIN,MOR,NBS,WII,NDS,OS2,OBS,OWR,PCL,PSP,PS3,RHT,ROS,ROK,RSO,REM,REX,SAB,SSE,SAF,SLW,SOS,SYL,SYM,SYS,S40,S60,SY3,TDX,TIZ,UBT,WAS,WHS,WIN,WCE,WIO,WMO,WPH,WRT,XBX,XBT,YNS,IOS,POS,WOS".split(","),C="aix,android,amigaos,tvos,arch linux,backtrack,bada,beos,blackberry os,blackberry tablet os,caixa m\xE1gica,centos,chrome os,cyanogenmod,debian,deepin,dragonfly,fedora,firefox os,fire os,freebsd,fydeos,gentoo,google tv,hp-ux,haiku os,ipados,harmonyos,kaios,knoppix,kubuntu,linux,lubuntu,mac,maemo,mageia,mandriva,meego,mint,morphos,netbsd,nintendo,nintendo mobile,os/2,openbsd,openwrt,pclinuxos,playstation portable,playstation,red hat,risc os,roku os,rosa,remix os,rex,sabayon,suse,sailfish os,slackware,solaris,syllable,symbian,symbian os,symbian os series 40,symbian os series 60,symbian^3,threadx,tizen,ubuntu,watchos,whale os,windows,windows ce,windows iot,windows mobile,windows phone,windows rt,xbox,xubuntu,yunos,ios,palmos,webos".split(","),g="16,24,32,48,64,128,256,512".split(",");let k="",b=g[3];O=O.toLowerCase().trim();let y=C.map(R=>O.includes(R)).indexOf(!0);return y>0&&(k=T[y]),k?`https://cdn.jsdelivr.net/npm/@egoistdeveloper/operating-system-logos/src/${b}x${b}/${k}.png`:"/default.png"}function W(O){return O=(O+"").toLowerCase().trim(),{desktop:"bi bi-pc-display-horizontal",laptop:"bi bi-laptop",tablet:"bi bi-tablet",mobile:"bi bi-phone",returning:"bi bi-arrow-repeat",new:"bi bi-person-plus","normal users":"bi bi-person-square","headless browsers":"bi bi-robot"}[O]}return se(D),q(o,D),q(l,D),q(v,D),q(w,D),(O,T)=>(z(),I("div",ss,[V.value?(z(),I("div",is)):$.value.length?(z(!0),I(de,{key:2},_e($.value,C=>(z(),I("div",ns,[d("div",{class:"shaded d-inline-block bg-grey text-nowrap pt-1 pb-1",style:De(`width: ${C[A(S)]/L.value*85}%`)},[os,e.iconify&&W(e.keyFormatter?e.keyFormatter(C[e.column]):C[e.column])?(z(),I("div",rs,[d("i",{class:Z(W(e.keyFormatter?e.keyFormatter(C[e.column]):C[e.column]))},null,2),ls])):H("",!0),C[e.column]?H("",!0):(z(),I("span",cs,M(e.defaultText||"None"),1)),e.favicons?(z(),I("div",us,[C[e.column]&&e.favicons?(z(),I("img",{key:0,src:`https://logo.clearbit.com/${C[e.column]}`,onerror:"this.onerror=null; this.src='default.png';"},null,8,ds)):H("",!0),hs])):H("",!0),e.browserIcons?(z(),I("div",fs,[C[e.column]&&e.browserIcons?(z(),I("img",{key:0,src:`${E(C[e.column])}`},null,8,ms)):H("",!0),ps])):H("",!0),e.osIcons?(z(),I("div",vs,[C[e.column]&&e.osIcons?(z(),I("img",{key:0,src:`${F(C[e.column])}`},null,8,gs)):H("",!0),ys])):H("",!0),e.links?(z(),I("div",_s,[C[e.column]&&e.links?(z(),I("a",{key:0,class:"d-inline-block text-truncate",href:`http://${e.linkPrefix||""}${C[e.column]}`,target:"_blank"},M(C[e.column]),9,bs)):H("",!0)])):H("",!0),C[e.column]&&!e.links?(z(),I("span",ks,M(e.keyFormatter?e.keyFormatter(C[e.column]):C[e.column]),1)):H("",!0)],4),d("span",Ss,M(e.valueFormatter?e.valueFormatter(C[A(S)]):C[A(S)]),1)]))),256)):(z(),I("div",as," No data for selected period "))]))}},ws={name:"svg-map",data(){return{id:"svg-map-"+Math.random().toString(36).substr(2,9)}},props:{countries:{type:Object},dark:{type:Boolean},showVisitors:{type:Boolean}},methods:{createMap(){let e={};this.showVisitors?e.visitors={name:"visitors",format:"{0}",thousandSeparator:","}:e.pageviews={name:"pageviews",format:"{0}",thousandSeparator:","},new svgMap({targetElementID:this.id,colorMax:this.dark?"#4c9be8":"#3459E6",colorMin:"#c7d2fc",colorNoData:this.dark?"rgb(78, 93, 108)":"#E2E2E2",data:{data:e,applyData:this.showVisitors?"visitors":"pageviews",values:this.countries||{}}})}},computed:{bundle(){let{countries:e,dark:t}=this;return{countries:e,dark:t}}},mounted(){this.createMap()},watch:{bundle(e){this.$refs.svgMap.innerHTML="",this.$nextTick(()=>{this.createMap()})}}},xs=["id"];function $s(e,t,r,s,a,c){return z(),I("div",{id:a.id,ref:"svgMap"},null,8,xs)}var Bs=ve(ws,[["render",$s]]);const Cs={class:"container mt-5"},Ts={class:"row"},Os={class:"col-md-12"},Ls={class:"row"},Ds={class:"row mt-3"},Fs={class:"col-md-6"},As={class:"card-body"},zs=ke('<h5 class="card-title float-left" style="margin-bottom:-37px;">Sources</h5><ul class="nav nav-tabs float-right"><li class="nav-item ms-auto"><a class="nav-link active" data-bs-toggle="tab" href="#referrers"><span class="d-none d-sm-inline">Referrers</span><span class="d-inline d-sm-none">All</span></a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#medium">Medium</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#source">Source</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#campaign">Campaign</a></li></ul>',2),Is={class:"tab-content mt-5"},Es={class:"tab-pane fade active show",id:"referrers"},Ms=d("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Ns={class:"text-muted w-495 d-inline-block text-right"},Rs={class:"tab-pane fade show",id:"medium"},Ps=d("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Vs={class:"text-muted w-495 d-inline-block text-right"},Ws={class:"tab-pane fade show",id:"source"},qs=d("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Ks={class:"text-muted w-495 d-inline-block text-right"},Hs={class:"tab-pane fade show",id:"campaign"},Us=d("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Ys={class:"text-muted w-495 d-inline-block text-right"},Gs={class:"col-md-6 mt-3 mt-sm-0"},js={class:"card-body"},Zs=ke('<h5 class="card-title float-left" style="margin-bottom:-37px;">Pages</h5><ul class="nav nav-tabs float-right"><li class="nav-item ms-auto"><a class="nav-link active" data-bs-toggle="tab" href="#pages">Top Pages</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#loadtimes">Load Times</a></li></ul>',2),Js={class:"tab-content mt-5"},Xs={class:"tab-pane fade show active",id:"pages"},Qs=d("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1),ei={class:"text-muted w-495 d-inline-block text-right"},ti={class:"tab-pane fade show",id:"loadtimes"},si=d("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1),ii=d("small",{class:"text-muted w-495 d-inline-block text-right"},"Avg. Load Time",-1),ai={class:"row mt-3"},ni={class:"col-md-6"},oi={class:"col-md-6 mt-3 mt-sm-0"},ri=d("h5",{class:"card-title float-left",style:{"margin-bottom":"-37px"}},"Users",-1),li=d("ul",{class:"nav nav-tabs float-right"},[d("li",{class:"nav-item ms-auto"},[d("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#size"},[d("span",{class:"d-none d-sm-inline"},"Device "),Y("Type")])]),d("li",{class:"nav-item"},[d("a",{class:"nav-link d-none d-sm-inline-block","data-bs-toggle":"tab",href:"#new"},"Returning")]),d("li",{class:"nav-item"},[d("a",{class:"nav-link","data-bs-toggle":"tab",href:"#browser"},"Browser")]),d("li",{class:"nav-item"},[d("a",{class:"nav-link","data-bs-toggle":"tab",href:"#language"},[Y("Lang"),d("span",{class:"d-none d-sm-inline"},"uage")])]),d("li",{class:"nav-item"},[d("a",{class:"nav-link","data-bs-toggle":"tab",href:"#os"},"OS")])],-1),ci={class:"tab-content mt-5"},ui={class:"tab-pane fade show active",id:"size"},di=d("small",{class:"text-muted w-495 d-inline-block"},"Device Type",-1),hi={class:"text-muted w-495 d-inline-block text-right"},fi=d("hr",null,null,-1),mi={class:"tab-pane fade",id:"new"},pi=d("small",{class:"text-muted w-495 d-inline-block"},"New vs. Returning",-1),vi={class:"text-muted w-495 d-inline-block text-right"},gi={class:"tab-pane fade",id:"browser"},yi=d("small",{class:"text-muted w-495 d-inline-block"},"Browser",-1),_i={class:"text-muted w-495 d-inline-block text-right"},bi={class:"tab-pane fade",id:"language"},ki=d("small",{class:"text-muted w-495 d-inline-block"},"Language",-1),Si={class:"text-muted w-495 d-inline-block text-right"},wi={class:"tab-pane fade",id:"os"},xi=d("small",{class:"text-muted w-495 d-inline-block"},"OS",-1),$i={class:"text-muted w-495 d-inline-block text-right"},Bi={setup(e){const t=l=>Math.max(0,l.toFixed(2)),r=l=>(l||"").charAt(0).toUpperCase()+(l||"").slice(1),s=l=>l?"New":"Returning",a=l=>l?"Headless Browsers":"Normal Users",c=l=>{let v={aa:"Afar",ab:"Abkhazian",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bh:"Bihari languages",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan; Valencian",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi; Dhivehi; Maldivian",dz:"Dzongkha",ee:"Ewe",el:"Greek, Modern (1453-)",en:"English",eo:"Esperanto",es:"Spanish; Castilian",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fulah",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Gaelic; Scomttish Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian; Haitian Creole",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ie:"Interlingue; Occidental",ig:"Igbo",ii:"Sichuan Yi; Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu; Gikuyu",kj:"Kuanyama; Kwanyama",kk:"Kazakh",kl:"Kalaallisut; Greenlandic",km:"Central Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kirghiz; Kyrgyz",la:"Latin",lb:"Luxembourgish; Letzeburgesch",lg:"Ganda",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Bokm\xE5l, Norwegian; Norwegian Bokm\xE5l",nd:"Ndebele, North; North Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch; Flemish",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",no:"Norwegian",nr:"Ndebele, South; South Ndebele",nv:"Navajo; Navaho",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",om:"Oromo",or:"Oriya",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",pi:"Pali",pl:"Polish",ps:"Pushto; Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ro:"Romanian; Moldavian; Moldovan",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Sotho, Southern",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap\xFCk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zh:"Chinese",zu:"Zulu"},w=l;try{w=w.toLowerCase().split("-")[0]}catch{}try{w=v[w]}catch{}return(!w||w=="undefined")&&(w="Unknown"),w+" ("+l+")"},m=Q(),f=U({}),{range:u,host:n,dark:x,summary:h,showVisitors:_}=te(),i=ee(()=>_.value?"Visitors":"Pageviews");async function p(){if(u.value.length===7||u.value>1e3){let w=JSON.parse(JSON.stringify(h.value)),S=_.value?w.country_code__visitors:w.country_code;if(S){let $={};Object.keys(S).forEach(L=>{_.value?$[L]={visitors:S[L]}:$[L]={pageviews:S[L]}}),f.value=$}return}let l=await we(m,"country_code",999),v={};l.forEach(w=>{_.value?v[w.country_code]={visitors:w["count(DISTINCT ip)"]}:v[w.country_code]={pageviews:w["count(*)"]}}),f.value=v}function o(){(typeof u.value=="string"&&u.value.length===7||u.value>1e3&&u.value<3e3)&&xe(m,u.value)}return se(p),se(o),q(n,p),q(n,o),q(u,p),q(u,o),q(h,p),q(_,p),(l,v)=>(z(),I("div",Cs,[P(Lt),d("div",Ts,[d("div",Os,[P(ge,null,{default:fe(()=>[d("div",Ls,[P(re,{title:"Visitors",muted:!1,underline:!A(_),onClick:v[0]||(v[0]=w=>A(m).commit("setShowVisitors",!0))},null,8,["underline"]),P(re,{title:"Total Pageviews",muted:!1,underline:A(_),onClick:v[1]||(v[1]=w=>A(m).commit("setShowVisitors",!1))},null,8,["underline"]),P(re,{title:"Bounce Rate"}),P(re,{title:"Session Length"})]),P(Gt)]),_:1})])]),d("div",Ds,[d("div",Fs,[d("div",{class:Z(["card min-357",{"bg-dark":A(x)}])},[d("div",As,[zs,d("div",Is,[d("div",Es,[Ms,d("small",Ns,M(A(i)),1),P(j,{column:"referer_host",favicons:!0,links:!0,defaultText:"Direct / None"})]),d("div",Rs,[Ps,d("small",Vs,M(A(i)),1),P(j,{column:"utm_medium"})]),d("div",Ws,[qs,d("small",Ks,M(A(i)),1),P(j,{column:"utm_source"})]),d("div",Hs,[Us,d("small",Ys,M(A(i)),1),P(j,{column:"utm_campaign"})])])])],2)]),d("div",Gs,[d("div",{class:Z(["card min-357",{"bg-dark":A(x)}])},[d("div",js,[Zs,d("div",Js,[d("div",Xs,[Qs,d("small",ei,M(A(i)),1),P(j,{column:"pathname",linkPrefix:A(n),links:!0,defaultText:"None"},null,8,["linkPrefix"])]),d("div",ti,[si,ii,P(j,{column:"pathname",valueColumn:"AvgLoadTime",linkPrefix:A(n),links:!0,loadTimes:!0,valueFormatter:t},null,8,["linkPrefix"])])])])],2)])]),d("div",ai,[d("div",ni,[P(ge,{title:"Countries"},{default:fe(()=>[P(Bs,{countries:f.value,dark:A(x),showVisitors:A(_)},null,8,["countries","dark","showVisitors"])]),_:1})]),d("div",oi,[P(ge,null,{default:fe(()=>[ri,li,d("div",ci,[d("div",ui,[di,d("small",hi,M(A(i)),1),P(j,{column:"device_type",iconify:!0,keyFormatter:r}),fi,P(j,{column:"bot",iconify:!0,defaultText:"Normal Users",keyFormatter:a})]),d("div",mi,[pi,d("small",vi,M(A(i)),1),P(j,{column:"is_new",iconify:!0,defaultText:"Returning",keyFormatter:s})]),d("div",gi,[yi,d("small",_i,M(A(i)),1),P(j,{column:"browser",browserIcons:!0})]),d("div",bi,[ki,d("small",Si,M(A(i)),1),P(j,{column:"lang",keyFormatter:c})]),d("div",wi,[xi,d("small",$i,M(A(i)),1),P(j,{column:"os",osIcons:!0})])])]),_:1})])])]))}};const Ci={setup(e){const t=Q();function r(){let s=localStorage.getItem("__analytics_encryption_key"),a=localStorage.getItem("__analytics_public_key"),c=localStorage.getItem("__analytics_hosts");if(c)try{c=JSON.parse(c)}catch{}Array.isArray(c)||(c=null);let m={};location.search.slice(1).split("&").map(u=>u.split("=")).forEach(u=>m[u[0]]=u[1]);async function f(){let u="/keypair";location.hostname==="localhost"&&(u="https://analytics.servers.do/keypair");let x=await(await fetch(u)).json(),{public_key:h,private_key:_}=x;localStorage.setItem("__analytics_encryption_key",_),localStorage.setItem("__analytics_public_key",h),t.commit("setPublicKey",h),t.commit("setKey",_)}if(m.key){try{m.key=decodeURIComponent(m.key)}catch{}localStorage.setItem("__analytics_encryption_key",m.key),t.commit("setKey",m.key)}else s&&t.commit("setKey",s);if(m.pkey){try{m.pkey=decodeURIComponent(m.pkey)}catch{}localStorage.setItem("__analytics_public_key",m.pkey),t.commit("setPublicKey",m.pkey)}else a?t.commit("setPublicKey",a):f();m.host&&((!c||!Array.isArray(c))&&(c=[]),c.includes(m.host)||c.push(m.host),localStorage.setItem("__analytics_hosts",JSON.stringify(c))),c&&(c.sort((u,n)=>u.localeCompare(n)),t.commit("setDomains",c)),t.commit("setHost",m.host||""),t.commit("setRange",m.range)}return r(),addEventListener("popstate",s=>{console.log("onpopstate location: "+document.location),r()}),(s,a)=>(z(),I(de,null,[P(je),P(Bi),P(Ve),P(dt)],64))}};Fe(Ci).use(ze).mount("#app");
