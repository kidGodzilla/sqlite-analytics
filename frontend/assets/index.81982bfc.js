import{c as Be,o as F,a as z,b as u,t as M,u as O,d as G,e as ee,r as Y,f as ie,w as H,n as J,g as Ce,v as Te,h as te,i as U,F as he,j as _e,k as be,m as Oe,l as Le,p as fe,q as De,s as N,x as me,y as ke,z as Fe}from"./vendor.d16a1b09.js";const Ae=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}};Ae();function ne(e){const t=new Date;return t.setDate(t.getDate()-e)}var ze=Be({state(){return{publicKey:"",domains:[],host:"",key:"",start:ne(0),end:ne(0),range:"1",rangeString:"Latest",liveVisitors:0,showVisitors:!0,summary:{},dark:!1}},getters:{domains:e=>e.domains,dark:e=>e.dark,key:e=>e.key,publicKey:e=>e.publicKey,host:e=>e.host,start:e=>e.start,end:e=>e.end,range:e=>e.range,rangeString:e=>e.rangeString,liveVisitors:e=>e.liveVisitors,showVisitors:e=>e.showVisitors,summary:e=>e.summary},mutations:{setDark(e,t){e.dark=t},setKey(e,t){e.key=t},setPublicKey(e,t){e.publicKey=t},setDomains(e,t){e.domains=t},setHost(e,t){e.host=t},setStart(e,t){e.start=t},setEnd(e,t){e.end=t},setLiveVisitors(e,t){e.liveVisitors=t},setShowVisitors(e,t){e.showVisitors=t},setSummary(e,t){e.summary=t},setRangeString(e,t){e.rangeString=t},setRange(e,t){t||(t="1");let s={"-1":["Yesterday",1,1],"1":["Latest",0,0],"7":["Last 7 Days",7,0],"14":["1 week ago",14,7],"21":["2 weeks ago",21,14],"28":["3 weeks ago",28,21],"30":["Last 30 Days",30,0]}[t];if(t<-1&&t>-32){let c=t*-1;s=[`${new Date(ne(c)).toDateString()}`,c,c]}t.length===7&&(s=[`${t}`,t,t]),t>1e3&&t<3e3&&(s=[`${t}`,t,t]),e.rangeString=s[0],e.start=ne(s[1]),e.end=ne(s[2]),parseInt(t)==t&&(t=parseInt(t)),e.range=t;let a=`?host=${e.host}&range=${t}`;location.search!==a&&window.history.pushState("","",a)}}});const Ee={class:"text-center mt-3"},Ie=G(" Copyright \xA9 2021-"),Me={class:"year"},Ne=G(),Re=u("a",{href:"https://jamesfuthey.com/",target:"_blank"},"James Futhey",-1),Pe=G(". \xA0All Rights Reserved. "),Ve={setup(e){const t=new Date().getFullYear();return(r,s)=>(F(),z("p",Ee,[Ie,u("span",Me,M(O(t)),1),Ne,Re,Pe]))}},We={class:"container"},qe=u("a",{class:"navbar-brand",href:"/"},"Website Analytics",-1),Ke=u("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[u("span",{class:"navbar-toggler-icon"})],-1),He={class:"collapse navbar-collapse",id:"navbarColor01"},Ue={class:"navbar-nav me-auto"},Ye={class:"nav-item"},Ge={class:"d-none d-md-inline-block form-check form-switch float-right"},je={setup(e){const t=ee(),r=Y(!1);return ie(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(r.value=!0)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{r.value=s.matches}),H(r,()=>{t.commit("setDark",r.value),document.querySelector("#theme").href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/${r.value?"superhero":"zephyr"}/bootstrap.min.css`,r.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),(s,a)=>(F(),z("nav",{class:J(["navbar navbar-expand-lg navbar-dark",{"mt-1":r.value,"bg-primary":!r.value}])},[u("div",We,[qe,Ke,u("div",He,[u("ul",Ue,[u("li",Ye,[u("a",{class:J(["nav-link cp",{"btn-dark":r.value,nudge:r.value}]),"data-bs-toggle":"modal","data-bs-target":"#embedScript"},"Add to your Website",2)])])]),u("div",Ge,[Ce(u("input",{class:"form-check-input",type:"checkbox",id:"themer","onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c)},null,512),[[Te,r.value]]),u("label",{class:J(["form-check-label",{"text-white":!r.value}]),for:"themer",style:{"user-select":"none"}},"Dark mode",2)])])],2))}},se=()=>{const e=ee();return Object.fromEntries(Object.keys(e.getters).map(t=>[t,te(()=>e.getters[t])]))},Ze={class:"modal",id:"embedScript",tabindex:"-1"},Je={class:"modal-dialog modal-lg"},Xe=u("div",{class:"modal-header"},[u("h5",{class:"modal-title"},"Add to your Website"),u("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qe={class:"modal-body"},et=u("h5",null,"Embed Code",-1),tt=u("p",null,"Embed this script on your website, and your analytics data will appear here.",-1),st={rows:"4",spellcheck:"false",class:"form-control",id:"script","data-clipboard-target":"#script",style:{resize:"none","font-family":"monospace"}},it=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#script"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),at=u("br",null,null,-1),nt=u("h5",null,"URL to View Analytics",-1),ot=u("p",null,"You will need the following URL to access (and decrypt) your analytics:",-1),rt={rows:"3",spellcheck:"false",class:"form-control",id:"url","data-clipboard-target":"#url",style:{resize:"none","font-family":"monospace"}},lt=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#url"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),ct=u("p",null,[u("small",null,[u("strong",null,"Save your URL."),G(" If you lose this, you will need to reinstall analytics with a new encryption key.")])],-1),ut=u("div",{class:"modal-footer"},[u("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),dt={setup(e){const{key:t,publicKey:r,dark:s}=se();let a={};location.search.slice(1).split("&").map(S=>S.split("=")).forEach(S=>a[S[0]]=S[1]);let c="https://analytics.servers.do",m=te(()=>r.value?`&lt;script>window.__analytics_encryption_key = '${r.value}';&lt;/script>
`:"");const f=te(()=>o(`&lt;!-- Servers.do Analytics -->
${m.value}&lt;script src='${c}/a.js'>&lt;/script>`)),d=te(()=>`${c}?host=${a.host}&range=${a.range}&key=${encodeURIComponent(t.value)}&pkey=${r.value}`);function o(S){return window.$("<textarea />").html(S).text()}return(S,h)=>(F(),z("div",Ze,[u("div",Je,[u("div",{class:J(["modal-content",{"bg-dark":O(s)}])},[Xe,u("div",Qe,[et,tt,u("p",null,[u("textarea",st,M(O(f)),1),it]),at,nt,ot,u("p",null,[u("textarea",rt,M(O(d)),1),lt]),ct]),ut],2)])]))}};const ht={class:"row"},ft={class:"col-6"},mt={class:"nav nav-pills mb-1 d-inline-block"},pt={class:"nav-item dropdown ms-auto"},vt={class:"nav-link dropdown-toggle cp","data-bs-toggle":"dropdown",role:"button"},gt=["src"],yt={class:"d-inline pt-2 mb-0 name"},_t={class:"dropdown-menu websites left"},bt=["onClick"],kt=u("span",{class:"text-success d-none d-md-inline-block dot"},"\xB7",-1),St={class:"current-visitors d-none d-md-inline-block"},wt={class:"col-6"},xt={class:"nav nav-pills mb-1"},$t={class:"nav-item dropdown ms-auto"},Bt={class:"dropdown-menu right"},Ct=u("div",{class:"dropdown-divider"},null,-1),Tt=u("div",{class:"dropdown-divider"},null,-1),Ot=u("div",{class:"dropdown-divider"},null,-1),Lt={setup(e){const t=Y(new Date),r=Y(!1),s=Y("month"),a=Y("month"),c=Y("month"),m={to:new Date(new Date().setDate(new Date().getDate()-32)),from:new Date,preventDisableDateSelection:!0},{host:f,domains:d,range:o,rangeString:S,liveVisitors:h}=se(),_=ee();function i(w,$){_.commit("setRange",w),$||(r.value=!1)}const v=w=>w.charAt(0).toUpperCase()+w.slice(1);function n(){var w=prompt("Enter domain name");if(w){if(w=w.toLowerCase().trim().replace("www.",""),w&&window.history.pushState("","",`?host=${w}&range=${o.value}`),w&&!(d.value||[]).includes(w)){let $=d.value;Array.isArray($)||($=[]),$.includes(w)||$.push(w),localStorage.setItem("__analytics_hosts",JSON.stringify($)),_.commit("setDomains",$)}w&&l(w)}}function l(w){window.history.pushState("","",`?host=${w}&range=${o.value}`),_.commit("setHost",w)}function y(w){w==="month"?(s.value="month",a.value="month",c.value="month",_.commit("setRangeString","Custom month:")):w==="year"?(s.value="year",a.value="year",c.value="year",_.commit("setRangeString","Custom year:")):w==="day"&&(s.value="day",a.value="day",c.value="day",_.commit("setRangeString","Custom day:")),document.querySelector(".dropdown-menu.right.show").classList.remove("show"),r.value=!0,setTimeout(()=>{document.querySelector(".vuejs3-datepicker__value").click()},123)}function x(w){if(s.value==="year"){let T=new Date(w).getFullYear();i(T)}else if(s.value==="month"){let $=new Date(w),T=$.getMonth()+1;i(`${$.getFullYear()}-${T<10?"0":""}${T}`)}else if(s.value==="day"){t.value=new Date(w);let $=new Date-new Date(w),T=Math.floor($/864e5)*-1;i(T)}}return(w,$)=>(F(),z("div",ht,[u("div",ft,[u("ul",mt,[u("li",pt,[u("a",vt,[O(f)?(F(),z("img",{key:0,class:"favicon",src:`https://logo.clearbit.com/${O(f)}`,onerror:"this.src='default.png';"},null,8,gt)):U("",!0),u("h5",yt,M(v(O(f))||"Select a Domain"),1)]),u("div",_t,[(F(!0),z(he,null,_e(O(d),T=>(F(),z("a",{class:"dropdown-item cp",onClick:W=>l(T)},M(v(T)),9,bt))),256)),u("a",{class:"dropdown-item cp",onClick:n},"Add Domain")])])]),kt,u("span",St,"\xA0"+M(O(h)?`${O(h)} current visitor${O(h)==1?"":"s"}`:"No current visitors"),1)]),u("div",wt,[u("ul",xt,[u("li",$t,[u("a",{class:J(["nav-link right cp",{"dropdown-toggle":!r.value}]),"data-bs-toggle":"dropdown",role:"button"},M(O(S)),3),u("div",Bt,[u("a",{class:"dropdown-item cp",onClick:$[0]||($[0]=T=>i(1))},"Latest"),u("a",{class:"dropdown-item cp",onClick:$[1]||($[1]=T=>i(-1))},"Yesterday"),u("a",{class:"dropdown-item cp",onClick:$[2]||($[2]=T=>{y("day")})},"Custom Day"),Ct,u("a",{class:"dropdown-item cp",onClick:$[3]||($[3]=T=>i(7))},"Last 7 Days"),u("a",{class:"dropdown-item cp",onClick:$[4]||($[4]=T=>i(14))},"1 week ago"),u("a",{class:"dropdown-item cp",onClick:$[5]||($[5]=T=>i(21))},"2 weeks ago"),u("a",{class:"dropdown-item cp",onClick:$[6]||($[6]=T=>i(28))},"3 weeks ago"),Tt,u("a",{class:"dropdown-item cp",onClick:$[7]||($[7]=T=>i(30))},"Last 30 Days"),Ot,u("a",{class:"dropdown-item cp",onClick:$[8]||($[8]=T=>{y("month")})},"Custom Month"),u("a",{class:"dropdown-item cp",onClick:$[9]||($[9]=T=>{y("year")})},"Custom Year")])]),r.value?(F(),be(O(Oe),{key:0,name:"datepick",value:t.value,"disabled-dates":a.value=="day"?m:null,"initial-view":s.value,"minimum-view":a.value,"maximum-view":c.value,onInput:x},null,8,["value","disabled-dates","initial-view","minimum-view","maximum-view"])):U("",!0)])])]))}};var R=R||function(e,t){var r={},s=r.lib={},a=function(){},c=s.Base={extend:function(i){a.prototype=this;var v=new a;return i&&v.mixIn(i),v.hasOwnProperty("init")||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var i=this.extend();return i.init.apply(i,arguments),i},init:function(){},mixIn:function(i){for(var v in i)i.hasOwnProperty(v)&&(this[v]=i[v]);i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.init.prototype.extend(this)}},m=s.WordArray=c.extend({init:function(i,v){i=this.words=i||[],this.sigBytes=v!=t?v:4*i.length},toString:function(i){return(i||d).stringify(this)},concat:function(i){var v=this.words,n=i.words,l=this.sigBytes;if(i=i.sigBytes,this.clamp(),l%4)for(var y=0;y<i;y++)v[l+y>>>2]|=(n[y>>>2]>>>24-8*(y%4)&255)<<24-8*((l+y)%4);else if(65535<n.length)for(y=0;y<i;y+=4)v[l+y>>>2]=n[y>>>2];else v.push.apply(v,n);return this.sigBytes+=i,this},clamp:function(){var i=this.words,v=this.sigBytes;i[v>>>2]&=4294967295<<32-8*(v%4),i.length=e.ceil(v/4)},clone:function(){var i=c.clone.call(this);return i.words=this.words.slice(0),i},random:function(i){for(var v=[],n=0;n<i;n+=4)v.push(4294967296*e.random()|0);return new m.init(v,i)}}),f=r.enc={},d=f.Hex={stringify:function(i){var v=i.words;i=i.sigBytes;for(var n=[],l=0;l<i;l++){var y=v[l>>>2]>>>24-8*(l%4)&255;n.push((y>>>4).toString(16)),n.push((y&15).toString(16))}return n.join("")},parse:function(i){for(var v=i.length,n=[],l=0;l<v;l+=2)n[l>>>3]|=parseInt(i.substr(l,2),16)<<24-4*(l%8);return new m.init(n,v/2)}},o=f.Latin1={stringify:function(i){var v=i.words;i=i.sigBytes;for(var n=[],l=0;l<i;l++)n.push(String.fromCharCode(v[l>>>2]>>>24-8*(l%4)&255));return n.join("")},parse:function(i){for(var v=i.length,n=[],l=0;l<v;l++)n[l>>>2]|=(i.charCodeAt(l)&255)<<24-8*(l%4);return new m.init(n,v)}},S=f.Utf8={stringify:function(i){try{return decodeURIComponent(escape(o.stringify(i)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(i){return o.parse(unescape(encodeURIComponent(i)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(i){typeof i=="string"&&(i=S.parse(i)),this._data.concat(i),this._nDataBytes+=i.sigBytes},_process:function(i){var v=this._data,n=v.words,l=v.sigBytes,y=this.blockSize,x=l/(4*y),x=i?e.ceil(x):e.max((x|0)-this._minBufferSize,0);if(i=x*y,l=e.min(4*i,l),i){for(var w=0;w<i;w+=y)this._doProcessBlock(n,w);w=n.splice(0,i),v.sigBytes-=l}return new m.init(w,l)},clone:function(){var i=c.clone.call(this);return i._data=this._data.clone(),i},_minBufferSize:0});s.Hasher=h.extend({cfg:c.extend(),init:function(i){this.cfg=this.cfg.extend(i),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(i){return this._append(i),this._process(),this},finalize:function(i){return i&&this._append(i),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(v,n){return new i.init(n).finalize(v)}},_createHmacHelper:function(i){return function(v,n){return new _.HMAC.init(i,n).finalize(v)}}});var _=r.algo={};return r}(Math);(function(){var e=R,t=e.lib.WordArray;e.enc.Base64={stringify:function(r){var s=r.words,a=r.sigBytes,c=this._map;r.clamp(),r=[];for(var m=0;m<a;m+=3)for(var f=(s[m>>>2]>>>24-8*(m%4)&255)<<16|(s[m+1>>>2]>>>24-8*((m+1)%4)&255)<<8|s[m+2>>>2]>>>24-8*((m+2)%4)&255,d=0;4>d&&m+.75*d<a;d++)r.push(c.charAt(f>>>6*(3-d)&63));if(s=c.charAt(64))for(;r.length%4;)r.push(s);return r.join("")},parse:function(r){var s=r.length,a=this._map,c=a.charAt(64);c&&(c=r.indexOf(c),c!=-1&&(s=c));for(var c=[],m=0,f=0;f<s;f++)if(f%4){var d=a.indexOf(r.charAt(f-1))<<2*(f%4),o=a.indexOf(r.charAt(f))>>>6-2*(f%4);c[m>>>2]|=(d|o)<<24-8*(m%4),m++}return t.create(c,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(h,_,i,v,n,l,y){return h=h+(_&i|~_&v)+n+y,(h<<l|h>>>32-l)+_}function r(h,_,i,v,n,l,y){return h=h+(_&v|i&~v)+n+y,(h<<l|h>>>32-l)+_}function s(h,_,i,v,n,l,y){return h=h+(_^i^v)+n+y,(h<<l|h>>>32-l)+_}function a(h,_,i,v,n,l,y){return h=h+(i^(_|~v))+n+y,(h<<l|h>>>32-l)+_}for(var c=R,m=c.lib,f=m.WordArray,d=m.Hasher,m=c.algo,o=[],S=0;64>S;S++)o[S]=4294967296*e.abs(e.sin(S+1))|0;m=m.MD5=d.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,_){for(var i=0;16>i;i++){var v=_+i,n=h[v];h[v]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var i=this._hash.words,v=h[_+0],n=h[_+1],l=h[_+2],y=h[_+3],x=h[_+4],w=h[_+5],$=h[_+6],T=h[_+7],W=h[_+8],L=h[_+9],E=h[_+10],D=h[_+11],q=h[_+12],I=h[_+13],A=h[_+14],C=h[_+15],g=i[0],p=i[1],b=i[2],k=i[3],g=t(g,p,b,k,v,7,o[0]),k=t(k,g,p,b,n,12,o[1]),b=t(b,k,g,p,l,17,o[2]),p=t(p,b,k,g,y,22,o[3]),g=t(g,p,b,k,x,7,o[4]),k=t(k,g,p,b,w,12,o[5]),b=t(b,k,g,p,$,17,o[6]),p=t(p,b,k,g,T,22,o[7]),g=t(g,p,b,k,W,7,o[8]),k=t(k,g,p,b,L,12,o[9]),b=t(b,k,g,p,E,17,o[10]),p=t(p,b,k,g,D,22,o[11]),g=t(g,p,b,k,q,7,o[12]),k=t(k,g,p,b,I,12,o[13]),b=t(b,k,g,p,A,17,o[14]),p=t(p,b,k,g,C,22,o[15]),g=r(g,p,b,k,n,5,o[16]),k=r(k,g,p,b,$,9,o[17]),b=r(b,k,g,p,D,14,o[18]),p=r(p,b,k,g,v,20,o[19]),g=r(g,p,b,k,w,5,o[20]),k=r(k,g,p,b,E,9,o[21]),b=r(b,k,g,p,C,14,o[22]),p=r(p,b,k,g,x,20,o[23]),g=r(g,p,b,k,L,5,o[24]),k=r(k,g,p,b,A,9,o[25]),b=r(b,k,g,p,y,14,o[26]),p=r(p,b,k,g,W,20,o[27]),g=r(g,p,b,k,I,5,o[28]),k=r(k,g,p,b,l,9,o[29]),b=r(b,k,g,p,T,14,o[30]),p=r(p,b,k,g,q,20,o[31]),g=s(g,p,b,k,w,4,o[32]),k=s(k,g,p,b,W,11,o[33]),b=s(b,k,g,p,D,16,o[34]),p=s(p,b,k,g,A,23,o[35]),g=s(g,p,b,k,n,4,o[36]),k=s(k,g,p,b,x,11,o[37]),b=s(b,k,g,p,T,16,o[38]),p=s(p,b,k,g,E,23,o[39]),g=s(g,p,b,k,I,4,o[40]),k=s(k,g,p,b,v,11,o[41]),b=s(b,k,g,p,y,16,o[42]),p=s(p,b,k,g,$,23,o[43]),g=s(g,p,b,k,L,4,o[44]),k=s(k,g,p,b,q,11,o[45]),b=s(b,k,g,p,C,16,o[46]),p=s(p,b,k,g,l,23,o[47]),g=a(g,p,b,k,v,6,o[48]),k=a(k,g,p,b,T,10,o[49]),b=a(b,k,g,p,A,15,o[50]),p=a(p,b,k,g,w,21,o[51]),g=a(g,p,b,k,q,6,o[52]),k=a(k,g,p,b,y,10,o[53]),b=a(b,k,g,p,E,15,o[54]),p=a(p,b,k,g,n,21,o[55]),g=a(g,p,b,k,W,6,o[56]),k=a(k,g,p,b,C,10,o[57]),b=a(b,k,g,p,$,15,o[58]),p=a(p,b,k,g,I,21,o[59]),g=a(g,p,b,k,x,6,o[60]),k=a(k,g,p,b,D,10,o[61]),b=a(b,k,g,p,l,15,o[62]),p=a(p,b,k,g,L,21,o[63]);i[0]=i[0]+g|0,i[1]=i[1]+p|0,i[2]=i[2]+b|0,i[3]=i[3]+k|0},_doFinalize:function(){var h=this._data,_=h.words,i=8*this._nDataBytes,v=8*h.sigBytes;_[v>>>5]|=128<<24-v%32;var n=e.floor(i/4294967296);for(_[(v+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,_[(v+64>>>9<<4)+14]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,h.sigBytes=4*(_.length+1),this._process(),h=this._hash,_=h.words,i=0;4>i;i++)v=_[i],_[i]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360;return h},clone:function(){var h=d.clone.call(this);return h._hash=this._hash.clone(),h}}),c.MD5=d._createHelper(m),c.HmacMD5=d._createHmacHelper(m)})(Math);(function(){var e=R,t=e.lib,r=t.Base,s=t.WordArray,t=e.algo,a=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,m){for(var f=this.cfg,d=f.hasher.create(),o=s.create(),S=o.words,h=f.keySize,f=f.iterations;S.length<h;){_&&d.update(_);var _=d.update(c).finalize(m);d.reset();for(var i=1;i<f;i++)_=d.finalize(_),d.reset();o.concat(_)}return o.sigBytes=4*h,o}});e.EvpKDF=function(c,m,f){return a.create(f).compute(c,m)}})();R.lib.Cipher||function(e){var t=R,r=t.lib,s=r.Base,a=r.WordArray,c=r.BufferedBlockAlgorithm,m=t.enc.Base64,f=t.algo.EvpKDF,d=r.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(n,l){return this.create(this._ENC_XFORM_MODE,n,l)},createDecryptor:function(n,l){return this.create(this._DEC_XFORM_MODE,n,l)},init:function(n,l,y){this.cfg=this.cfg.extend(y),this._xformMode=n,this._key=l,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(l,y,x){return(typeof y=="string"?v:i).encrypt(n,l,y,x)},decrypt:function(l,y,x){return(typeof y=="string"?v:i).decrypt(n,l,y,x)}}}});r.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var o=t.mode={},S=function(n,l,y){var x=this._iv;x?this._iv=e:x=this._prevBlock;for(var w=0;w<y;w++)n[l+w]^=x[w]},h=(r.BlockCipherMode=s.extend({createEncryptor:function(n,l){return this.Encryptor.create(n,l)},createDecryptor:function(n,l){return this.Decryptor.create(n,l)},init:function(n,l){this._cipher=n,this._iv=l}})).extend();h.Encryptor=h.extend({processBlock:function(n,l){var y=this._cipher,x=y.blockSize;S.call(this,n,l,x),y.encryptBlock(n,l),this._prevBlock=n.slice(l,l+x)}}),h.Decryptor=h.extend({processBlock:function(n,l){var y=this._cipher,x=y.blockSize,w=n.slice(l,l+x);y.decryptBlock(n,l),S.call(this,n,l,x),this._prevBlock=w}}),o=o.CBC=h,h=(t.pad={}).Pkcs7={pad:function(n,l){for(var y=4*l,y=y-n.sigBytes%y,x=y<<24|y<<16|y<<8|y,w=[],$=0;$<y;$+=4)w.push(x);y=a.create(w,y),n.concat(y)},unpad:function(n){n.sigBytes-=n.words[n.sigBytes-1>>>2]&255}},r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:o,padding:h}),reset:function(){d.reset.call(this);var n=this.cfg,l=n.iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var y=n.createEncryptor;else y=n.createDecryptor,this._minBufferSize=1;this._mode=y.call(n,this,l&&l.words)},_doProcessBlock:function(n,l){this._mode.processBlock(n,l)},_doFinalize:function(){var n=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){n.pad(this._data,this.blockSize);var l=this._process(!0)}else l=this._process(!0),n.unpad(l);return l},blockSize:4});var _=r.CipherParams=s.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),o=(t.format={}).OpenSSL={stringify:function(n){var l=n.ciphertext;return n=n.salt,(n?a.create([1398893684,1701076831]).concat(n).concat(l):l).toString(m)},parse:function(n){n=m.parse(n);var l=n.words;if(l[0]==1398893684&&l[1]==1701076831){var y=a.create(l.slice(2,4));l.splice(0,4),n.sigBytes-=16}return _.create({ciphertext:n,salt:y})}},i=r.SerializableCipher=s.extend({cfg:s.extend({format:o}),encrypt:function(n,l,y,x){x=this.cfg.extend(x);var w=n.createEncryptor(y,x);return l=w.finalize(l),w=w.cfg,_.create({ciphertext:l,key:y,iv:w.iv,algorithm:n,mode:w.mode,padding:w.padding,blockSize:n.blockSize,formatter:x.format})},decrypt:function(n,l,y,x){return x=this.cfg.extend(x),l=this._parse(l,x.format),n.createDecryptor(y,x).finalize(l.ciphertext)},_parse:function(n,l){return typeof n=="string"?l.parse(n,this):n}}),t=(t.kdf={}).OpenSSL={execute:function(n,l,y,x){return x||(x=a.random(8)),n=f.create({keySize:l+y}).compute(n,x),y=a.create(n.words.slice(l),4*y),n.sigBytes=4*l,_.create({key:n,iv:y,salt:x})}},v=r.PasswordBasedCipher=i.extend({cfg:i.cfg.extend({kdf:t}),encrypt:function(n,l,y,x){return x=this.cfg.extend(x),y=x.kdf.execute(y,n.keySize,n.ivSize),x.iv=y.iv,n=i.encrypt.call(this,n,l,y.key,x),n.mixIn(y),n},decrypt:function(n,l,y,x){return x=this.cfg.extend(x),l=this._parse(l,x.format),y=x.kdf.execute(y,n.keySize,n.ivSize,l.salt),x.iv=y.iv,i.decrypt.call(this,n,l,y.key,x)}})}();(function(){for(var e=R,t=e.lib.BlockCipher,W=e.algo,r=[],s=[],a=[],c=[],m=[],f=[],d=[],o=[],S=[],h=[],_=[],i=0;256>i;i++)_[i]=128>i?i<<1:i<<1^283;for(var v=0,n=0,i=0;256>i;i++){var l=n^n<<1^n<<2^n<<3^n<<4,l=l>>>8^l&255^99;r[v]=l,s[l]=v;var y=_[v],x=_[y],w=_[x],$=257*_[l]^16843008*l;a[v]=$<<24|$>>>8,c[v]=$<<16|$>>>16,m[v]=$<<8|$>>>24,f[v]=$,$=16843009*w^65537*x^257*y^16843008*v,d[l]=$<<24|$>>>8,o[l]=$<<16|$>>>16,S[l]=$<<8|$>>>24,h[l]=$,v?(v=y^_[_[_[w^y]]],n^=_[_[n]]):v=n=1}var T=[0,1,2,4,8,16,32,64,128,27,54],W=W.AES=t.extend({_doReset:function(){for(var L=this._key,E=L.words,D=L.sigBytes/4,L=4*((this._nRounds=D+6)+1),q=this._keySchedule=[],I=0;I<L;I++)if(I<D)q[I]=E[I];else{var A=q[I-1];I%D?6<D&&I%D==4&&(A=r[A>>>24]<<24|r[A>>>16&255]<<16|r[A>>>8&255]<<8|r[A&255]):(A=A<<8|A>>>24,A=r[A>>>24]<<24|r[A>>>16&255]<<16|r[A>>>8&255]<<8|r[A&255],A^=T[I/D|0]<<24),q[I]=q[I-D]^A}for(E=this._invKeySchedule=[],D=0;D<L;D++)I=L-D,A=D%4?q[I]:q[I-4],E[D]=4>D||4>=I?A:d[r[A>>>24]]^o[r[A>>>16&255]]^S[r[A>>>8&255]]^h[r[A&255]]},encryptBlock:function(L,E){this._doCryptBlock(L,E,this._keySchedule,a,c,m,f,r)},decryptBlock:function(L,E){var D=L[E+1];L[E+1]=L[E+3],L[E+3]=D,this._doCryptBlock(L,E,this._invKeySchedule,d,o,S,h,s),D=L[E+1],L[E+1]=L[E+3],L[E+3]=D},_doCryptBlock:function(L,E,D,q,I,A,C,g){for(var p=this._nRounds,b=L[E]^D[0],k=L[E+1]^D[1],K=L[E+2]^D[2],P=L[E+3]^D[3],V=4,Q=1;Q<p;Q++)var ce=q[b>>>24]^I[k>>>16&255]^A[K>>>8&255]^C[P&255]^D[V++],ue=q[k>>>24]^I[K>>>16&255]^A[P>>>8&255]^C[b&255]^D[V++],de=q[K>>>24]^I[P>>>16&255]^A[b>>>8&255]^C[k&255]^D[V++],P=q[P>>>24]^I[b>>>16&255]^A[k>>>8&255]^C[K&255]^D[V++],b=ce,k=ue,K=de;ce=(g[b>>>24]<<24|g[k>>>16&255]<<16|g[K>>>8&255]<<8|g[P&255])^D[V++],ue=(g[k>>>24]<<24|g[K>>>16&255]<<16|g[P>>>8&255]<<8|g[b&255])^D[V++],de=(g[K>>>24]<<24|g[P>>>16&255]<<16|g[b>>>8&255]<<8|g[k&255])^D[V++],P=(g[P>>>24]<<24|g[b>>>16&255]<<16|g[k>>>8&255]<<8|g[K&255])^D[V++],L[E]=ce,L[E+1]=ue,L[E+2]=de,L[E+3]=P},keySize:8});e.AES=t._createHelper(W)})();R.mode.CTR=function(){var e=R.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,s){var a=this._cipher,c=a.blockSize,m=this._iv,f=this._counter;m&&(f=this._counter=m.slice(0),this._iv=void 0);var d=f.slice(0);a.encryptBlock(d,0),f[c-1]=f[c-1]+1|0;for(var o=0;o<c;o++)r[s+o]^=d[o]}});return e.Decryptor=t,e}();(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},t.bitshift=function(r,s){var a=0,c=r.words,m,f=0,d;if(s>0){for(;s>31;)c.splice(0,1),c.push(0),s-=32,f++;if(s==0)return a;for(var o=c.length-f-1;o>=0;o--)m=c[o],c[o]<<=s,c[o]|=a,a=m>>>32-s}else if(s<0){for(;s<-31;)c.splice(0,0,0),c.length--,s+=32,f++;if(s==0)return a;s=-s,d=(1<<s)-1;for(var o=f;o<c.length;o++)m=c[o]&d,c[o]>>>=s,c[o]|=a,a=m<<32-s}return a},t.neg=function(r){for(var s=r.words,a=0;a<s.length;a++)s[a]=~s[a];return r},t.xor=function(r,s){for(var a=0;a<r.words.length;a++)r.words[a]^=s.words[a];return r},t.bitand=function(r,s){for(var a=r.clone(),c=a.words,m=s.words,f=0;f<c.length;f++)c[f]&=m[f];return a}})(R);(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},e.lib.Base;var r=e.lib.WordArray;e.algo.AES,t.const_Zero=r.create([0,0,0,0]),t.const_One=r.create([0,0,0,1]),t.const_Rb=r.create([0,0,0,135]),t.const_Rb_Shifted=r.create([2147483648,0,0,67]),t.const_nonMSB=r.create([4294967295,4294967295,2147483647,2147483647]),t.isWordArray=function(s){return s&&typeof s.clamp=="function"&&typeof s.concat=="function"&&typeof s.words=="array"},e.pad.OneZeroPadding={pad:function(s,a){for(var c=a*4,m=c-s.sigBytes%c,f=[],d=0;d<m;d+=4){var o=0;d===0&&(o=2147483648),f.push(o)}var S=r.create(f,m);s.concat(S)},unpad:function(){}},e.pad.NoPadding={pad:function(){},unpad:function(){}},t.leftmostBytes=function(s,a){var c=s.clone();return c.sigBytes=a,c.clamp(),c},t.rightmostBytes=function(s,a){s.clamp();var c=32,m=s.clone(),f=(m.sigBytes-a)*8;if(f>=c){var d=Math.floor(f/c);f-=d*c,m.words.splice(0,d),m.sigBytes-=d*c/8}return f>0&&(t.bitshift(m,f),m.sigBytes-=f/8),m},t.popWords=function(s,a){var c=t.leftmostBytes(s,a*4);return s.words=s.words.slice(a),s.sigBytes-=a*4,c},t.shiftBytes=function(s,a){a=a||16;var c=a%4;a-=c;for(var m=r.create(),f=0;f<a;f+=4)m.words.push(s.words.shift()),s.sigBytes-=4,m.sigBytes+=4;return c>0&&(m.words.push(s.words[0]),m.sigBytes+=c,t.bitshift(s,c*8),s.sigBytes-=c),m},t.xorendBytes=function(s,a){return t.leftmostBytes(s,s.sigBytes-a.sigBytes).concat(t.xor(t.rightmostBytes(s,a.sigBytes),a))},t.dbl=function(s){var a=t.msb(s);return t.bitshift(s,1),t.xor(s,a===1?t.const_Rb:t.const_Zero),s},t.inv=function(s){var a=s.words[4]&1;return t.bitshift(s,-1),t.xor(s,a===1?t.const_Rb_Shifted:t.const_Zero),s},t.equals=function(s,a){if(!a||!a.words||s.sigBytes!==a.sigBytes)return!1;s.clamp(),a.clamp();for(var c=0,m=0;m<s.words.length;m++)c|=s.words[m]^a.words[m];return c===0},t.msb=function(s){return s.words[0]>>>31}})(R);(function(e){var t=e.lib.Base,r=e.lib.WordArray,s=e.algo.AES,a=e.ext,c=e.pad.OneZeroPadding;function m(d,o){var S=s.createEncryptor(d,{iv:r.create(),padding:e.pad.NoPadding}),h=S.finalize(o);return h}var f=e.algo.CMAC=t.extend({init:function(d){var o=m(d,a.const_Zero),S=o.clone();if(a.dbl(S),this._isTwo){var h=o.clone();a.inv(h)}else{var h=S.clone();a.dbl(h)}this._K1=S,this._K2=h,this._K=d,this._const_Bsize=16,this.reset()},reset:function(){this._x=a.const_Zero.clone(),this._counter=0,this._buffer=r.create()},update:function(d){if(!d)return this;var o=this._buffer,S=this._const_Bsize;for(typeof d=="string"&&(d=e.enc.Utf8.parse(d)),o.concat(d);o.sigBytes>S;){var h=a.shiftBytes(o,S);a.xor(this._x,h),this._x.clamp(),this._x=m(this._K,this._x),this._counter++}return this},finalize:function(d){this.update(d);var o=this._buffer,S=this._const_Bsize,h=o.clone();return o.sigBytes===S?a.xor(h,this._K1):(c.pad(h,S/4),a.xor(h,this._K2)),a.xor(h,this._x),this.reset(),m(this._K,h)},_isTwo:!1});e.CMAC=function(d,o){return f.create(d).finalize(o)},e.algo.OMAC1=f,e.algo.OMAC2=f.extend({_isTwo:!0})})(R);(function(e){var t=e.lib.Base,r=e.lib.WordArray;e.algo.AES;var s=e.ext,a=e.pad.OneZeroPadding,c=e.algo.CMAC,m=e.algo.S2V=t.extend({init:function(f){this._blockSize=16,this._cmacAD=c.create(f),this._cmacPT=c.create(f),this.reset()},reset:function(){this._buffer=r.create(),this._cmacAD.reset(),this._cmacPT.reset(),this._d=this._cmacAD.finalize(s.const_Zero),this._empty=!0,this._ptStarted=!1},updateAAD:function(f){return this._ptStarted?this:f?(typeof f=="string"&&(f=e.enc.Utf8.parse(f)),this._d=s.xor(s.dbl(this._d),this._cmacAD.finalize(f)),this._empty=!1,this):this},update:function(f){if(!f)return this;this._ptStarted=!0;var d=this._buffer,o=this._blockSize,S=o/4,h=this._cmacPT;for(typeof f=="string"&&(f=e.enc.Utf8.parse(f)),d.concat(f);d.sigBytes>=2*o;){this._empty=!1;var _=s.popWords(d,S);h.update(_)}return this},finalize:function(f){this.update(f);var d=this._blockSize,o=this._buffer;if(this._empty&&o.sigBytes===0)return this._cmacAD.finalize(s.const_One);var S;return o.sigBytes>=d?S=s.xorendBytes(o,this._d):(a.pad(o,d),S=s.xor(s.dbl(this._d),o)),this._cmacPT.finalize(S)}});e.SIV=t.extend({init:function(f){var d=f.sigBytes/2;this._s2vKey=s.shiftBytes(f,d),this._ctrKey=f},encrypt:function(f,d){!d&&f&&(d=f,f=[]);var o=m.create(this._s2vKey);Array.prototype.forEach.call(f,function(i){o.updateAAD(i)});var S=o.finalize(d),h=s.bitand(S,s.const_nonMSB),_=e.AES.encrypt(d,this._ctrKey,{iv:h,mode:e.mode.CTR,padding:e.pad.NoPadding});return S.concat(_.ciphertext)},decrypt:function(f,d){!d&&f&&(d=f,f=[]);var o=s.shiftBytes(d,16),S=s.bitand(o,s.const_nonMSB),h=e.AES.decrypt({ciphertext:d},this._ctrKey,{iv:S,mode:e.mode.CTR,padding:e.pad.NoPadding}),_=m.create(this._s2vKey);Array.prototype.forEach.call(f,function(v){_.updateAAD(v)});var i=_.finalize(h);return s.equals(o,i)?h:!1}})})(R);const Dt=new URL("/assets/sqlite.worker.710c9469.js",self.location),Ft=new URL("/assets/sql-wasm.dd613b12.wasm",self.location),At=()=>Math.random().toString(36).substr(2,9);let Se=0;async function zt(e){const t=e.state.key?R.SIV.create(R.enc.Hex.parse(e.state.key)):null;return function(s){if(t)try{let a=t.decrypt(R.enc.Hex.parse(s)).toString(R.enc.Utf8);a&&a!="false"&&(s=a)}catch{}return s}}async function Et(){if(window._worker)return window._worker;if(Se)return new Promise((t,r)=>{function s(){setTimeout(()=>{if(window._worker){t(window._worker);return}s()},50)}s()});Se=1;async function e(){return await Le.exports.createDbWorker([{from:"inline",config:{serverMode:"full",url:`${location.protocol}//${location.host}/analytics.sqlite3.png`,requestChunkSize:1024*32}}],Dt.toString(),Ft.toString())}return window._worker=await e(),window._worker}async function X(e){let t=await Et(),r=At();console.time("query time "+r);let s=await t.db.query(e);return console.log("query",e,s),console.timeEnd("query time "+r),s}function pe(e){return e||(e=new Date),(typeof e!="object"||!e.toISOString)&&(e=new Date(e)),e.toISOString().slice(0,10)}function ae(e,t){let r=[];if(e.state.host&&r.push(`host = '${e.state.host}'`),e.state.host&&e.state.key){const a=R.SIV.create(R.enc.Hex.parse(e.state.key)).encrypt(e.state.host).toString();r[0]=`(${r[0]} OR host = '${a}')`}return e.state.start&&e.state.end&&!t&&r.push(`date BETWEEN '${pe(e.state.start)}' AND '${pe(e.state.end)}'`),(r.length?" WHERE ":"")+(r.join(" AND ")||"")}async function It(e){if(!e.state.host)return[];const t=e.state.key?R.SIV.create(R.enc.Hex.parse(e.state.key)):null;let r=`SELECT pathname, AVG(load_time) as AvgLoadTime from visits${ae(e)} GROUP BY pathname ORDER BY AvgLoadTime DESC LIMIT 10;`,s=await X(r);return t&&s.forEach(a=>{try{let c=t.decrypt(R.enc.Hex.parse(a.pathname)).toString(R.enc.Utf8);c&&c!="false"&&(a.pathname=c)}catch{}}),s}async function we(e,t="hour",r=10){if(!e.state.host)return[];const s=e.state.key?R.SIV.create(R.enc.Hex.parse(e.state.key)):null,a=e.state.showVisitors?"count(DISTINCT ip)":"count(*)";let c=t==="hour"||t==="date",m=c?t:a,f=c?"ASC":"DESC",d=c?"":` LIMIT ${r}`,o=`SELECT ${t}, ${a} FROM visits${ae(e)} GROUP BY ${t} ORDER BY ${m} ${f}${d};`,S=await X(o);return s&&S.forEach(h=>{try{let _=s.decrypt(R.enc.Hex.parse(h[t])).toString(R.enc.Utf8);_&&_!="false"&&(h[t]=_)}catch{}}),S}async function xe(e,t){let r=`SELECT * FROM summaries${ae(e,1)} AND date ${t>1e3&&t<3e3?"LIKE":"="} '${t}${t>1e3&&t<3e3?"-%":""}';`,s={},a=[];(await X(r)).forEach(m=>{let f=JSON.parse(m.data);Object.keys(f).forEach(d=>{typeof f[d]=="number"?(s[d]||(s[d]=0),s[d]+=f[d]):d==="loadTimes"?(s[d]=[],s[d]||(s[d]=[]),a=a.concat(f[d]),a.map(S=>S.pathname).filter((S,h,_)=>_.indexOf(S)===h).forEach(S=>{let h=a.filter(v=>v.pathname=S),i=h.map(v=>v.AvgLoadTime).reduce((v,n)=>v+n,0)/h.length;s[d].push({pathname:S,AvgLoadTime:i})})):typeof f[d]=="object"&&(s[d]||(s[d]={}),Object.keys(f[d]).forEach(o=>{s[d][o]||(s[d][o]=0),s[d][o]+=f[d][o]}))})}),e.commit("setSummary",s)}const j={toObject:function(e){return typeof e=="string"?JSON.parse(e):e},toBoolean:function(e){return typeof e=="string"?e==="true":e},toInt:function(e){return typeof e=="string"?parseInt(e):e}},B={id:{type:String,required:!0},data:{type:[String,Array],required:!0},barColors:{type:[String,Array,Function],required:!1},xkey:{type:String,required:!1,default:"key"},ykeys:{type:[String,Array],required:!1,default:function(){return["value"]}},labels:{type:[String,Array],required:!1,default:function(){return["Value"]}},hoverCallback:{type:Function,required:!1},axes:{type:[Boolean,String],required:!1,default:!0},hideHover:{type:String,required:!1},stacked:{type:[Boolean,String],required:!1},resize:{type:[Boolean,String],required:!1},horizontal:{type:[Boolean,String],required:!1,default:!1},grid:{type:[Boolean,String],required:!1,default:!0},gridTextColor:{type:String,required:!1,default:"#888"},gridTextSize:{type:[Number,String],required:!1,default:12},gridTextFamily:{type:String,required:!1,default:"sans-serif"},gridTextWeight:{type:String,required:!1,default:"normal"},colors:{type:[String,Array],required:!1},formatter:{type:Function,required:!1},lineColors:{type:[String,Array,Function],required:!1},xLabels:{type:String,required:!1},lineWidth:{type:[Number,String],required:!1},pointSize:{type:[Number,String],required:!1},pointFillColors:{type:[String,Array],required:!1},pointStrokeColors:{type:[String,Array],required:!1},ymax:{type:String,required:!1},ymin:{type:String,required:!1},smooth:{type:[Boolean,String],required:!1,default:!0},parseTime:{type:[Boolean,String],required:!1,default:!0},postUnits:{type:String,required:!1},preUnits:{type:String,required:!1},dateFormat:{type:Function,required:!1},xLabelFormat:{type:Function,required:!1},yLabelFormat:{type:Function,required:!1},xLabelAngle:{type:String,required:!1},goals:{type:[String,Array],required:!1},goalStrokeWidth:{type:[Number,String],required:!1},goalLineColors:{type:[String,Array],required:!1},events:{type:[String,Array],required:!1},eventStrokeWidth:{type:String,required:!1},eventLineColors:{type:[String,Array],required:!1},fillOpacity:{type:String,required:!1},behaveLikeLine:{type:[Boolean,String],required:!1,default:!1}},Mt={id:B.id,data:B.data,barColors:B.barColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,hoverCallback:B.hoverCallback,grid:B.grid,horizontal:B.horizontal,axes:B.axes,hideHover:B.hideHover,stacked:B.stacked,resize:B.resize,ymax:B.ymax,ymin:B.ymin,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight},Nt={id:B.id,data:B.data,colors:B.colors,formatter:B.formatter,resize:B.resize},oe={id:B.id,data:B.data,resize:B.resize,lineColors:B.lineColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabels:B.xLabels,grid:B.grid,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight,lineWidth:B.lineWidth,pointSize:B.pointSize,pointFillColors:B.pointFillColors,pointStrokeColors:B.pointStrokeColors,ymax:B.ymax,ymin:B.ymin,smooth:B.smooth,hideHover:B.hideHover,parseTime:B.parseTime,postUnits:B.postUnits,preUnits:B.preUnits,dateFormat:B.dateFormat,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,goals:B.goals,goalStrokeWidth:B.goalStrokeWidth,goalLineColors:B.goalLineColors,events:B.events,eventStrokeWidth:B.eventStrokeWidth,eventLineColors:B.eventLineColors,fillOpacity:B.fillOpacity,hoverCallback:B.hoverCallback},$e={behaveLikeLine:B.behaveLikeLine};for(var ve in oe)oe.hasOwnProperty(ve)&&($e[ve]=oe[ve]);const re={addOption(e,t){this[e]&&(t[e]=this[e])},addOptionAsObject(e,t){this[e]&&(t[e]=j.toObject(this[e]))}};var Rt={bar:{props:Mt,methods:re},donut:{props:Nt,methods:re},line:{props:oe,methods:re},area:{props:$e,methods:re}},ge=(e,t)=>{const r=e.__vccOpts||e;for(const[s,a]of t)r[s]=a;return r};const Pt={name:"area-chart",mixins:[Rt.area],data(){return{chart:null}},watch:{data(e){this.$nextTick(()=>{this.chart.options.labels=j.toObject(this.labels),this.chart.options.xkey=this.xkey,this.chart.options.ykeys=j.toObject(this.ykeys),this.lineColors&&(this.chart.options.lineColors=j.toObject(this.lineColors)),this.chart.setData(j.toObject(this.data))})}},mounted(){let e={element:this.id,data:j.toObject(this.data),resize:j.toBoolean(this.resize),labels:j.toObject(this.labels),xkey:this.xkey,ykeys:j.toObject(this.ykeys),grid:j.toBoolean(this.grid),gridTextColor:this.gridTextColor,gridTextSize:j.toInt(this.gridTextSize),gridTextFamily:this.gridTextFamily,gridTextWeight:this.gridTextWeight,lineWidth:this.lineWidth,pointSize:this.pointSize,ymax:this.ymax,ymin:this.ymin,smooth:j.toBoolean(this.smooth),hideHover:this.hideHover,parseTime:j.toBoolean(this.parseTime),postUnits:this.postUnits,preUnits:this.preUnits,xLabelAngle:this.xLabelAngle,goalStrokeWidth:this.goalStrokeWidth,eventStrokeWidth:this.eventStrokeWidth,fillOpacity:this.fillOpacity,behaveLikeLine:this.behaveLikeLine};this.addOptionAsObject("lineColors",e),this.addOption("xLabels",e),this.addOptionAsObject("pointFillColors",e),this.addOptionAsObject("pointStrokeColors",e),this.addOption("dateFormat",e),this.addOption("xLabelFormat",e),this.addOption("yLabelFormat",e),this.addOptionAsObject("goals",e),this.addOptionAsObject("goalLineColors",e),this.addOptionAsObject("events",e),this.addOptionAsObject("eventLineColors",e),this.addOption("hoverCallback",e),this.chart=Morris.Area(e)}},Vt=["id"];function Wt(e,t,r,s,a,c){return F(),z("div",{id:e.id},null,8,Vt)}var qt=ge(Pt,[["render",Wt]]);const Kt={id:"visits"},Ht={key:0,class:"spinner-border spinme",role:"status"},Ut={key:1},Yt={setup(e){const t=ee();let{start:r,end:s,host:a,range:c,summary:m,showVisitors:f}=se();const d=Y([]),o=Y(!0),S=Y(null),h=te(()=>c.value<2),_=te(()=>h.value?"hour":"date"),i=w=>h.value?new Date(w).toLocaleString():`${new Date(w).toLocaleString(navigator.language||"en-us",{weekday:"long"})},
${new Date(w).toLocaleDateString()}`,v=Y("day");async function n(){if(!a.value)return o.value=!1;if(c.value>1e3?v.value="month":v.value=h.value?"hour":"day",c.value.length===7||c.value>1e3){let C=[],g=JSON.parse(JSON.stringify(m.value)),{pageviewsTimeseries:p,visitorsTimeseries:b}=g;if(!p||!p)return;Object.keys(f.value?b:p).forEach(k=>{C.push({date:k,value:(f.value?b:p)[k]})}),d.value=C,o.value=!1;return}const w=ae(t);let $=w.split(" ").pop().replace("'","").replace("'",""),T=f.value?"count(DISTINCT ip)":"count(*)",W=h.value?"hour":"date";const L=`SELECT ${W}, ${T} FROM visits${w} GROUP BY ${W} ORDER BY ${W} ASC;`;let E=await X(L);E.forEach(C=>{h.value&&(C.hour=+new Date(`${$}T${C.hour<10?"0":""}${C.hour}:00:00Z`)),C.value=C["count(DISTINCT ip)"]||C["count(*)"],delete C["count(DISTINCT ip)"],delete C["count(*)"]}),d.value=E,o.value=!1;const D=`SELECT hour, count(*) FROM visits${ae(t,1)} AND date = '${pe()}' GROUP BY hour`,I=(await X(D)).pop();let A=0;I&&(A=I["count(*)"]),t.commit("setLiveVisitors",A)}function l(w,$,T,W){return W.date&&(S.value=W.date),T}function y(w,$){t.commit("setRange",w)}function x(){if(console.log("chart clicked",S.value),S.value){let w=new Date-new Date(S.value),$=Math.floor(w/864e5)*-1;$>-33&&$<2&&y($)}}return ie(n),H(a,n),H(c,n),H(m,n),H(f,n),(w,$)=>(F(),z("div",Kt,[o.value?(F(),z("div",Ht)):d.value.length?(F(),be(qt,{key:2,id:"line",data:d.value,xkey:O(_),ykey:"value",resize:"true",labels:O(f)?'[ "Visitors" ]':'[ "Pageviews" ]',"line-color":"#2847b7","fill-opacity":"0.16","line-width":"4",dateFormat:i,smooth:!1,xLabelAngle:"45",removed:"","data-xLabelFormat":"labelFormat","data-xLabels":"xLabel",hoverCallback:l,onClick:x,grid:"true","grid-text-weight":"bold"},null,8,["data","xkey","labels"])):(F(),z("div",Ut,"No data for selected period"))]))}};var Gt=ge(Yt,[["__scopeId","data-v-d8b3d90e"]]);const jt={key:0,class:"card-header"},Zt={class:"card-body"},Jt={key:0,class:"card-title"},Xt={key:1,class:"spinner-border spinme",role:"status"},Qt={key:1,class:"card-footer"},ye={props:{header:String,title:String,body:String,footer:String,loading:Boolean},setup(e){const{dark:t}=se();return(r,s)=>(F(),z("div",{class:J(["card min-357",{"bg-dark":O(t)}])},[e.header?(F(),z("div",jt,[fe(r.$slots,"header",{},()=>[G(M(e.header),1)])])):U("",!0),u("div",Zt,[e.title?(F(),z("h5",Jt,M(e.title),1)):U("",!0),e.loading?(F(),z("div",Xt)):U("",!0),fe(r.$slots,"default",{},()=>[G(M(e.body),1)])]),e.footer?(F(),z("div",Qt,[fe(r.$slots,"footer",{},()=>[G(M(e.footer),1)])])):U("",!0)],2))}};const es={class:"col-6 col-md-3"},ts={class:"card-title"},le={props:{title:String,underline:Boolean,muted:{type:Boolean,default:!0}},setup(e){const t=e,r=ee();let s=Y("-");const{host:a,range:c,summary:m}=se();function f(S){return`${(S*100).toFixed(2)}%`}function d(S){return(S-(S%=60))/60+"m "+parseInt(S)}async function o(){if(!r.state.host)return;if(c.value.length===7||c.value>1e3){t.title==="Visitors"?s.value=m.value.visitors:t.title==="Total Pageviews"?s.value=m.value.pageviews:t.title==="Bounce Rate"?s.value=f(m.value.onePageVisits/m.value.visitors):t.title==="Session Length"&&(s.value=d(m.value.sessionLength));return}const S=ae(r);if(t.title==="Visitors"){const h=`SELECT count(DISTINCT ip) from visits${S}`;let _=await X(h);s.value=_[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const h=`SELECT count(*) from VISITS${S}`;let _=await X(h);s.value=_[0]["count(*)"]}else if(t.title==="Bounce Rate"){let h=`SELECT count(DISTINCT ip) from visits${S}`,_=await X(h),i=_[0]["count(DISTINCT ip)"];h=`SELECT count(DISTINCT ip) from visits${S} AND is_new = 1`,_=await X(h);let v=_[0]["count(DISTINCT ip)"];s.value=i===0?0:f(v/i)}else if(t.title==="Session Length"){const h=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${S} GROUP BY ip) x`;let _=await X(h);s.value=d(_[0]["AVG(x.MaxValue)"])||0}}return ie(o),H(a,o),H(c,o),H(m,o),(S,h)=>(F(),z("div",es,[u("h6",{class:J(["card-subtitle mb-2",{"text-muted":e.muted,"text-decoration-underline":e.underline,"link-color":e.underline}])},M(e.title),3),u("h4",ts,M(O(s)),1)]))}},ss={class:"mt-2 pseudotable"},is={key:0,class:"spinner-border spinme",role:"status"},as={key:1,class:"mb-1"},ns={class:"mb-1"},os=G("\xA0 "),rs={key:0,style:{display:"inline-block","margin-left":"-3px"}},ls=G("\xA0\u2009 "),cs={key:1},us={key:2,style:{display:"inline-block"}},ds=["src"],hs=G("\xA0\u2009 "),fs={key:3,style:{display:"inline-block"}},ms=["src"],ps=G("\xA0\u2009 "),vs={key:4,style:{display:"inline-block"}},gs=["src"],ys=G("\xA0\u2009 "),_s={key:5,style:{display:"inline-block"}},bs=["href"],ks={key:6},Ss={class:"float-right text-right pt-1"},Z={props:{column:String,iconify:Boolean,favicons:Boolean,browserIcons:Boolean,osIcons:Boolean,links:Boolean,linkPrefix:String,limit:Number,defaultText:String,valueColumn:String,loadTimes:Boolean,valueFormatter:Function,keyFormatter:Function},setup(e){const{column:t,iconify:r,favicons:s,browserIcons:a,osIcons:c,links:m,linkPrefix:f,limit:d,defaultText:o,valueColumn:S,loadTimes:h,valueFormatter:_,keyFormatter:i}=e,v=ee(),{host:n,range:l,summary:y,showVisitors:x}=se(),w=te(()=>S||(x.value?"count(DISTINCT ip)":"count(*)")),$=Y([]),T=Y(0),W=Y(!0);async function L(){if(l.value.length===7||l.value>1e3){let g=JSON.parse(JSON.stringify(y.value)),p=await zt(v),b=w.value,k=t+(x.value?"__visitors":"");h&&(k="loadTimes");let K=g[k];if(K){let P=[];h?P=K:Object.keys(K).forEach(V=>{let Q={};parseInt(V)==V&&(V=parseInt(V)),V=="null"&&(V=null),Q[b]=K[V],Q[t]=V,P.push(Q)}),P.sort((V,Q)=>Q[b]-V[b]),P.forEach(V=>V[t]=p(V[t])),P.length>10&&(P=P.slice(0,10)),$.value=P;try{T.value=P[0][b]}catch{T.value=0}W.value=!1}return}let C=h?await It(v):await we(v,t,d||10);$.value=C;try{T.value=C[0][w.value]}catch{T.value=0}W.value=!1}function E(C,g=48,p="web"){const b="avant,basilisk,brave,browsh,chrome,chromium,deno,dolphin,edge,electron,epic,falkon,firefox,geckoview,hermes,icecat,jsdom,konqueror,maxthon,midori,netsurf,node.js,nw.js,opera,otter,puffin,qutebrowser,safari,seamonkey,servo,silk,spidermonkey,tor,uc,v8,vivaldi,web,webkit,yandex".split(","),k=C.toLowerCase().trim().split(" ");let K=b.filter(P=>k.includes(P));return K.length&&(p=K[0]),`https://cdnjs.cloudflare.com/ajax/libs/browser-logos/72.0.0/${p}/${p}_${g}x${g}.png`}function D(C){const g="AIX,AND,AMG,ATV,ARL,BTR,SBA,BEO,BLB,QNX,CAI,CES,COS,CYN,DEB,DEE,DFB,FED,FOS,FIR,BSD,FYD,GNT,GTV,HPX,HAI,IPA,HAR,KOS,KNO,KBT,LIN,LBT,MAC,MAE,MAG,MDR,SMG,MIN,MOR,NBS,WII,NDS,OS2,OBS,OWR,PCL,PSP,PS3,RHT,ROS,ROK,RSO,REM,REX,SAB,SSE,SAF,SLW,SOS,SYL,SYM,SYS,S40,S60,SY3,TDX,TIZ,UBT,WAS,WHS,WIN,WCE,WIO,WMO,WPH,WRT,XBX,XBT,YNS,IOS,POS,WOS".split(","),p="aix,android,amigaos,tvos,arch linux,backtrack,bada,beos,blackberry os,blackberry tablet os,caixa m\xE1gica,centos,chrome os,cyanogenmod,debian,deepin,dragonfly,fedora,firefox os,fire os,freebsd,fydeos,gentoo,google tv,hp-ux,haiku os,ipados,harmonyos,kaios,knoppix,kubuntu,linux,lubuntu,mac,maemo,mageia,mandriva,meego,mint,morphos,netbsd,nintendo,nintendo mobile,os/2,openbsd,openwrt,pclinuxos,playstation portable,playstation,red hat,risc os,roku os,rosa,remix os,rex,sabayon,suse,sailfish os,slackware,solaris,syllable,symbian,symbian os,symbian os series 40,symbian os series 60,symbian^3,threadx,tizen,ubuntu,watchos,whale os,windows,windows ce,windows iot,windows mobile,windows phone,windows rt,xbox,xubuntu,yunos,ios,palmos,webos".split(","),b="16,24,32,48,64,128,256,512".split(",");let k="",K=b[3];C=C.toLowerCase().trim();let P=p.map(V=>C.includes(V)).indexOf(!0);return P>0&&(k=g[P]),k?`https://cdn.jsdelivr.net/npm/@egoistdeveloper/operating-system-logos/src/${K}x${K}/${k}.png`:"/default.png"}function q(C){return C=(C+"").toLowerCase().trim(),{desktop:"bi bi-pc-display-horizontal",laptop:"bi bi-laptop",tablet:"bi bi-tablet",mobile:"bi bi-phone",returning:"bi bi-arrow-repeat",new:"bi bi-person-plus","normal users":"bi bi-person-square","headless browsers":"bi bi-robot"}[C]}function I(C){return C=(C+"").toLowerCase().trim(),C.indexOf("http")===0&&(C=new URL(C).hostname),C}function A(C,g=40){return C&&C.length>g&&(C=C.substring(0,g)+"..."),C}return ie(L),H(n,L),H(l,L),H(y,L),H(x,L),(C,g)=>(F(),z("div",ss,[W.value?(F(),z("div",is)):$.value.length?(F(!0),z(he,{key:2},_e($.value,p=>(F(),z("div",ns,[u("div",{class:"shaded d-inline-block bg-grey text-nowrap pt-1 pb-1",style:De(`width: ${p[O(w)]/T.value*85}%`)},[os,e.iconify&&q(e.keyFormatter?e.keyFormatter(p[e.column]):p[e.column])?(F(),z("div",rs,[u("i",{class:J(q(e.keyFormatter?e.keyFormatter(p[e.column]):p[e.column]))},null,2),ls])):U("",!0),p[e.column]?U("",!0):(F(),z("span",cs,M(e.defaultText||"None"),1)),e.favicons?(F(),z("div",us,[p[e.column]&&e.favicons?(F(),z("img",{key:0,src:`https://logo.clearbit.com/${I(p[e.column])}`,onerror:"this.onerror=null; this.src='default.png';"},null,8,ds)):U("",!0),hs])):U("",!0),e.browserIcons?(F(),z("div",fs,[p[e.column]&&e.browserIcons?(F(),z("img",{key:0,src:`${E(p[e.column])}`},null,8,ms)):U("",!0),ps])):U("",!0),e.osIcons?(F(),z("div",vs,[p[e.column]&&e.osIcons?(F(),z("img",{key:0,src:`${D(p[e.column])}`},null,8,gs)):U("",!0),ys])):U("",!0),e.links?(F(),z("div",_s,[p[e.column]&&e.links?(F(),z("a",{key:0,class:"d-inline-block text-truncate",href:`${p[e.column].indexOf("http")?"http://":""}${e.linkPrefix||""}${p[e.column]}`,target:"_blank"},M(A(p[e.column])),9,bs)):U("",!0)])):U("",!0),p[e.column]&&!e.links?(F(),z("span",ks,M(e.keyFormatter?e.keyFormatter(p[e.column]):p[e.column]),1)):U("",!0)],4),u("span",Ss,M(e.valueFormatter?e.valueFormatter(p[O(w)]):p[O(w)]),1)]))),256)):(F(),z("div",as," No data for selected period "))]))}},ws={name:"svg-map",data(){return{id:"svg-map-"+Math.random().toString(36).substr(2,9)}},props:{countries:{type:Object},dark:{type:Boolean},showVisitors:{type:Boolean}},methods:{createMap(){let e={};this.showVisitors?e.visitors={name:"visitors",format:"{0}",thousandSeparator:","}:e.pageviews={name:"pageviews",format:"{0}",thousandSeparator:","},new svgMap({targetElementID:this.id,colorMax:this.dark?"#4c9be8":"#3459E6",colorMin:"#c7d2fc",colorNoData:this.dark?"rgb(78, 93, 108)":"#E2E2E2",data:{data:e,applyData:this.showVisitors?"visitors":"pageviews",values:this.countries||{}}})}},computed:{bundle(){let{countries:e,dark:t}=this;return{countries:e,dark:t}}},mounted(){this.createMap()},watch:{bundle(e){this.$refs.svgMap.innerHTML="",this.$nextTick(()=>{this.createMap()})}}},xs=["id"];function $s(e,t,r,s,a,c){return F(),z("div",{id:a.id,ref:"svgMap"},null,8,xs)}var Bs=ge(ws,[["render",$s]]);const Cs={class:"container mt-5"},Ts={class:"row"},Os={class:"col-md-12"},Ls={class:"row"},Ds={class:"row mt-3"},Fs={class:"col-md-6"},As={class:"card-body"},zs=ke('<h5 class="card-title float-left" style="margin-bottom:-37px;">Sources</h5><ul class="nav nav-tabs float-right"><li class="nav-item ms-auto"><a class="nav-link active" data-bs-toggle="tab" href="#referrers"><span class="d-none d-sm-inline">Referrers</span><span class="d-inline d-sm-none">All</span></a></li><li class="nav-item ms-auto"><a class="nav-link" data-bs-toggle="tab" href="#referrer_urls">URLs</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#medium">Medium</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#source">Source</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#campaign">Campaign</a></li></ul>',2),Es={class:"tab-content mt-5"},Is={class:"tab-pane fade active show",id:"referrers"},Ms=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Ns={class:"text-muted w-495 d-inline-block text-right"},Rs={class:"tab-pane fade show",id:"referrer_urls"},Ps=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Vs={class:"text-muted w-495 d-inline-block text-right"},Ws={class:"tab-pane fade show",id:"medium"},qs=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Ks={class:"text-muted w-495 d-inline-block text-right"},Hs={class:"tab-pane fade show",id:"source"},Us=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Ys={class:"text-muted w-495 d-inline-block text-right"},Gs={class:"tab-pane fade show",id:"campaign"},js=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Zs={class:"text-muted w-495 d-inline-block text-right"},Js={class:"col-md-6 mt-3 mt-sm-0"},Xs={class:"card-body"},Qs=ke('<h5 class="card-title float-left" style="margin-bottom:-37px;">Pages</h5><ul class="nav nav-tabs float-right"><li class="nav-item ms-auto"><a class="nav-link active" data-bs-toggle="tab" href="#pages">Top Pages</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#loadtimes">Load Times</a></li></ul>',2),ei={class:"tab-content mt-5"},ti={class:"tab-pane fade show active",id:"pages"},si=u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1),ii={class:"text-muted w-495 d-inline-block text-right"},ai={class:"tab-pane fade show",id:"loadtimes"},ni=u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1),oi=u("small",{class:"text-muted w-495 d-inline-block text-right"},"Avg. Load Time",-1),ri={class:"row mt-3"},li={class:"col-md-6"},ci={class:"col-md-6 mt-3 mt-sm-0"},ui=u("h5",{class:"card-title float-left",style:{"margin-bottom":"-37px"}},"Users",-1),di=u("ul",{class:"nav nav-tabs float-right"},[u("li",{class:"nav-item ms-auto"},[u("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#size"},[u("span",{class:"d-none d-sm-inline"},"Device "),G("Type")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link d-none d-sm-inline-block","data-bs-toggle":"tab",href:"#new"},"Returning")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#browser"},"Browser")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#language"},[G("Lang"),u("span",{class:"d-none d-sm-inline"},"uage")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#os"},"OS")])],-1),hi={class:"tab-content mt-5"},fi={class:"tab-pane fade show active",id:"size"},mi=u("small",{class:"text-muted w-495 d-inline-block"},"Device Type",-1),pi={class:"text-muted w-495 d-inline-block text-right"},vi=u("hr",null,null,-1),gi={class:"tab-pane fade",id:"new"},yi=u("small",{class:"text-muted w-495 d-inline-block"},"New vs. Returning",-1),_i={class:"text-muted w-495 d-inline-block text-right"},bi={class:"tab-pane fade",id:"browser"},ki=u("small",{class:"text-muted w-495 d-inline-block"},"Browser",-1),Si={class:"text-muted w-495 d-inline-block text-right"},wi={class:"tab-pane fade",id:"language"},xi=u("small",{class:"text-muted w-495 d-inline-block"},"Language",-1),$i={class:"text-muted w-495 d-inline-block text-right"},Bi={class:"tab-pane fade",id:"os"},Ci=u("small",{class:"text-muted w-495 d-inline-block"},"OS",-1),Ti={class:"text-muted w-495 d-inline-block text-right"},Oi={setup(e){const t=l=>Math.max(0,l.toFixed(2)),r=l=>(l||"").charAt(0).toUpperCase()+(l||"").slice(1),s=l=>l?"New":"Returning",a=l=>l?"Headless Browsers":"Normal Users",c=l=>{let y={aa:"Afar",ab:"Abkhazian",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bh:"Bihari languages",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan; Valencian",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi; Dhivehi; Maldivian",dz:"Dzongkha",ee:"Ewe",el:"Greek, Modern (1453-)",en:"English",eo:"Esperanto",es:"Spanish; Castilian",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fulah",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Gaelic; Scomttish Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian; Haitian Creole",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ie:"Interlingue; Occidental",ig:"Igbo",ii:"Sichuan Yi; Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu; Gikuyu",kj:"Kuanyama; Kwanyama",kk:"Kazakh",kl:"Kalaallisut; Greenlandic",km:"Central Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kirghiz; Kyrgyz",la:"Latin",lb:"Luxembourgish; Letzeburgesch",lg:"Ganda",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Bokm\xE5l, Norwegian; Norwegian Bokm\xE5l",nd:"Ndebele, North; North Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch; Flemish",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",no:"Norwegian",nr:"Ndebele, South; South Ndebele",nv:"Navajo; Navaho",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",om:"Oromo",or:"Oriya",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",pi:"Pali",pl:"Polish",ps:"Pushto; Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ro:"Romanian; Moldavian; Moldovan",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Sotho, Southern",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap\xFCk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zh:"Chinese",zu:"Zulu"},x=l;try{x=x.toLowerCase().split("-")[0]}catch{}try{x=y[x]}catch{}return(!x||x=="undefined")&&(x="Unknown"),x+" ("+l+")"},m=ee(),f=Y({}),{range:d,host:o,dark:S,summary:h,showVisitors:_}=se(),i=te(()=>_.value?"Visitors":"Pageviews");async function v(){if(d.value.length===7||d.value>1e3){let x=JSON.parse(JSON.stringify(h.value)),w=_.value?x.country_code__visitors:x.country_code;if(w){let $={};Object.keys(w).forEach(T=>{_.value?$[T]={visitors:w[T]}:$[T]={pageviews:w[T]}}),f.value=$}return}let l=await we(m,"country_code",999),y={};l.forEach(x=>{_.value?y[x.country_code]={visitors:x["count(DISTINCT ip)"]}:y[x.country_code]={pageviews:x["count(*)"]}}),f.value=y}function n(){(typeof d.value=="string"&&d.value.length===7||d.value>1e3&&d.value<3e3)&&xe(m,d.value)}return ie(v),ie(n),H(o,v),H(o,n),H(d,v),H(d,n),H(h,v),H(_,v),(l,y)=>(F(),z("div",Cs,[N(Lt),u("div",Ts,[u("div",Os,[N(ye,null,{default:me(()=>[u("div",Ls,[N(le,{title:"Visitors",muted:!1,underline:!O(_),onClick:y[0]||(y[0]=x=>O(m).commit("setShowVisitors",!0))},null,8,["underline"]),N(le,{title:"Total Pageviews",muted:!1,underline:O(_),onClick:y[1]||(y[1]=x=>O(m).commit("setShowVisitors",!1))},null,8,["underline"]),N(le,{title:"Bounce Rate"}),N(le,{title:"Session Length"})]),N(Gt)]),_:1})])]),u("div",Ds,[u("div",Fs,[u("div",{class:J(["card min-357",{"bg-dark":O(S)}])},[u("div",As,[zs,u("div",Es,[u("div",Is,[Ms,u("small",Ns,M(O(i)),1),N(Z,{column:"referer_host",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",Rs,[Ps,u("small",Vs,M(O(i)),1),N(Z,{column:"referer_url",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",Ws,[qs,u("small",Ks,M(O(i)),1),N(Z,{column:"utm_medium"})]),u("div",Hs,[Us,u("small",Ys,M(O(i)),1),N(Z,{column:"utm_source"})]),u("div",Gs,[js,u("small",Zs,M(O(i)),1),N(Z,{column:"utm_campaign"})])])])],2)]),u("div",Js,[u("div",{class:J(["card min-357",{"bg-dark":O(S)}])},[u("div",Xs,[Qs,u("div",ei,[u("div",ti,[si,u("small",ii,M(O(i)),1),N(Z,{column:"pathname",linkPrefix:O(o),links:!0,defaultText:"None"},null,8,["linkPrefix"])]),u("div",ai,[ni,oi,N(Z,{column:"pathname",valueColumn:"AvgLoadTime",linkPrefix:O(o),links:!0,loadTimes:!0,valueFormatter:t},null,8,["linkPrefix"])])])])],2)])]),u("div",ri,[u("div",li,[N(ye,{title:"Countries"},{default:me(()=>[N(Bs,{countries:f.value,dark:O(S),showVisitors:O(_)},null,8,["countries","dark","showVisitors"])]),_:1})]),u("div",ci,[N(ye,null,{default:me(()=>[ui,di,u("div",hi,[u("div",fi,[mi,u("small",pi,M(O(i)),1),N(Z,{column:"device_type",iconify:!0,keyFormatter:r}),vi,N(Z,{column:"bot",iconify:!0,defaultText:"Normal Users",keyFormatter:a})]),u("div",gi,[yi,u("small",_i,M(O(i)),1),N(Z,{column:"is_new",iconify:!0,defaultText:"Returning",keyFormatter:s})]),u("div",bi,[ki,u("small",Si,M(O(i)),1),N(Z,{column:"browser",browserIcons:!0})]),u("div",wi,[xi,u("small",$i,M(O(i)),1),N(Z,{column:"lang",keyFormatter:c})]),u("div",Bi,[Ci,u("small",Ti,M(O(i)),1),N(Z,{column:"os",osIcons:!0})])])]),_:1})])])]))}};const Li={setup(e){const t=ee();function r(){let s=localStorage.getItem("__analytics_encryption_key"),a=localStorage.getItem("__analytics_public_key"),c=localStorage.getItem("__analytics_hosts");if(c)try{c=JSON.parse(c)}catch{}Array.isArray(c)||(c=null);let m={};location.search.slice(1).split("&").map(d=>d.split("=")).forEach(d=>m[d[0]]=d[1]);async function f(){let d="/keypair";location.hostname==="localhost"&&(d="https://analytics.servers.do/keypair");let S=await(await fetch(d)).json(),{public_key:h,private_key:_}=S;localStorage.setItem("__analytics_encryption_key",_),localStorage.setItem("__analytics_public_key",h),t.commit("setPublicKey",h),t.commit("setKey",_)}if(m.key){try{m.key=decodeURIComponent(m.key)}catch{}localStorage.setItem("__analytics_encryption_key",m.key),t.commit("setKey",m.key)}else s&&t.commit("setKey",s);if(m.pkey){try{m.pkey=decodeURIComponent(m.pkey)}catch{}localStorage.setItem("__analytics_public_key",m.pkey),t.commit("setPublicKey",m.pkey)}else a?t.commit("setPublicKey",a):f();m.host&&((!c||!Array.isArray(c))&&(c=[]),c.includes(m.host)||c.push(m.host),localStorage.setItem("__analytics_hosts",JSON.stringify(c))),c&&(c.sort((d,o)=>d.localeCompare(o)),t.commit("setDomains",c)),t.commit("setHost",m.host||""),t.commit("setRange",m.range)}return r(),addEventListener("popstate",s=>{console.log("onpopstate location: "+document.location),r()}),(s,a)=>(F(),z(he,null,[N(je),N(Oi),N(Ve),N(dt)],64))}};Fe(Li).use(ze).mount("#app");
