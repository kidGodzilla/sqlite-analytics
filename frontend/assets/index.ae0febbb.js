import{c as Ne,o as A,a as M,b as c,t as q,u as E,d as Q,e as he,r as J,f as ge,w as S,n as oe,g as Fe,v as Pe,h as ue,F as ke,i as Ce,j as X,k as Ae,m as Ve,l as We,p as Ke,q as Be,s as qe,x as H,y as Te,z as Ie,A as Ue,B as He,C as Ye}from"./vendor.a79dc407.js";const Ge=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}};Ge();function ye(e){e==parseInt(e)&&(e=parseInt(e));const t=new Date;return t.setDate(t.getDate()-e)}function we(e){return Math.floor((+new Date-+new Date(e))/(25*60*60*1e3))}function ie(e){let t=`?host=${e.host}&range=${e.range}`;e.os&&(t+=`&os=${e.os}`),e.path&&(t+=`&path=${e.path}`),e.device&&(t+=`&device=${e.device}`),e.is_bot!==""&&(t+=`&is_bot=${e.is_bot}`),e.is_new!==""&&(t+=`&is_new=${e.is_new}`),e.browser&&(t+=`&browser=${e.browser}`),e.language&&(t+=`&language=${e.language}`),e.referrer&&(t+=`&referrer=${e.referrer}`),e.utm_source!==""&&(t+=`&utm_source=${e.utm_source}`),e.utm_medium!==""&&(t+=`&utm_medium=${e.utm_medium}`),e.utm_campaign!==""&&(t+=`&utm_campaign=${e.utm_campaign}`),e.country!==""&&(t+=`&country=${e.country}`),location.search!==t&&window.history.pushState("","",t)}var Ze=Ne({state(){return{publicKey:"",domains:[],host:"",path:"",key:"",start:ye(0),end:ye(0),range:"1",rangeString:"Latest",liveVisitors:0,showVisitors:!0,summary:{},dark:!1,os:"",device:"",is_bot:"",is_new:"",browser:"",language:"",referrer:"",utm_source:"",utm_medium:"",utm_campaign:"",country:""}},getters:{domains:e=>e.domains,dark:e=>e.dark,key:e=>e.key,publicKey:e=>e.publicKey,host:e=>e.host,path:e=>e.path,start:e=>e.start,end:e=>e.end,range:e=>e.range,rangeString:e=>e.rangeString,liveVisitors:e=>e.liveVisitors,showVisitors:e=>e.showVisitors,summary:e=>e.summary,os:e=>e.os,device:e=>e.device,is_bot:e=>e.is_bot,is_new:e=>e.is_new,browser:e=>e.browser,language:e=>e.language,referrer:e=>e.referrer,utm_source:e=>e.utm_source,utm_medium:e=>e.utm_medium,utm_campaign:e=>e.utm_campaign,country:e=>e.country},mutations:{setDark(e,t){e.dark=t},setKey(e,t){e.key=t},setPublicKey(e,t){e.publicKey=t},setDomains(e,t){e.domains=t},setHost(e,t){e.host=t,ie(e)},setPath(e,t){e.path=t,ie(e)},setOs(e,t){e.os=t,ie(e)},setDevice(e,t){e.device=t,ie(e)},setIs_bot(e,t){e.is_bot=t,ie(e)},setIs_new(e,t){e.is_new=t,ie(e)},setBrowser(e,t){e.browser=t,ie(e)},setLanguage(e,t){e.language=t,ie(e)},setReferrer(e,t){e.referrer=t,ie(e)},setUtm_source(e,t){e.utm_source=t,ie(e)},setUtm_medium(e,t){e.utm_medium=t,ie(e)},setUtm_campaign(e,t){e.utm_campaign=t,ie(e)},setCountry(e,t){e.country=t,ie(e)},setStart(e,t){e.start=t},setEnd(e,t){e.end=t},setLiveVisitors(e,t){e.liveVisitors=t},setShowVisitors(e,t){e.showVisitors=t},setSummary(e,t){e.summary=t},setRangeString(e,t){e.rangeString=t},setRange(e,t){t||(t="1");let i={"-1":["Yesterday",1,1],"1":["Latest",0,0],"7":["Last 7 Days",7,0],"14":["1 week ago",14,7],"21":["2 weeks ago",21,14],"28":["3 weeks ago",28,21],"30":["Last 30 Days",30,0]}[t];if(t<-1&&t>-32){let s=t*-1;i=[`${new Date(ye(s)).toDateString()}`,s,s]}if(t.length===7){let s=we(t),a=new Date(t);a=a.setMonth(a.getMonth()+1);let u=we(a);u<0&&(u=0),i=[`${t}`,s,u]}if(t>1e3&&t<3e3){let s=we(t),a=new Date(t);a=a.setFullYear(a.getFullYear()+1);let u=we(a);u<0&&(u=0),i=[`${t}`,s,u]}e.rangeString=i[0],e.start=ye(i[1]),e.end=ye(i[2]),parseInt(t)==t&&(t=parseInt(t)),e.range=t,ie(e)}}});const je={class:"text-center mt-3"},Xe=Q(" Copyright \xA9 2021-"),Je={class:"year"},Qe=Q(),et=c("a",{href:"https://jamesfuthey.com/",target:"_blank"},"James Futhey",-1),tt=Q(". \xA0All Rights Reserved. "),it={setup(e){const t=new Date().getFullYear();return(o,i)=>(A(),M("p",je,[Xe,c("span",Je,q(E(t)),1),Qe,et,tt]))}},st={class:"container"},at=c("a",{class:"navbar-brand",href:"/"},"Website Analytics",-1),nt=c("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[c("span",{class:"navbar-toggler-icon"})],-1),ot={class:"collapse navbar-collapse",id:"navbarColor01"},rt={class:"navbar-nav me-auto"},lt={class:"nav-item"},ct={class:"d-none d-md-inline-block form-check form-switch float-right"},ut={setup(e){const t=he(),o=J(!1);return ge(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(o.value=!0)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{o.value=i.matches}),S(o,()=>{t.commit("setDark",o.value),document.querySelector("#theme").href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/${o.value?"superhero":"zephyr"}/bootstrap.min.css`,o.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),(i,s)=>(A(),M("nav",{class:oe(["navbar navbar-expand-lg navbar-dark",{"mt-1":o.value,"bg-primary":!o.value}])},[c("div",st,[at,nt,c("div",ot,[c("ul",rt,[c("li",lt,[c("a",{class:oe(["nav-link cp",{"btn-dark":o.value,nudge:o.value}]),"data-bs-toggle":"modal","data-bs-target":"#embedScript"},"Add to your Website",2)])])]),c("div",ct,[Fe(c("input",{class:"form-check-input",type:"checkbox",id:"themer","onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a)},null,512),[[Pe,o.value]]),c("label",{class:oe(["form-check-label",{"text-white":!o.value}]),for:"themer",style:{"user-select":"none"}},"Dark mode",2)])])],2))}},me=()=>{const e=he();return Object.fromEntries(Object.keys(e.getters).map(t=>[t,ue(()=>e.getters[t])]))},dt={class:"modal",id:"embedScript",tabindex:"-1"},ht={class:"modal-dialog modal-lg"},mt=c("div",{class:"modal-header"},[c("h5",{class:"modal-title"},"Add to your Website"),c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ft={class:"modal-body"},pt=c("h5",null,"Embed Code",-1),vt=c("p",null,"Embed this script on your website, and your analytics data will appear here.",-1),gt={rows:"4",spellcheck:"false",class:"form-control",id:"script","data-clipboard-target":"#script",style:{resize:"none","font-family":"monospace"}},yt=c("small",{class:"d-block mt-1"},[c("a",{class:"cp","data-clipboard-target":"#script"},"Copy to clipboard"),c("span",{class:"d-none"},"\xA0Copied!")],-1),_t=c("br",null,null,-1),bt=c("h5",null,"URL to View Analytics",-1),kt=c("p",null,"You will need the following URL to access (and decrypt) your analytics:",-1),wt={rows:"3",spellcheck:"false",class:"form-control",id:"url","data-clipboard-target":"#url",style:{resize:"none","font-family":"monospace"}},St=c("small",{class:"d-block mt-1"},[c("a",{class:"cp","data-clipboard-target":"#url"},"Copy to clipboard"),c("span",{class:"d-none"},"\xA0Copied!")],-1),xt=c("p",null,[c("small",null,[c("strong",null,"Save your URL."),Q(" If you lose this, you will need to reinstall analytics with a new encryption key.")])],-1),$t=c("div",{class:"modal-footer"},[c("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),Ct={setup(e){const{key:t,publicKey:o,dark:i}=me();let s={};location.search.slice(1).split("&").map(T=>T.split("=")).forEach(T=>s[T[0]]=T[1]);let a="https://analytics.servers.do",u=ue(()=>o.value?`&lt;script>window.__analytics_encryption_key = '${o.value}';&lt;/script>
`:"");const f=ue(()=>r(`&lt;!-- Servers.do Analytics -->
${u.value}&lt;script src='${a}/a.js'>&lt;/script>`)),y=ue(()=>`${a}?host=${s.host}&range=${s.range}&key=${encodeURIComponent(t.value)}&pkey=${o.value}`);function r(T){return window.$("<textarea />").html(T).text()}return(T,p)=>(A(),M("div",dt,[c("div",ht,[c("div",{class:oe(["modal-content",{"bg-dark":E(i)}])},[mt,c("div",ft,[pt,vt,c("p",null,[c("textarea",gt,q(E(f)),1),yt]),_t,bt,kt,c("p",null,[c("textarea",wt,q(E(y)),1),St]),xt]),$t],2)])]))}};const Bt={class:"row"},Tt={key:0,class:"col-12 mb-3"},Dt=["onClick"],Lt=Q(" = \xA0"),Ot=Q(" \xA0 "),Ft=c("a",null,"\u2715",-1),At={class:"col-6"},It={class:"nav nav-pills mb-1 d-inline-block"},zt={class:"nav-item dropdown ms-auto"},Mt={class:"nav-link dropdown-toggle cp","data-bs-toggle":"dropdown",role:"button"},Et=["src"],Rt={class:"d-inline pt-2 mb-0 name"},Nt={class:"dropdown-menu websites left"},Pt=["onClick"],Vt=c("span",{class:"text-success d-none d-md-inline-block dot"},"\xB7",-1),Wt={class:"current-visitors d-none d-md-inline-block"},Kt={class:"col-6"},qt={class:"nav nav-pills mb-1"},Ut={class:"nav-item dropdown ms-auto"},Ht={class:"dropdown-menu right"},Yt=c("div",{class:"dropdown-divider"},null,-1),Gt=c("div",{class:"dropdown-divider"},null,-1),Zt=c("div",{class:"dropdown-divider"},null,-1),jt={setup(e){const t=J(new Date),o=J(!1),i=J("month"),s=J("month"),a=J("month"),u={to:new Date(new Date().setDate(new Date().getDate()-32)),from:new Date,preventDisableDateSelection:!0},{host:f,path:y,os:r,device:T,is_bot:p,is_new:k,browser:l,language:_,referrer:n,utm_source:d,utm_medium:v,utm_campaign:x,country:I,domains:P,range:j,rangeString:V,liveVisitors:$}=me(),D=he(),C=J({path:y,os:r,device:T,is_bot:p,is_new:k,browser:l,language:_,referrer:n,utm_source:d,utm_medium:v,utm_campaign:x,country:I}),z="path, os, device, is_bot, is_new, browser, language, referrer, utm_source, utm_medium, utm_campaign, country".split(", "),R=J([]);ue(()=>location.search);function w(){R.value=[],z.forEach(O=>{C.value[O]!==""&&(R.value.includes(O)||R.value.push(O))})}S(r,w),S(y,w),S(T,w),S(p,w),S(k,w),S(l,w),S(_,w),S(n,w),S(d,w),S(v,w),S(x,w),S(I,w),w();function W(O,F){D.commit("setRange",O),F||(o.value=!1)}const h=O=>O.charAt(0).toUpperCase()+O.slice(1);function b(){var O=prompt("Enter domain name");if(O){if(O=O.toLowerCase().trim().replace("www.",""),O&&window.history.pushState("","",`?host=${O}&range=${j.value}`),O&&!(P.value||[]).includes(O)){let F=P.value;Array.isArray(F)||(F=[]),F.includes(O)||F.push(O),localStorage.setItem("__analytics_hosts",JSON.stringify(F)),D.commit("setDomains",F)}O&&g(O)}}function g(O){window.history.pushState("","",`?host=${O}&range=${j.value}`),D.commit("setHost",O)}function m(O){O==="month"?(i.value="month",s.value="month",a.value="month",D.commit("setRangeString","Custom month:")):O==="year"?(i.value="year",s.value="year",a.value="year",D.commit("setRangeString","Custom year:")):O==="day"&&(i.value="day",s.value="day",a.value="day",D.commit("setRangeString","Custom day:")),document.querySelector(".dropdown-menu.right.show").classList.remove("show"),o.value=!0,setTimeout(()=>{document.querySelector(".vuejs3-datepicker__value").click()},123)}function Y(O){if(i.value==="year"){let U=new Date(O).getFullYear();W(U)}else if(i.value==="month"){let F=new Date(O),U=F.getMonth()+1;W(`${F.getFullYear()}-${U<10?"0":""}${U}`)}else if(i.value==="day"){t.value=new Date(O);let F=new Date-new Date(O),U=Math.floor(F/864e5)*-1;W(U)}}function Z(O){D.commit(O,"")}function K(O){return"set"+O[0].toUpperCase()+O.substring(1)}return(O,F)=>(A(),M("div",Bt,[R.value.length?(A(),M("div",Tt,[(A(!0),M(ke,null,Ce(R.value,U=>(A(),M("button",{type:"button",class:"btn btn-dark mr-5 mb-1",onClick:le=>Z(K(U))},[c("strong",null,q(h(U)),1),Lt,c("code",null,q(C.value[U]),1),Ot,Ft],8,Dt))),256))])):X("",!0),c("div",At,[c("ul",It,[c("li",zt,[c("a",Mt,[E(f)?(A(),M("img",{key:0,class:"favicon",src:`https://logo.clearbit.com/${E(f)}`,onerror:"this.src='default.png';"},null,8,Et)):X("",!0),c("h5",Rt,q(h(E(f))||"Select a Domain"),1)]),c("div",Nt,[(A(!0),M(ke,null,Ce(E(P),U=>(A(),M("a",{class:"dropdown-item cp",onClick:le=>g(U)},q(h(U)),9,Pt))),256)),c("a",{class:"dropdown-item cp",onClick:b},"Add Domain")])])]),Vt,c("span",Wt,"\xA0"+q(E($)?`${E($)} current visitor${E($)==1?"":"s"}`:"No current visitors"),1)]),c("div",Kt,[c("ul",qt,[c("li",Ut,[c("a",{class:oe(["nav-link right cp",{"dropdown-toggle":!o.value}]),"data-bs-toggle":"dropdown",role:"button"},q(E(V)),3),c("div",Ht,[c("a",{class:"dropdown-item cp",onClick:F[0]||(F[0]=U=>W(1))},"Latest"),c("a",{class:"dropdown-item cp",onClick:F[1]||(F[1]=U=>W(-1))},"Yesterday"),c("a",{class:"dropdown-item cp",onClick:F[2]||(F[2]=U=>{m("day")})},"Custom Day"),Yt,c("a",{class:"dropdown-item cp",onClick:F[3]||(F[3]=U=>W(7))},"Last 7 Days"),c("a",{class:"dropdown-item cp",onClick:F[4]||(F[4]=U=>W(14))},"1 week ago"),c("a",{class:"dropdown-item cp",onClick:F[5]||(F[5]=U=>W(21))},"2 weeks ago"),c("a",{class:"dropdown-item cp",onClick:F[6]||(F[6]=U=>W(28))},"3 weeks ago"),Gt,c("a",{class:"dropdown-item cp",onClick:F[7]||(F[7]=U=>W(30))},"Last 30 Days"),Zt,c("a",{class:"dropdown-item cp",onClick:F[8]||(F[8]=U=>{m("month")})},"Custom Month"),c("a",{class:"dropdown-item cp",onClick:F[9]||(F[9]=U=>{m("year")})},"Custom Year")])]),o.value?(A(),Ae(E(Ve),{key:0,name:"datepick",value:t.value,"disabled-dates":s.value=="day"?u:null,"initial-view":i.value,"minimum-view":s.value,"maximum-view":a.value,onInput:Y},null,8,["value","disabled-dates","initial-view","minimum-view","maximum-view"])):X("",!0)])])]))}};var G=G||function(e,t){var o={},i=o.lib={},s=function(){},a=i.Base={extend:function(l){s.prototype=this;var _=new s;return l&&_.mixIn(l),_.hasOwnProperty("init")||(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var l=this.extend();return l.init.apply(l,arguments),l},init:function(){},mixIn:function(l){for(var _ in l)l.hasOwnProperty(_)&&(this[_]=l[_]);l.hasOwnProperty("toString")&&(this.toString=l.toString)},clone:function(){return this.init.prototype.extend(this)}},u=i.WordArray=a.extend({init:function(l,_){l=this.words=l||[],this.sigBytes=_!=t?_:4*l.length},toString:function(l){return(l||y).stringify(this)},concat:function(l){var _=this.words,n=l.words,d=this.sigBytes;if(l=l.sigBytes,this.clamp(),d%4)for(var v=0;v<l;v++)_[d+v>>>2]|=(n[v>>>2]>>>24-8*(v%4)&255)<<24-8*((d+v)%4);else if(65535<n.length)for(v=0;v<l;v+=4)_[d+v>>>2]=n[v>>>2];else _.push.apply(_,n);return this.sigBytes+=l,this},clamp:function(){var l=this.words,_=this.sigBytes;l[_>>>2]&=4294967295<<32-8*(_%4),l.length=e.ceil(_/4)},clone:function(){var l=a.clone.call(this);return l.words=this.words.slice(0),l},random:function(l){for(var _=[],n=0;n<l;n+=4)_.push(4294967296*e.random()|0);return new u.init(_,l)}}),f=o.enc={},y=f.Hex={stringify:function(l){var _=l.words;l=l.sigBytes;for(var n=[],d=0;d<l;d++){var v=_[d>>>2]>>>24-8*(d%4)&255;n.push((v>>>4).toString(16)),n.push((v&15).toString(16))}return n.join("")},parse:function(l){for(var _=l.length,n=[],d=0;d<_;d+=2)n[d>>>3]|=parseInt(l.substr(d,2),16)<<24-4*(d%8);return new u.init(n,_/2)}},r=f.Latin1={stringify:function(l){var _=l.words;l=l.sigBytes;for(var n=[],d=0;d<l;d++)n.push(String.fromCharCode(_[d>>>2]>>>24-8*(d%4)&255));return n.join("")},parse:function(l){for(var _=l.length,n=[],d=0;d<_;d++)n[d>>>2]|=(l.charCodeAt(d)&255)<<24-8*(d%4);return new u.init(n,_)}},T=f.Utf8={stringify:function(l){try{return decodeURIComponent(escape(r.stringify(l)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(l){return r.parse(unescape(encodeURIComponent(l)))}},p=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(l){typeof l=="string"&&(l=T.parse(l)),this._data.concat(l),this._nDataBytes+=l.sigBytes},_process:function(l){var _=this._data,n=_.words,d=_.sigBytes,v=this.blockSize,x=d/(4*v),x=l?e.ceil(x):e.max((x|0)-this._minBufferSize,0);if(l=x*v,d=e.min(4*l,d),l){for(var I=0;I<l;I+=v)this._doProcessBlock(n,I);I=n.splice(0,l),_.sigBytes-=d}return new u.init(I,d)},clone:function(){var l=a.clone.call(this);return l._data=this._data.clone(),l},_minBufferSize:0});i.Hasher=p.extend({cfg:a.extend(),init:function(l){this.cfg=this.cfg.extend(l),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(l){return this._append(l),this._process(),this},finalize:function(l){return l&&this._append(l),this._doFinalize()},blockSize:16,_createHelper:function(l){return function(_,n){return new l.init(n).finalize(_)}},_createHmacHelper:function(l){return function(_,n){return new k.HMAC.init(l,n).finalize(_)}}});var k=o.algo={};return o}(Math);(function(){var e=G,t=e.lib.WordArray;e.enc.Base64={stringify:function(o){var i=o.words,s=o.sigBytes,a=this._map;o.clamp(),o=[];for(var u=0;u<s;u+=3)for(var f=(i[u>>>2]>>>24-8*(u%4)&255)<<16|(i[u+1>>>2]>>>24-8*((u+1)%4)&255)<<8|i[u+2>>>2]>>>24-8*((u+2)%4)&255,y=0;4>y&&u+.75*y<s;y++)o.push(a.charAt(f>>>6*(3-y)&63));if(i=a.charAt(64))for(;o.length%4;)o.push(i);return o.join("")},parse:function(o){var i=o.length,s=this._map,a=s.charAt(64);a&&(a=o.indexOf(a),a!=-1&&(i=a));for(var a=[],u=0,f=0;f<i;f++)if(f%4){var y=s.indexOf(o.charAt(f-1))<<2*(f%4),r=s.indexOf(o.charAt(f))>>>6-2*(f%4);a[u>>>2]|=(y|r)<<24-8*(u%4),u++}return t.create(a,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(p,k,l,_,n,d,v){return p=p+(k&l|~k&_)+n+v,(p<<d|p>>>32-d)+k}function o(p,k,l,_,n,d,v){return p=p+(k&_|l&~_)+n+v,(p<<d|p>>>32-d)+k}function i(p,k,l,_,n,d,v){return p=p+(k^l^_)+n+v,(p<<d|p>>>32-d)+k}function s(p,k,l,_,n,d,v){return p=p+(l^(k|~_))+n+v,(p<<d|p>>>32-d)+k}for(var a=G,u=a.lib,f=u.WordArray,y=u.Hasher,u=a.algo,r=[],T=0;64>T;T++)r[T]=4294967296*e.abs(e.sin(T+1))|0;u=u.MD5=y.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,k){for(var l=0;16>l;l++){var _=k+l,n=p[_];p[_]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var l=this._hash.words,_=p[k+0],n=p[k+1],d=p[k+2],v=p[k+3],x=p[k+4],I=p[k+5],P=p[k+6],j=p[k+7],V=p[k+8],$=p[k+9],D=p[k+10],C=p[k+11],z=p[k+12],R=p[k+13],w=p[k+14],W=p[k+15],h=l[0],b=l[1],g=l[2],m=l[3],h=t(h,b,g,m,_,7,r[0]),m=t(m,h,b,g,n,12,r[1]),g=t(g,m,h,b,d,17,r[2]),b=t(b,g,m,h,v,22,r[3]),h=t(h,b,g,m,x,7,r[4]),m=t(m,h,b,g,I,12,r[5]),g=t(g,m,h,b,P,17,r[6]),b=t(b,g,m,h,j,22,r[7]),h=t(h,b,g,m,V,7,r[8]),m=t(m,h,b,g,$,12,r[9]),g=t(g,m,h,b,D,17,r[10]),b=t(b,g,m,h,C,22,r[11]),h=t(h,b,g,m,z,7,r[12]),m=t(m,h,b,g,R,12,r[13]),g=t(g,m,h,b,w,17,r[14]),b=t(b,g,m,h,W,22,r[15]),h=o(h,b,g,m,n,5,r[16]),m=o(m,h,b,g,P,9,r[17]),g=o(g,m,h,b,C,14,r[18]),b=o(b,g,m,h,_,20,r[19]),h=o(h,b,g,m,I,5,r[20]),m=o(m,h,b,g,D,9,r[21]),g=o(g,m,h,b,W,14,r[22]),b=o(b,g,m,h,x,20,r[23]),h=o(h,b,g,m,$,5,r[24]),m=o(m,h,b,g,w,9,r[25]),g=o(g,m,h,b,v,14,r[26]),b=o(b,g,m,h,V,20,r[27]),h=o(h,b,g,m,R,5,r[28]),m=o(m,h,b,g,d,9,r[29]),g=o(g,m,h,b,j,14,r[30]),b=o(b,g,m,h,z,20,r[31]),h=i(h,b,g,m,I,4,r[32]),m=i(m,h,b,g,V,11,r[33]),g=i(g,m,h,b,C,16,r[34]),b=i(b,g,m,h,w,23,r[35]),h=i(h,b,g,m,n,4,r[36]),m=i(m,h,b,g,x,11,r[37]),g=i(g,m,h,b,j,16,r[38]),b=i(b,g,m,h,D,23,r[39]),h=i(h,b,g,m,R,4,r[40]),m=i(m,h,b,g,_,11,r[41]),g=i(g,m,h,b,v,16,r[42]),b=i(b,g,m,h,P,23,r[43]),h=i(h,b,g,m,$,4,r[44]),m=i(m,h,b,g,z,11,r[45]),g=i(g,m,h,b,W,16,r[46]),b=i(b,g,m,h,d,23,r[47]),h=s(h,b,g,m,_,6,r[48]),m=s(m,h,b,g,j,10,r[49]),g=s(g,m,h,b,w,15,r[50]),b=s(b,g,m,h,I,21,r[51]),h=s(h,b,g,m,z,6,r[52]),m=s(m,h,b,g,v,10,r[53]),g=s(g,m,h,b,D,15,r[54]),b=s(b,g,m,h,n,21,r[55]),h=s(h,b,g,m,V,6,r[56]),m=s(m,h,b,g,W,10,r[57]),g=s(g,m,h,b,P,15,r[58]),b=s(b,g,m,h,R,21,r[59]),h=s(h,b,g,m,x,6,r[60]),m=s(m,h,b,g,C,10,r[61]),g=s(g,m,h,b,d,15,r[62]),b=s(b,g,m,h,$,21,r[63]);l[0]=l[0]+h|0,l[1]=l[1]+b|0,l[2]=l[2]+g|0,l[3]=l[3]+m|0},_doFinalize:function(){var p=this._data,k=p.words,l=8*this._nDataBytes,_=8*p.sigBytes;k[_>>>5]|=128<<24-_%32;var n=e.floor(l/4294967296);for(k[(_+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,k[(_+64>>>9<<4)+14]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360,p.sigBytes=4*(k.length+1),this._process(),p=this._hash,k=p.words,l=0;4>l;l++)_=k[l],k[l]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360;return p},clone:function(){var p=y.clone.call(this);return p._hash=this._hash.clone(),p}}),a.MD5=y._createHelper(u),a.HmacMD5=y._createHmacHelper(u)})(Math);(function(){var e=G,t=e.lib,o=t.Base,i=t.WordArray,t=e.algo,s=t.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,u){for(var f=this.cfg,y=f.hasher.create(),r=i.create(),T=r.words,p=f.keySize,f=f.iterations;T.length<p;){k&&y.update(k);var k=y.update(a).finalize(u);y.reset();for(var l=1;l<f;l++)k=y.finalize(k),y.reset();r.concat(k)}return r.sigBytes=4*p,r}});e.EvpKDF=function(a,u,f){return s.create(f).compute(a,u)}})();G.lib.Cipher||function(e){var t=G,o=t.lib,i=o.Base,s=o.WordArray,a=o.BufferedBlockAlgorithm,u=t.enc.Base64,f=t.algo.EvpKDF,y=o.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(n,d){return this.create(this._ENC_XFORM_MODE,n,d)},createDecryptor:function(n,d){return this.create(this._DEC_XFORM_MODE,n,d)},init:function(n,d,v){this.cfg=this.cfg.extend(v),this._xformMode=n,this._key=d,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(d,v,x){return(typeof v=="string"?_:l).encrypt(n,d,v,x)},decrypt:function(d,v,x){return(typeof v=="string"?_:l).decrypt(n,d,v,x)}}}});o.StreamCipher=y.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var r=t.mode={},T=function(n,d,v){var x=this._iv;x?this._iv=e:x=this._prevBlock;for(var I=0;I<v;I++)n[d+I]^=x[I]},p=(o.BlockCipherMode=i.extend({createEncryptor:function(n,d){return this.Encryptor.create(n,d)},createDecryptor:function(n,d){return this.Decryptor.create(n,d)},init:function(n,d){this._cipher=n,this._iv=d}})).extend();p.Encryptor=p.extend({processBlock:function(n,d){var v=this._cipher,x=v.blockSize;T.call(this,n,d,x),v.encryptBlock(n,d),this._prevBlock=n.slice(d,d+x)}}),p.Decryptor=p.extend({processBlock:function(n,d){var v=this._cipher,x=v.blockSize,I=n.slice(d,d+x);v.decryptBlock(n,d),T.call(this,n,d,x),this._prevBlock=I}}),r=r.CBC=p,p=(t.pad={}).Pkcs7={pad:function(n,d){for(var v=4*d,v=v-n.sigBytes%v,x=v<<24|v<<16|v<<8|v,I=[],P=0;P<v;P+=4)I.push(x);v=s.create(I,v),n.concat(v)},unpad:function(n){n.sigBytes-=n.words[n.sigBytes-1>>>2]&255}},o.BlockCipher=y.extend({cfg:y.cfg.extend({mode:r,padding:p}),reset:function(){y.reset.call(this);var n=this.cfg,d=n.iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var v=n.createEncryptor;else v=n.createDecryptor,this._minBufferSize=1;this._mode=v.call(n,this,d&&d.words)},_doProcessBlock:function(n,d){this._mode.processBlock(n,d)},_doFinalize:function(){var n=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){n.pad(this._data,this.blockSize);var d=this._process(!0)}else d=this._process(!0),n.unpad(d);return d},blockSize:4});var k=o.CipherParams=i.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),r=(t.format={}).OpenSSL={stringify:function(n){var d=n.ciphertext;return n=n.salt,(n?s.create([1398893684,1701076831]).concat(n).concat(d):d).toString(u)},parse:function(n){n=u.parse(n);var d=n.words;if(d[0]==1398893684&&d[1]==1701076831){var v=s.create(d.slice(2,4));d.splice(0,4),n.sigBytes-=16}return k.create({ciphertext:n,salt:v})}},l=o.SerializableCipher=i.extend({cfg:i.extend({format:r}),encrypt:function(n,d,v,x){x=this.cfg.extend(x);var I=n.createEncryptor(v,x);return d=I.finalize(d),I=I.cfg,k.create({ciphertext:d,key:v,iv:I.iv,algorithm:n,mode:I.mode,padding:I.padding,blockSize:n.blockSize,formatter:x.format})},decrypt:function(n,d,v,x){return x=this.cfg.extend(x),d=this._parse(d,x.format),n.createDecryptor(v,x).finalize(d.ciphertext)},_parse:function(n,d){return typeof n=="string"?d.parse(n,this):n}}),t=(t.kdf={}).OpenSSL={execute:function(n,d,v,x){return x||(x=s.random(8)),n=f.create({keySize:d+v}).compute(n,x),v=s.create(n.words.slice(d),4*v),n.sigBytes=4*d,k.create({key:n,iv:v,salt:x})}},_=o.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:t}),encrypt:function(n,d,v,x){return x=this.cfg.extend(x),v=x.kdf.execute(v,n.keySize,n.ivSize),x.iv=v.iv,n=l.encrypt.call(this,n,d,v.key,x),n.mixIn(v),n},decrypt:function(n,d,v,x){return x=this.cfg.extend(x),d=this._parse(d,x.format),v=x.kdf.execute(v,n.keySize,n.ivSize,d.salt),x.iv=v.iv,l.decrypt.call(this,n,d,v.key,x)}})}();(function(){for(var e=G,t=e.lib.BlockCipher,V=e.algo,o=[],i=[],s=[],a=[],u=[],f=[],y=[],r=[],T=[],p=[],k=[],l=0;256>l;l++)k[l]=128>l?l<<1:l<<1^283;for(var _=0,n=0,l=0;256>l;l++){var d=n^n<<1^n<<2^n<<3^n<<4,d=d>>>8^d&255^99;o[_]=d,i[d]=_;var v=k[_],x=k[v],I=k[x],P=257*k[d]^16843008*d;s[_]=P<<24|P>>>8,a[_]=P<<16|P>>>16,u[_]=P<<8|P>>>24,f[_]=P,P=16843009*I^65537*x^257*v^16843008*_,y[d]=P<<24|P>>>8,r[d]=P<<16|P>>>16,T[d]=P<<8|P>>>24,p[d]=P,_?(_=v^k[k[k[I^v]]],n^=k[k[n]]):_=n=1}var j=[0,1,2,4,8,16,32,64,128,27,54],V=V.AES=t.extend({_doReset:function(){for(var $=this._key,D=$.words,C=$.sigBytes/4,$=4*((this._nRounds=C+6)+1),z=this._keySchedule=[],R=0;R<$;R++)if(R<C)z[R]=D[R];else{var w=z[R-1];R%C?6<C&&R%C==4&&(w=o[w>>>24]<<24|o[w>>>16&255]<<16|o[w>>>8&255]<<8|o[w&255]):(w=w<<8|w>>>24,w=o[w>>>24]<<24|o[w>>>16&255]<<16|o[w>>>8&255]<<8|o[w&255],w^=j[R/C|0]<<24),z[R]=z[R-C]^w}for(D=this._invKeySchedule=[],C=0;C<$;C++)R=$-C,w=C%4?z[R]:z[R-4],D[C]=4>C||4>=R?w:y[o[w>>>24]]^r[o[w>>>16&255]]^T[o[w>>>8&255]]^p[o[w&255]]},encryptBlock:function($,D){this._doCryptBlock($,D,this._keySchedule,s,a,u,f,o)},decryptBlock:function($,D){var C=$[D+1];$[D+1]=$[D+3],$[D+3]=C,this._doCryptBlock($,D,this._invKeySchedule,y,r,T,p,i),C=$[D+1],$[D+1]=$[D+3],$[D+3]=C},_doCryptBlock:function($,D,C,z,R,w,W,h){for(var b=this._nRounds,g=$[D]^C[0],m=$[D+1]^C[1],Y=$[D+2]^C[2],Z=$[D+3]^C[3],K=4,O=1;O<b;O++)var F=z[g>>>24]^R[m>>>16&255]^w[Y>>>8&255]^W[Z&255]^C[K++],U=z[m>>>24]^R[Y>>>16&255]^w[Z>>>8&255]^W[g&255]^C[K++],le=z[Y>>>24]^R[Z>>>16&255]^w[g>>>8&255]^W[m&255]^C[K++],Z=z[Z>>>24]^R[g>>>16&255]^w[m>>>8&255]^W[Y&255]^C[K++],g=F,m=U,Y=le;F=(h[g>>>24]<<24|h[m>>>16&255]<<16|h[Y>>>8&255]<<8|h[Z&255])^C[K++],U=(h[m>>>24]<<24|h[Y>>>16&255]<<16|h[Z>>>8&255]<<8|h[g&255])^C[K++],le=(h[Y>>>24]<<24|h[Z>>>16&255]<<16|h[g>>>8&255]<<8|h[m&255])^C[K++],Z=(h[Z>>>24]<<24|h[g>>>16&255]<<16|h[m>>>8&255]<<8|h[Y&255])^C[K++],$[D]=F,$[D+1]=U,$[D+2]=le,$[D+3]=Z},keySize:8});e.AES=t._createHelper(V)})();G.mode.CTR=function(){var e=G.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(o,i){var s=this._cipher,a=s.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0);var y=f.slice(0);s.encryptBlock(y,0),f[a-1]=f[a-1]+1|0;for(var r=0;r<a;r++)o[i+r]^=y[r]}});return e.Decryptor=t,e}();(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},t.bitshift=function(o,i){var s=0,a=o.words,u,f=0,y;if(i>0){for(;i>31;)a.splice(0,1),a.push(0),i-=32,f++;if(i==0)return s;for(var r=a.length-f-1;r>=0;r--)u=a[r],a[r]<<=i,a[r]|=s,s=u>>>32-i}else if(i<0){for(;i<-31;)a.splice(0,0,0),a.length--,i+=32,f++;if(i==0)return s;i=-i,y=(1<<i)-1;for(var r=f;r<a.length;r++)u=a[r]&y,a[r]>>>=i,a[r]|=s,s=u<<32-i}return s},t.neg=function(o){for(var i=o.words,s=0;s<i.length;s++)i[s]=~i[s];return o},t.xor=function(o,i){for(var s=0;s<o.words.length;s++)o.words[s]^=i.words[s];return o},t.bitand=function(o,i){for(var s=o.clone(),a=s.words,u=i.words,f=0;f<a.length;f++)a[f]&=u[f];return s}})(G);(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},e.lib.Base;var o=e.lib.WordArray;e.algo.AES,t.const_Zero=o.create([0,0,0,0]),t.const_One=o.create([0,0,0,1]),t.const_Rb=o.create([0,0,0,135]),t.const_Rb_Shifted=o.create([2147483648,0,0,67]),t.const_nonMSB=o.create([4294967295,4294967295,2147483647,2147483647]),t.isWordArray=function(i){return i&&typeof i.clamp=="function"&&typeof i.concat=="function"&&typeof i.words=="array"},e.pad.OneZeroPadding={pad:function(i,s){for(var a=s*4,u=a-i.sigBytes%a,f=[],y=0;y<u;y+=4){var r=0;y===0&&(r=2147483648),f.push(r)}var T=o.create(f,u);i.concat(T)},unpad:function(){}},e.pad.NoPadding={pad:function(){},unpad:function(){}},t.leftmostBytes=function(i,s){var a=i.clone();return a.sigBytes=s,a.clamp(),a},t.rightmostBytes=function(i,s){i.clamp();var a=32,u=i.clone(),f=(u.sigBytes-s)*8;if(f>=a){var y=Math.floor(f/a);f-=y*a,u.words.splice(0,y),u.sigBytes-=y*a/8}return f>0&&(t.bitshift(u,f),u.sigBytes-=f/8),u},t.popWords=function(i,s){var a=t.leftmostBytes(i,s*4);return i.words=i.words.slice(s),i.sigBytes-=s*4,a},t.shiftBytes=function(i,s){s=s||16;var a=s%4;s-=a;for(var u=o.create(),f=0;f<s;f+=4)u.words.push(i.words.shift()),i.sigBytes-=4,u.sigBytes+=4;return a>0&&(u.words.push(i.words[0]),u.sigBytes+=a,t.bitshift(i,a*8),i.sigBytes-=a),u},t.xorendBytes=function(i,s){return t.leftmostBytes(i,i.sigBytes-s.sigBytes).concat(t.xor(t.rightmostBytes(i,s.sigBytes),s))},t.dbl=function(i){var s=t.msb(i);return t.bitshift(i,1),t.xor(i,s===1?t.const_Rb:t.const_Zero),i},t.inv=function(i){var s=i.words[4]&1;return t.bitshift(i,-1),t.xor(i,s===1?t.const_Rb_Shifted:t.const_Zero),i},t.equals=function(i,s){if(!s||!s.words||i.sigBytes!==s.sigBytes)return!1;i.clamp(),s.clamp();for(var a=0,u=0;u<i.words.length;u++)a|=i.words[u]^s.words[u];return a===0},t.msb=function(i){return i.words[0]>>>31}})(G);(function(e){var t=e.lib.Base,o=e.lib.WordArray,i=e.algo.AES,s=e.ext,a=e.pad.OneZeroPadding;function u(y,r){var T=i.createEncryptor(y,{iv:o.create(),padding:e.pad.NoPadding}),p=T.finalize(r);return p}var f=e.algo.CMAC=t.extend({init:function(y){var r=u(y,s.const_Zero),T=r.clone();if(s.dbl(T),this._isTwo){var p=r.clone();s.inv(p)}else{var p=T.clone();s.dbl(p)}this._K1=T,this._K2=p,this._K=y,this._const_Bsize=16,this.reset()},reset:function(){this._x=s.const_Zero.clone(),this._counter=0,this._buffer=o.create()},update:function(y){if(!y)return this;var r=this._buffer,T=this._const_Bsize;for(typeof y=="string"&&(y=e.enc.Utf8.parse(y)),r.concat(y);r.sigBytes>T;){var p=s.shiftBytes(r,T);s.xor(this._x,p),this._x.clamp(),this._x=u(this._K,this._x),this._counter++}return this},finalize:function(y){this.update(y);var r=this._buffer,T=this._const_Bsize,p=r.clone();return r.sigBytes===T?s.xor(p,this._K1):(a.pad(p,T/4),s.xor(p,this._K2)),s.xor(p,this._x),this.reset(),u(this._K,p)},_isTwo:!1});e.CMAC=function(y,r){return f.create(y).finalize(r)},e.algo.OMAC1=f,e.algo.OMAC2=f.extend({_isTwo:!0})})(G);(function(e){var t=e.lib.Base,o=e.lib.WordArray;e.algo.AES;var i=e.ext,s=e.pad.OneZeroPadding,a=e.algo.CMAC,u=e.algo.S2V=t.extend({init:function(f){this._blockSize=16,this._cmacAD=a.create(f),this._cmacPT=a.create(f),this.reset()},reset:function(){this._buffer=o.create(),this._cmacAD.reset(),this._cmacPT.reset(),this._d=this._cmacAD.finalize(i.const_Zero),this._empty=!0,this._ptStarted=!1},updateAAD:function(f){return this._ptStarted?this:f?(typeof f=="string"&&(f=e.enc.Utf8.parse(f)),this._d=i.xor(i.dbl(this._d),this._cmacAD.finalize(f)),this._empty=!1,this):this},update:function(f){if(!f)return this;this._ptStarted=!0;var y=this._buffer,r=this._blockSize,T=r/4,p=this._cmacPT;for(typeof f=="string"&&(f=e.enc.Utf8.parse(f)),y.concat(f);y.sigBytes>=2*r;){this._empty=!1;var k=i.popWords(y,T);p.update(k)}return this},finalize:function(f){this.update(f);var y=this._blockSize,r=this._buffer;if(this._empty&&r.sigBytes===0)return this._cmacAD.finalize(i.const_One);var T;return r.sigBytes>=y?T=i.xorendBytes(r,this._d):(s.pad(r,y),T=i.xor(i.dbl(this._d),r)),this._cmacPT.finalize(T)}});e.SIV=t.extend({init:function(f){var y=f.sigBytes/2;this._s2vKey=i.shiftBytes(f,y),this._ctrKey=f},encrypt:function(f,y){!y&&f&&(y=f,f=[]);var r=u.create(this._s2vKey);Array.prototype.forEach.call(f,function(l){r.updateAAD(l)});var T=r.finalize(y),p=i.bitand(T,i.const_nonMSB),k=e.AES.encrypt(y,this._ctrKey,{iv:p,mode:e.mode.CTR,padding:e.pad.NoPadding});return T.concat(k.ciphertext)},decrypt:function(f,y){!y&&f&&(y=f,f=[]);var r=i.shiftBytes(y,16),T=i.bitand(r,i.const_nonMSB),p=e.AES.decrypt({ciphertext:y},this._ctrKey,{iv:T,mode:e.mode.CTR,padding:e.pad.NoPadding}),k=u.create(this._s2vKey);Array.prototype.forEach.call(f,function(_){k.updateAAD(_)});var l=k.finalize(p);return i.equals(r,l)?p:!1}})})(G);const Xt=new URL("/assets/sqlite.worker.710c9469.js",self.location),Jt=new URL("/assets/sql-wasm.dd613b12.wasm",self.location),Qt=()=>Math.random().toString(36).substr(2,9);let ze=0;async function ei(){if(window._worker)return window._worker;if(ze)return new Promise((t,o)=>{function i(){setTimeout(()=>{if(window._worker){t(window._worker);return}i()},50)}i()});ze=1;async function e(){return await We.exports.createDbWorker([{from:"inline",config:{serverMode:"full",url:`${location.protocol}//${location.host}/analytics.sqlite3.png`,requestChunkSize:1024*32}}],Xt.toString(),Jt.toString())}return window._worker=await e(),window._worker}async function de(e){let t=await ei(),o=Qt();console.time("query time "+o);let i=await t.db.query(e);return console.log("query",e,i),console.timeEnd("query time "+o),i}function De(e){return e||(e=new Date),(typeof e!="object"||!e.toISOString)&&(e=new Date(e)),e.toISOString().slice(0,10)}function _e(e,t){let o=[],i;if(e.state.key&&(i=G.SIV.create(G.enc.Hex.parse(e.state.key))),e.state.host){let s=`host = '${e.state.host}'`;if(i){let a=i.encrypt(e.state.host).toString();s=`(${s} OR host = '${a}')`}o.push(s)}if(e.state.path){let s=`pathname = '${e.state.path}'`;if(i){let a=i.encrypt(e.state.path).toString();s=`(${s} OR pathname = '${a}')`}o.push(s)}if(e.state.referrer!==""){let s=e.state.referrer||"",a=`referer_host = '${s}'`;if(i&&s){let u=i.encrypt(s).toString();a=`(${a} OR referer_host = '${u}')`}o.push(a)}if(e.state.utm_source!==""){let s=e.state.utm_source||null,a=s?`utm_source = '${s}'`:"utm_source is null";if(i&&s){let u=i.encrypt(s).toString();a=`(${a} OR utm_source = '${u}')`}o.push(a)}if(e.state.utm_medium!==""){let s=e.state.utm_medium||null,a=s?`utm_medium = '${s}'`:"utm_medium is null";if(i&&s){let u=i.encrypt(s).toString();a=`(${a} OR utm_medium = '${u}')`}o.push(a)}if(e.state.utm_campaign!==""){let s=e.state.utm_campaign||null,a=s?`utm_campaign = '${s}'`:"utm_campaign is null";if(i&&s){let u=i.encrypt(s).toString();a=`(${a} OR utm_campaign = '${u}')`}o.push(a)}return e.state.os&&o.push(`os = '${e.state.os}'`),e.state.device&&o.push(`device_type = '${e.state.device}'`),e.state.is_bot!==""&&o.push(`bot = '${e.state.is_bot}'`),e.state.is_new!==""&&o.push(`is_new = '${e.state.is_new}'`),e.state.browser&&o.push(`browser = '${e.state.browser}'`),e.state.language&&o.push(`lang = '${e.state.language}'`),e.state.country&&o.push(`country_code = '${e.state.country}'`),e.state.start&&e.state.end&&!t&&o.push(`date BETWEEN '${De(e.state.start)}' AND '${De(e.state.end)}'`),(o.length?" WHERE ":"")+(o.join(" AND ")||"")}async function ti(e){if(!e.state.host)return[];const t=e.state.key?G.SIV.create(G.enc.Hex.parse(e.state.key)):null;let o=`SELECT pathname, AVG(load_time) as AvgLoadTime from visits${_e(e)} GROUP BY pathname ORDER BY AvgLoadTime DESC LIMIT 10;`,i=await de(o);return t&&i.forEach(s=>{try{let a=t.decrypt(G.enc.Hex.parse(s.pathname)).toString(G.enc.Utf8);a&&a!="false"&&(s.pathname=a)}catch{}}),i}async function Me(e,t="hour",o=10){if(!e.state.host)return[];const i=e.state.key?G.SIV.create(G.enc.Hex.parse(e.state.key)):null,s=e.state.showVisitors?"count(DISTINCT ip)":"count(*)";let a=t==="hour"||t==="date",u=a?t:s,f=a?"ASC":"DESC",y=a?"":` LIMIT ${o}`,r=`SELECT ${t}, ${s} FROM visits${_e(e)} GROUP BY ${t} ORDER BY ${u} ${f}${y};`,T=await de(r);return i&&T.forEach(p=>{try{let k=i.decrypt(G.enc.Hex.parse(p[t])).toString(G.enc.Utf8);k&&k!="false"&&(p[t]=k)}catch{}}),T}const se={toObject:function(e){return typeof e=="string"?JSON.parse(e):e},toBoolean:function(e){return typeof e=="string"?e==="true":e},toInt:function(e){return typeof e=="string"?parseInt(e):e}},B={id:{type:String,required:!0},data:{type:[String,Array],required:!0},barColors:{type:[String,Array,Function],required:!1},xkey:{type:String,required:!1,default:"key"},ykeys:{type:[String,Array],required:!1,default:function(){return["value"]}},labels:{type:[String,Array],required:!1,default:function(){return["Value"]}},hoverCallback:{type:Function,required:!1},axes:{type:[Boolean,String],required:!1,default:!0},hideHover:{type:String,required:!1},stacked:{type:[Boolean,String],required:!1},resize:{type:[Boolean,String],required:!1},horizontal:{type:[Boolean,String],required:!1,default:!1},grid:{type:[Boolean,String],required:!1,default:!0},gridTextColor:{type:String,required:!1,default:"#888"},gridTextSize:{type:[Number,String],required:!1,default:12},gridTextFamily:{type:String,required:!1,default:"sans-serif"},gridTextWeight:{type:String,required:!1,default:"normal"},colors:{type:[String,Array],required:!1},formatter:{type:Function,required:!1},lineColors:{type:[String,Array,Function],required:!1},xLabels:{type:String,required:!1},lineWidth:{type:[Number,String],required:!1},pointSize:{type:[Number,String],required:!1},pointFillColors:{type:[String,Array],required:!1},pointStrokeColors:{type:[String,Array],required:!1},ymax:{type:String,required:!1},ymin:{type:String,required:!1},smooth:{type:[Boolean,String],required:!1,default:!0},parseTime:{type:[Boolean,String],required:!1,default:!0},postUnits:{type:String,required:!1},preUnits:{type:String,required:!1},dateFormat:{type:Function,required:!1},xLabelFormat:{type:Function,required:!1},yLabelFormat:{type:Function,required:!1},xLabelAngle:{type:String,required:!1},goals:{type:[String,Array],required:!1},goalStrokeWidth:{type:[Number,String],required:!1},goalLineColors:{type:[String,Array],required:!1},events:{type:[String,Array],required:!1},eventStrokeWidth:{type:String,required:!1},eventLineColors:{type:[String,Array],required:!1},fillOpacity:{type:String,required:!1},behaveLikeLine:{type:[Boolean,String],required:!1,default:!1}},ii={id:B.id,data:B.data,barColors:B.barColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,hoverCallback:B.hoverCallback,grid:B.grid,horizontal:B.horizontal,axes:B.axes,hideHover:B.hideHover,stacked:B.stacked,resize:B.resize,ymax:B.ymax,ymin:B.ymin,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight},si={id:B.id,data:B.data,colors:B.colors,formatter:B.formatter,resize:B.resize},Se={id:B.id,data:B.data,resize:B.resize,lineColors:B.lineColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabels:B.xLabels,grid:B.grid,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight,lineWidth:B.lineWidth,pointSize:B.pointSize,pointFillColors:B.pointFillColors,pointStrokeColors:B.pointStrokeColors,ymax:B.ymax,ymin:B.ymin,smooth:B.smooth,hideHover:B.hideHover,parseTime:B.parseTime,postUnits:B.postUnits,preUnits:B.preUnits,dateFormat:B.dateFormat,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,goals:B.goals,goalStrokeWidth:B.goalStrokeWidth,goalLineColors:B.goalLineColors,events:B.events,eventStrokeWidth:B.eventStrokeWidth,eventLineColors:B.eventLineColors,fillOpacity:B.fillOpacity,hoverCallback:B.hoverCallback},Ee={behaveLikeLine:B.behaveLikeLine};for(var Le in Se)Se.hasOwnProperty(Le)&&(Ee[Le]=Se[Le]);const xe={addOption(e,t){this[e]&&(t[e]=this[e])},addOptionAsObject(e,t){this[e]&&(t[e]=se.toObject(this[e]))}};var ai={bar:{props:ii,methods:xe},donut:{props:si,methods:xe},line:{props:Se,methods:xe},area:{props:Ee,methods:xe}},pe=(e,t)=>{const o=e.__vccOpts||e;for(const[i,s]of t)o[i]=s;return o};const ni={name:"area-chart",mixins:[ai.area],data(){return{chart:null}},watch:{data(e){this.$nextTick(()=>{this.chart.options.labels=se.toObject(this.labels),this.chart.options.xkey=this.xkey,this.chart.options.ykeys=se.toObject(this.ykeys),this.lineColors&&(this.chart.options.lineColors=se.toObject(this.lineColors)),this.chart.setData(se.toObject(this.data))})}},mounted(){let e={element:this.id,data:se.toObject(this.data),resize:se.toBoolean(this.resize),labels:se.toObject(this.labels),xkey:this.xkey,ykeys:se.toObject(this.ykeys),grid:se.toBoolean(this.grid),gridTextColor:this.gridTextColor,gridTextSize:se.toInt(this.gridTextSize),gridTextFamily:this.gridTextFamily,gridTextWeight:this.gridTextWeight,lineWidth:this.lineWidth,pointSize:this.pointSize,ymax:this.ymax,ymin:this.ymin,smooth:se.toBoolean(this.smooth),hideHover:this.hideHover,parseTime:se.toBoolean(this.parseTime),postUnits:this.postUnits,preUnits:this.preUnits,xLabelAngle:this.xLabelAngle,goalStrokeWidth:this.goalStrokeWidth,eventStrokeWidth:this.eventStrokeWidth,fillOpacity:this.fillOpacity,behaveLikeLine:this.behaveLikeLine};this.addOptionAsObject("lineColors",e),this.addOption("xLabels",e),this.addOptionAsObject("pointFillColors",e),this.addOptionAsObject("pointStrokeColors",e),this.addOption("dateFormat",e),this.addOption("xLabelFormat",e),this.addOption("yLabelFormat",e),this.addOptionAsObject("goals",e),this.addOptionAsObject("goalLineColors",e),this.addOptionAsObject("events",e),this.addOptionAsObject("eventLineColors",e),this.addOption("hoverCallback",e),this.chart=Morris.Area(e)}},oi=["id"];function ri(e,t,o,i,s,a){return A(),M("div",{id:e.id},null,8,oi)}var li=pe(ni,[["render",ri]]);const ci={id:"visits"},ui={key:0,class:"spinner-border spinme",role:"status"},di={key:1},hi={class:"edge"},mi={setup(e){const t=he();let{start:o,end:i,host:s,path:a,os:u,device:f,is_bot:y,is_new:r,browser:T,language:p,referrer:k,utm_source:l,utm_medium:_,utm_campaign:n,country:d,range:v,summary:x,showVisitors:I}=me();const P=J([]),j=J(!0),V=J(!1),$=J(null),D=ue(()=>v.value<2),C=ue(()=>D.value?"hour":"date"),z=m=>D.value?new Date(m).toLocaleString():`${new Date(m).toLocaleString(navigator.language||"en-us",{weekday:"long"})},
${new Date(m).toLocaleDateString()}`,R=J("day");async function w(){if(!s.value)return j.value=!1;v.value>1e3?R.value="month":R.value=D.value?"hour":"day";const m=_e(t);let Y=m.split(" ").pop().replace("'","").replace("'",""),Z=I.value?"count(DISTINCT ip)":"count(*)",K=D.value?"hour":"date";const O=`SELECT ${K}, ${Z} FROM visits${m} GROUP BY ${K} ORDER BY ${K} ASC;`;let F=await de(O);F.forEach(L=>{D.value&&(L.hour=+new Date(`${Y}T${L.hour<10?"0":""}${L.hour}:00:00Z`)),L.value=L["count(DISTINCT ip)"]||L["count(*)"],delete L["count(DISTINCT ip)"],delete L["count(*)"]}),F.filter(L=>L.date==new Date().toISOString().split("T")[0]).length||v.value==1?V.value=!0:V.value=!1,P.value=F,j.value=!1;const U=`SELECT hour, count(*) FROM visits${_e(t,1)} AND date = '${De()}' GROUP BY hour`,be=(await de(U)).pop();let ve=0;be&&(ve=be["count(*)"]),t.commit("setLiveVisitors",ve)}function W(m,Y,Z,K){return K.date&&($.value=K.date),Z}function h(m,Y){t.commit("setRange",m)}function b(){if($.value){let m=new Date-new Date($.value),Y=Math.floor(m/864e5)*-1;Y>-33&&Y<2&&h(Y)}}function g(){(v.value===1||v.value<0)&&h(7)}return ge(w),S(s,w),S(a,w),S(v,w),S(I,w),S(u,w),S(f,w),S(y,w),S(r,w),S(T,w),S(p,w),S(k,w),S(l,w),S(_,w),S(n,w),S(d,w),(m,Y)=>(A(),M("div",ci,[j.value?(A(),M("div",ui)):P.value.length?(A(),Ae(li,{key:2,id:"line",data:P.value,xkey:E(C),ykey:"value",resize:"true",labels:E(I)?'[ "Visitors" ]':'[ "Pageviews" ]',"line-color":"#2847b7","fill-opacity":"0.16","line-width":"4",dateFormat:z,smooth:!1,xLabelAngle:"45",removed:"","data-xLabelFormat":"labelFormat","data-xLabels":"xLabel",hoverCallback:W,onClick:b,onDblclick:g,grid:"true","grid-text-weight":"bold"},null,8,["data","xkey","labels"])):(A(),M("div",di,"No data for selected period")),Fe(c("div",hi,null,512),[[Ke,V.value]])]))}};var fi=pe(mi,[["__scopeId","data-v-9084c4ac"]]);const pi={key:0,class:"card-header"},vi={class:"card-body"},gi={key:0,class:"card-title"},yi={key:1,class:"spinner-border spinme",role:"status"},_i={key:1,class:"card-footer"},bi={props:{header:String,title:String,body:String,footer:String,loading:Boolean},setup(e){const{dark:t}=me();return(o,i)=>(A(),M("div",{class:oe(["card min-357",{"bg-dark":E(t)}])},[e.header?(A(),M("div",pi,[Be(o.$slots,"header",{},()=>[Q(q(e.header),1)],!0)])):X("",!0),c("div",vi,[e.title?(A(),M("h5",gi,q(e.title),1)):X("",!0),e.loading?(A(),M("div",yi)):X("",!0),Be(o.$slots,"default",{},()=>[Q(q(e.body),1)],!0)]),e.footer?(A(),M("div",_i,[Be(o.$slots,"footer",{},()=>[Q(q(e.footer),1)],!0)])):X("",!0)],2))}};var Oe=pe(bi,[["__scopeId","data-v-0df628f2"]]);const ki={class:"card-title"},wi={props:{title:String,underline:Boolean,muted:{type:Boolean,default:!0}},setup(e){const t=e,o=he();let i=J("-");const{host:s,path:a,os:u,device:f,is_bot:y,is_new:r,browser:T,language:p,referrer:k,utm_source:l,utm_medium:_,utm_campaign:n,country:d,range:v,summary:x}=me();function I($){return`${($*100).toFixed(2)}%`}function P($){return $==parseInt($)&&($=parseInt($)),typeof $=="number"&&($=$.toLocaleString()),$}function j($){return($-($%=60))/60+"m "+parseInt($)}async function V(){if(!o.state.host)return;const $=_e(o);if(t.title==="Visitors"){const D=`SELECT count(DISTINCT ip) from visits${$}`;let C=await de(D);i.value=C[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const D=`SELECT count(*) from VISITS${$}`;let C=await de(D);i.value=C[0]["count(*)"]}else if(t.title==="Bounce Rate"){let D=`SELECT count(DISTINCT ip) from visits${$}`,C=await de(D),z=C[0]["count(DISTINCT ip)"];D=`SELECT count(DISTINCT ip) from visits${$} AND is_new = 1`,C=await de(D);let R=C[0]["count(DISTINCT ip)"];i.value=z===0?0:I(R/z)}else if(t.title==="Session Length"){const D=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${$} GROUP BY ip) x`;let C=await de(D);i.value=j(C[0]["AVG(x.MaxValue)"])||0}}return ge(V),S(s,V),S(a,V),S(v,V),S(u,V),S(f,V),S(y,V),S(r,V),S(T,V),S(p,V),S(k,V),S(l,V),S(_,V),S(n,V),S(d,V),($,D)=>(A(),M("div",{class:oe(["col-6 col-md-3",{cp:e.underline,selected:!e.muted&&!e.underline}])},[c("h6",{class:oe(["card-subtitle mb-2",{"text-muted":e.muted,"text-decoration-underline":e.underline,"link-color":e.underline}])},q(e.title),3),c("h4",ki,q(P(E(i))),1)],2))}};var $e=pe(wi,[["__scopeId","data-v-7d6c9717"]]);const Si={class:"mt-2 pseudotable"},xi={key:0,class:"spinner-border spinme",role:"status"},$i={key:1,class:"mb-1"},Ci={class:"mb-1"},Bi=Q("\xA0 "),Ti={key:0,style:{display:"inline-block","margin-left":"-3px"}},Di=Q("\xA0\u2009 "),Li={key:2},Oi={key:3,style:{display:"inline-block"}},Fi=["src"],Ai=Q("\xA0\u2009 "),Ii={key:4,style:{display:"inline-block"}},zi=["src"],Mi=Q("\xA0\u2009 "),Ei={key:5,style:{display:"inline-block"}},Ri=["src"],Ni=Q("\xA0\u2009 "),Pi={key:6,style:{display:"inline-block"}},Vi=["onClick"],Wi={key:7,style:{display:"inline-block"}},Ki=["href"],qi={key:8},Ui={class:"float-right text-right pt-1"},ae={props:{column:String,iconify:Boolean,favicons:Boolean,browserIcons:Boolean,osIcons:Boolean,links:Boolean,setter:String,linkPrefix:String,limit:Number,defaultText:String,valueColumn:String,loadTimes:Boolean,valueFormatter:Function,keyFormatter:Function},setup(e){const{column:t,iconify:o,favicons:i,browserIcons:s,osIcons:a,links:u,setter:f,linkPrefix:y,limit:r,defaultText:T,valueColumn:p,loadTimes:k,valueFormatter:l,keyFormatter:_}=e,n=he(),{host:d,path:v,os:x,device:I,is_bot:P,is_new:j,browser:V,language:$,referrer:D,utm_source:C,utm_medium:z,utm_campaign:R,country:w,range:W,summary:h,showVisitors:b}=me(),g=ue(()=>p||(b.value?"count(DISTINCT ip)":"count(*)")),m=J([]),Y=J(0),Z=J(!0);async function K(){let L=k?await ti(n):await Me(n,t,r||10),te=L.filter(N=>!N[t]);if(te.length>1){let N=te.map(ne=>ne[g.value]).reduce((ne,fe)=>ne+=fe),re=L.filter(ne=>ne[t]),ce={};ce[t]=null,ce[g.value]=N,re.unshift(ce),L=re}L.sort((N,re)=>re[g.value]-N[g.value]),m.value=L;try{Y.value=L[0][g.value]}catch{Y.value=0}Z.value=!1}function O(L){return L==parseInt(L)&&(L=parseInt(L)),typeof L=="number"&&(L=L.toLocaleString()),L}function F(L,te=48,N="web"){const re="avant,basilisk,brave,browsh,chrome,chromium,deno,dolphin,edge,electron,epic,falkon,firefox,geckoview,hermes,icecat,jsdom,konqueror,maxthon,midori,netsurf,node.js,nw.js,opera,otter,puffin,qutebrowser,safari,seamonkey,servo,silk,spidermonkey,tor,uc,v8,vivaldi,web,webkit,yandex".split(","),ce=L.toLowerCase().trim().split(" ");let ne=re.filter(fe=>ce.includes(fe));return ne.length&&(N=ne[0]),`https://cdnjs.cloudflare.com/ajax/libs/browser-logos/72.0.0/${N}/${N}_${te}x${te}.png`}function U(L){const te="AIX,AND,AMG,ATV,ARL,BTR,SBA,BEO,BLB,QNX,CAI,CES,COS,CYN,DEB,DEE,DFB,FED,FOS,FIR,BSD,FYD,GNT,GTV,HPX,HAI,IPA,HAR,KOS,KNO,KBT,LIN,LBT,MAC,MAE,MAG,MDR,SMG,MIN,MOR,NBS,WII,NDS,OS2,OBS,OWR,PCL,PSP,PS3,RHT,ROS,ROK,RSO,REM,REX,SAB,SSE,SAF,SLW,SOS,SYL,SYM,SYS,S40,S60,SY3,TDX,TIZ,UBT,WAS,WHS,WIN,WCE,WIO,WMO,WPH,WRT,XBX,XBT,YNS,IOS,POS,WOS".split(","),N="aix,android,amigaos,tvos,arch linux,backtrack,bada,beos,blackberry os,blackberry tablet os,caixa m\xE1gica,centos,chrome os,cyanogenmod,debian,deepin,dragonfly,fedora,firefox os,fire os,freebsd,fydeos,gentoo,google tv,hp-ux,haiku os,ipados,harmonyos,kaios,knoppix,kubuntu,linux,lubuntu,mac,maemo,mageia,mandriva,meego,mint,morphos,netbsd,nintendo,nintendo mobile,os/2,openbsd,openwrt,pclinuxos,playstation portable,playstation,red hat,risc os,roku os,rosa,remix os,rex,sabayon,suse,sailfish os,slackware,solaris,syllable,symbian,symbian os,symbian os series 40,symbian os series 60,symbian^3,threadx,tizen,ubuntu,watchos,whale os,windows,windows ce,windows iot,windows mobile,windows phone,windows rt,xbox,xubuntu,yunos,ios,palmos,webos".split(","),re="16,24,32,48,64,128,256,512".split(",");let ce="",ne=re[3];L=L.toLowerCase().trim();let fe=N.map(Re=>L.includes(Re)).indexOf(!0);return fe>0&&(ce=te[fe]),ce?`https://cdn.jsdelivr.net/npm/@egoistdeveloper/operating-system-logos/src/${ne}x${ne}/${ce}.png`:"/default.png"}function le(L){return L=(L+"").toLowerCase().trim(),{desktop:"bi bi-pc-display-horizontal",laptop:"bi bi-laptop",tablet:"bi bi-tablet",mobile:"bi bi-phone",returning:"bi bi-arrow-repeat",new:"bi bi-person-plus","normal users":"bi bi-person-square","headless browsers":"bi bi-robot"}[L]}function be(L){return L=(L+"").toLowerCase().trim(),L.indexOf("http")===0&&(L=new URL(L).hostname),L}function ve(L,te=40){return L&&L.length>te&&(L=L.substring(0,te)+"..."),L}return ge(K),S(d,K),S(v,K),S(W,K),S(b,K),S(x,K),S(I,K),S(P,K),S(j,K),S(V,K),S($,K),S(D,K),S(C,K),S(z,K),S(R,K),S(w,K),(L,te)=>(A(),M("div",Si,[Z.value?(A(),M("div",xi)):m.value.length?(A(!0),M(ke,{key:2},Ce(m.value,N=>(A(),M("div",Ci,[c("div",{class:"shaded d-inline-block bg-grey text-nowrap pt-1 pb-1",style:qe(`width: ${N[E(g)]/Y.value*85}%`)},[Bi,e.iconify&&le(e.keyFormatter?e.keyFormatter(N[e.column]):N[e.column])?(A(),M("div",Ti,[c("i",{class:oe(le(e.keyFormatter?e.keyFormatter(N[e.column]):N[e.column]))},null,2),Di])):X("",!0),!N[e.column]&&e.setter?(A(),M("a",{key:1,class:"text-decoration-underline cp",onClick:te[0]||(te[0]=re=>e.setter&&E(n).commit(e.setter,0))},q(e.defaultText||"None"),1)):N[e.column]?X("",!0):(A(),M("span",Li,q(e.defaultText||"None"),1)),e.favicons?(A(),M("div",Oi,[N[e.column]&&e.favicons?(A(),M("img",{key:0,src:`https://logo.clearbit.com/${be(N[e.column])}`,onerror:"this.onerror=null; this.src='default.png';"},null,8,Fi)):X("",!0),Ai])):X("",!0),e.browserIcons?(A(),M("div",Ii,[N[e.column]&&e.browserIcons?(A(),M("img",{key:0,src:`${F(N[e.column])}`},null,8,zi)):X("",!0),Mi])):X("",!0),e.osIcons?(A(),M("div",Ei,[N[e.column]&&e.osIcons?(A(),M("img",{key:0,src:`${U(N[e.column])}`},null,8,Ri)):X("",!0),Ni])):X("",!0),e.setter?(A(),M("div",Pi,[N[e.column]?(A(),M("a",{key:0,class:"d-inline-block text-truncate cp",onClick:re=>E(n).commit(e.setter,N[e.column])},q(ve(e.keyFormatter?e.keyFormatter(N[e.column]):N[e.column])),9,Vi)):X("",!0)])):e.links?(A(),M("div",Wi,[N[e.column]&&e.links?(A(),M("a",{key:0,class:"d-inline-block text-truncate",href:`${N[e.column].indexOf("http")?"http://":""}${e.linkPrefix||""}${N[e.column]}`,target:"_blank"},q(ve(N[e.column])),9,Ki)):X("",!0)])):X("",!0),N[e.column]&&!e.links&&!e.setter?(A(),M("span",qi,q(e.keyFormatter?e.keyFormatter(N[e.column]):N[e.column]),1)):X("",!0)],4),c("span",Ui,q(e.valueFormatter?e.valueFormatter(N[E(g)]):O(N[E(g)])),1)]))),256)):(A(),M("div",$i," No data for selected period "))]))}},Hi={name:"svg-map",data(){return{id:"svg-map-"+Math.random().toString(36).substr(2,9)}},props:{countries:{type:Object},dark:{type:Boolean},showVisitors:{type:Boolean}},methods:{createMap(){let e={};document.querySelectorAll(".svgMap-tooltip").forEach(t=>t.remove()),this.showVisitors?e.visitors={name:"visitors",format:"{0}",thousandSeparator:","}:e.pageviews={name:"pageviews",format:"{0}",thousandSeparator:","},new svgMap({targetElementID:this.id,colorMax:this.dark?"#4c9be8":"#3459E6",colorMin:"#c7d2fc",colorNoData:this.dark?"rgb(78, 93, 108)":"#E2E2E2",data:{data:e,applyData:this.showVisitors?"visitors":"pageviews",values:this.countries||{}}}),this.$nextTick(()=>{document.querySelectorAll(".svgMap-map-image path[data-id]").forEach(t=>{t.onclick=o=>{const i=t.getAttribute("data-id");this.$emit("clicked",i)}})})}},computed:{bundle(){let{countries:e,dark:t}=this;return{countries:e,dark:t}}},mounted(){this.createMap()},watch:{bundle(e){this.$refs.svgMap.innerHTML="",this.$nextTick(()=>{this.createMap()})}}},Yi=["id"];function Gi(e,t,o,i,s,a){return A(),M("div",{id:s.id,ref:"svgMap"},null,8,Yi)}var Zi=pe(Hi,[["render",Gi]]);const ee=e=>(Ue("data-v-b2d17aca"),e=e(),He(),e),ji={class:"container mt-5"},Xi={class:"row"},Ji={class:"col-md-12"},Qi={class:"row p-1 pt-2"},es={class:"row mt-3"},ts={class:"col-md-6"},is={class:"card-body"},ss=Ie('<h5 class="card-title float-left tweaked" data-v-b2d17aca>Sources</h5><ul class="nav nav-tabs float-right" data-v-b2d17aca><li class="nav-item ms-auto" data-v-b2d17aca><a class="nav-link active" data-bs-toggle="tab" href="#referrers" data-v-b2d17aca><span class="d-none d-sm-inline" data-v-b2d17aca>Referrers</span><span class="d-inline d-sm-none" data-v-b2d17aca>All</span></a></li><li class="nav-item ms-auto" data-v-b2d17aca><a class="nav-link" data-bs-toggle="tab" href="#referrer_urls" data-v-b2d17aca>URLs</a></li><li class="nav-item" data-v-b2d17aca><a class="nav-link" data-bs-toggle="tab" href="#medium" data-v-b2d17aca>Medium</a></li><li class="nav-item" data-v-b2d17aca><a class="nav-link" data-bs-toggle="tab" href="#source" data-v-b2d17aca>Source</a></li><li class="nav-item" data-v-b2d17aca><a class="nav-link" data-bs-toggle="tab" href="#campaign" data-v-b2d17aca>Campaign</a></li></ul>',2),as={class:"tab-content mt-5"},ns={class:"tab-pane fade active show",id:"referrers"},os=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),rs={class:"text-muted w-495 d-inline-block text-right"},ls={class:"tab-pane fade show",id:"referrer_urls"},cs=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),us={class:"text-muted w-495 d-inline-block text-right"},ds={class:"tab-pane fade show",id:"medium"},hs=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),ms={class:"text-muted w-495 d-inline-block text-right"},fs={class:"tab-pane fade show",id:"source"},ps=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),vs={class:"text-muted w-495 d-inline-block text-right"},gs={class:"tab-pane fade show",id:"campaign"},ys=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Source",-1)),_s={class:"text-muted w-495 d-inline-block text-right"},bs={class:"col-md-6 mt-3 mt-sm-0"},ks={class:"card-body"},ws=Ie('<h5 class="card-title float-left tweaked" data-v-b2d17aca>Pages</h5><ul class="nav nav-tabs float-right" data-v-b2d17aca><li class="nav-item ms-auto" data-v-b2d17aca><a class="nav-link active" data-bs-toggle="tab" href="#pages" data-v-b2d17aca>Top Pages</a></li><li class="nav-item" data-v-b2d17aca><a class="nav-link" data-bs-toggle="tab" href="#loadtimes" data-v-b2d17aca>Load Times</a></li></ul>',2),Ss={class:"tab-content mt-5"},xs={class:"tab-pane fade show active",id:"pages"},$s=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Cs={class:"text-muted w-495 d-inline-block text-right"},Bs={class:"tab-pane fade show",id:"loadtimes"},Ts=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1)),Ds=ee(()=>c("small",{class:"text-muted w-495 d-inline-block text-right"},"Avg. Load Time",-1)),Ls={class:"row mt-3"},Os={class:"col-md-6"},Fs={class:"col-md-6 mt-3 mt-sm-0"},As=ee(()=>c("h5",{class:"card-title float-left tweaked"},"Users",-1)),Is=ee(()=>c("ul",{class:"nav nav-tabs float-right"},[c("li",{class:"nav-item ms-auto"},[c("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#size"},[c("span",{class:"d-none d-sm-inline"},"Device "),Q("Type")])]),c("li",{class:"nav-item"},[c("a",{class:"nav-link d-none d-sm-inline-block","data-bs-toggle":"tab",href:"#new"},"Returning")]),c("li",{class:"nav-item"},[c("a",{class:"nav-link","data-bs-toggle":"tab",href:"#browser"},"Browser")]),c("li",{class:"nav-item"},[c("a",{class:"nav-link","data-bs-toggle":"tab",href:"#language"},[Q("Lang"),c("span",{class:"d-none d-sm-inline"},"uage")])]),c("li",{class:"nav-item"},[c("a",{class:"nav-link","data-bs-toggle":"tab",href:"#os"},"OS")])],-1)),zs={class:"tab-content mt-5"},Ms={class:"tab-pane fade show active",id:"size"},Es=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Device Type",-1)),Rs={class:"text-muted w-495 d-inline-block text-right"},Ns=ee(()=>c("hr",null,null,-1)),Ps={class:"tab-pane fade",id:"new"},Vs=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"New vs. Returning",-1)),Ws={class:"text-muted w-495 d-inline-block text-right"},Ks={class:"tab-pane fade",id:"browser"},qs=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Browser",-1)),Us={class:"text-muted w-495 d-inline-block text-right"},Hs={class:"tab-pane fade",id:"language"},Ys=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"Language",-1)),Gs={class:"text-muted w-495 d-inline-block text-right"},Zs={class:"tab-pane fade",id:"os"},js=ee(()=>c("small",{class:"text-muted w-495 d-inline-block"},"OS",-1)),Xs={class:"text-muted w-495 d-inline-block text-right"},Js={setup(e){const t=w=>Math.max(0,w.toFixed(2)),o=w=>(w||"").charAt(0).toUpperCase()+(w||"").slice(1),i=w=>w?"New":"Returning",s=w=>w?"Headless Browsers":"Normal Users",a=w=>{let W={aa:"Afar",ab:"Abkhazian",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bh:"Bihari languages",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan; Valencian",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi; Dhivehi; Maldivian",dz:"Dzongkha",ee:"Ewe",el:"Greek, Modern (1453-)",en:"English",eo:"Esperanto",es:"Spanish; Castilian",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fulah",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Gaelic; Scomttish Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian; Haitian Creole",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ie:"Interlingue; Occidental",ig:"Igbo",ii:"Sichuan Yi; Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu; Gikuyu",kj:"Kuanyama; Kwanyama",kk:"Kazakh",kl:"Kalaallisut; Greenlandic",km:"Central Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kirghiz; Kyrgyz",la:"Latin",lb:"Luxembourgish; Letzeburgesch",lg:"Ganda",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Bokm\xE5l, Norwegian; Norwegian Bokm\xE5l",nd:"Ndebele, North; North Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch; Flemish",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",no:"Norwegian",nr:"Ndebele, South; South Ndebele",nv:"Navajo; Navaho",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",om:"Oromo",or:"Oriya",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",pi:"Pali",pl:"Polish",ps:"Pushto; Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ro:"Romanian; Moldavian; Moldovan",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Sotho, Southern",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap\xFCk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zh:"Chinese",zu:"Zulu"},h=w;try{h=h.toLowerCase().split("-")[0]}catch{}try{h=W[h]}catch{}return(!h||h=="undefined")&&(h="Unknown"),h+" ("+w+")"},u=he(),f=J({}),{range:y,host:r,path:T,os:p,device:k,is_bot:l,is_new:_,browser:n,language:d,referrer:v,utm_source:x,utm_medium:I,utm_campaign:P,country:j,dark:V,summary:$,showVisitors:D}=me(),C=ue(()=>D.value?"Visitors":"Pageviews");async function z(){let w=await Me(u,"country_code",999),W={};w.forEach(h=>{D.value?W[h.country_code]={visitors:h["count(DISTINCT ip)"]}:W[h.country_code]={pageviews:h["count(*)"]}}),f.value=W}function R(w){console.log("clicked on",w),u.commit("setCountry",w)}return ge(z),S(r,z),S(T,z),S(y,z),S(D,z),S(p,z),S(k,z),S(l,z),S(_,z),S(n,z),S(d,z),S(v,z),S(x,z),S(I,z),S(P,z),S(j,z),(w,W)=>(A(),M("div",ji,[H(jt),c("div",Xi,[c("div",Ji,[H(Oe,null,{default:Te(()=>[c("div",Qi,[H($e,{title:"Visitors",muted:!1,underline:!E(D),onClick:W[0]||(W[0]=h=>E(u).commit("setShowVisitors",!0))},null,8,["underline"]),H($e,{title:"Total Pageviews",muted:!1,underline:E(D),onClick:W[1]||(W[1]=h=>E(u).commit("setShowVisitors",!1))},null,8,["underline"]),H($e,{title:"Bounce Rate"}),H($e,{title:"Session Length"})]),H(fi)]),_:1})])]),c("div",es,[c("div",ts,[c("div",{class:oe(["card min-357",{"bg-dark":E(V)}])},[c("div",is,[ss,c("div",as,[c("div",ns,[os,c("small",rs,q(E(C)),1),H(ae,{column:"referer_host",setter:"setReferrer",favicons:!0,links:!0,defaultText:"Direct / None"})]),c("div",ls,[cs,c("small",us,q(E(C)),1),H(ae,{column:"referer_url",favicons:!0,links:!0,defaultText:"Direct / None"})]),c("div",ds,[hs,c("small",ms,q(E(C)),1),H(ae,{column:"utm_medium",setter:"setUtm_medium"})]),c("div",fs,[ps,c("small",vs,q(E(C)),1),H(ae,{column:"utm_source",setter:"setUtm_source"})]),c("div",gs,[ys,c("small",_s,q(E(C)),1),H(ae,{column:"utm_campaign",setter:"setUtm_campaign"})])])])],2)]),c("div",bs,[c("div",{class:oe(["card min-357",{"bg-dark":E(V)}])},[c("div",ks,[ws,c("div",Ss,[c("div",xs,[$s,c("small",Cs,q(E(C)),1),H(ae,{column:"pathname",setter:"setPath",defaultText:"None"})]),c("div",Bs,[Ts,Ds,H(ae,{column:"pathname",valueColumn:"AvgLoadTime",setter:"setPath",loadTimes:!0,valueFormatter:t})])])])],2)])]),c("div",Ls,[c("div",Os,[H(Oe,{title:"Countries"},{default:Te(()=>[H(Zi,{countries:f.value,dark:E(V),showVisitors:E(D),onClicked:R},null,8,["countries","dark","showVisitors"])]),_:1})]),c("div",Fs,[H(Oe,null,{default:Te(()=>[As,Is,c("div",zs,[c("div",Ms,[Es,c("small",Rs,q(E(C)),1),H(ae,{column:"device_type",setter:"setDevice",iconify:!0,keyFormatter:o}),Ns,H(ae,{column:"bot",setter:"setIs_bot",iconify:!0,defaultText:"Normal Users",keyFormatter:s})]),c("div",Ps,[Vs,c("small",Ws,q(E(C)),1),H(ae,{column:"is_new",setter:"setIs_new",iconify:!0,defaultText:"Returning",keyFormatter:i})]),c("div",Ks,[qs,c("small",Us,q(E(C)),1),H(ae,{column:"browser",setter:"setBrowser",browserIcons:!0})]),c("div",Hs,[Ys,c("small",Gs,q(E(C)),1),H(ae,{column:"lang",setter:"setLanguage",keyFormatter:a})]),c("div",Zs,[js,c("small",Xs,q(E(C)),1),H(ae,{column:"os",setter:"setOs",osIcons:!0})])])]),_:1})])])]))}};var Qs=pe(Js,[["__scopeId","data-v-b2d17aca"]]);const ea={setup(e){const t=he();function o(){let i=localStorage.getItem("__analytics_encryption_key"),s=localStorage.getItem("__analytics_public_key"),a=localStorage.getItem("__analytics_hosts");if(a)try{a=JSON.parse(a)}catch{}Array.isArray(a)||(a=null);let u={};location.search.slice(1).split("&").map(y=>y.split("=")).forEach(y=>u[y[0]]=y[1]);async function f(){let y="/keypair";location.hostname==="localhost"&&(y="https://analytics.servers.do/keypair");let T=await(await fetch(y)).json(),{public_key:p,private_key:k}=T;localStorage.setItem("__analytics_encryption_key",k),localStorage.setItem("__analytics_public_key",p),t.commit("setPublicKey",p),t.commit("setKey",k)}if(u.key){try{u.key=decodeURIComponent(u.key)}catch{}localStorage.setItem("__analytics_encryption_key",u.key),t.commit("setKey",u.key)}else i&&t.commit("setKey",i);if(u.pkey){try{u.pkey=decodeURIComponent(u.pkey)}catch{}localStorage.setItem("__analytics_public_key",u.pkey),t.commit("setPublicKey",u.pkey)}else s?t.commit("setPublicKey",s):f();u.host&&((!a||!Array.isArray(a))&&(a=[]),a.includes(u.host)||a.push(u.host),localStorage.setItem("__analytics_hosts",JSON.stringify(a))),a&&(a.sort((y,r)=>y.localeCompare(r)),t.commit("setDomains",a)),t.commit("setPath",u.path||""),t.commit("setHost",u.host||""),t.commit("setRange",u.range),t.commit("setOs",u.os||""),t.commit("setDevice",u.device||""),t.commit("setIs_bot",u.is_bot||""),t.commit("setIs_new",u.is_new||""),t.commit("setBrowser",u.browser||""),t.commit("setLanguage",u.language||""),t.commit("setReferrer",u.referrer||""),t.commit("setUtm_source",u.utm_source||""),t.commit("setUtm_medium",u.utm_medium||""),t.commit("setUtm_campaign",u.utm_campaign||"")}return o(),addEventListener("popstate",i=>{console.log("onpopstate location: "+document.location),o()}),(i,s)=>(A(),M(ke,null,[H(ut),H(Qs),H(it),H(Ct)],64))}};Ye(ea).use(Ze).mount("#app");
