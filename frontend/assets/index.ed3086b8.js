import{c as Te,o as F,a as z,b as u,t as M,u as O,d as j,e as te,r as G,f as ne,w as U,n as Q,g as Oe,v as Le,h as se,i as Y,F as fe,j as be,k as ke,m as De,l as Fe,p as me,q as Ae,s as N,x as pe,y as Se,z as ze}from"./vendor.d16a1b09.js";const Ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}};Ee();function ce(e){const t=new Date;return t.setDate(t.getDate()-e)}var Ie=Te({state(){return{publicKey:"",domains:[],host:"",key:"",start:ce(0),end:ce(0),range:"1",rangeString:"Latest",liveVisitors:0,showVisitors:!0,summary:{},dark:!1}},getters:{domains:e=>e.domains,dark:e=>e.dark,key:e=>e.key,publicKey:e=>e.publicKey,host:e=>e.host,start:e=>e.start,end:e=>e.end,range:e=>e.range,rangeString:e=>e.rangeString,liveVisitors:e=>e.liveVisitors,showVisitors:e=>e.showVisitors,summary:e=>e.summary},mutations:{setDark(e,t){e.dark=t},setKey(e,t){e.key=t},setPublicKey(e,t){e.publicKey=t},setDomains(e,t){e.domains=t},setHost(e,t){e.host=t},setStart(e,t){e.start=t},setEnd(e,t){e.end=t},setLiveVisitors(e,t){e.liveVisitors=t},setShowVisitors(e,t){e.showVisitors=t},setSummary(e,t){e.summary=t},setRangeString(e,t){e.rangeString=t},setRange(e,t){t||(t="1");let s={"-1":["Yesterday",1,1],"1":["Latest",0,0],"7":["Last 7 Days",7,0],"14":["1 week ago",14,7],"21":["2 weeks ago",21,14],"28":["3 weeks ago",28,21],"30":["Last 30 Days",30,0]}[t];if(t<-1&&t>-32){let c=t*-1;s=[`${new Date(ce(c)).toDateString()}`,c,c]}t.length===7&&(s=[`${t}`,t,t]),t>1e3&&t<3e3&&(s=[`${t}`,t,t]),e.rangeString=s[0],e.start=ce(s[1]),e.end=ce(s[2]),parseInt(t)==t&&(t=parseInt(t)),e.range=t;let a=`?host=${e.host}&range=${t}`;location.search!==a&&window.history.pushState("","",a)}}});const Me={class:"text-center mt-3"},Ne=j(" Copyright \xA9 2021-"),Re={class:"year"},Pe=j(),Ve=u("a",{href:"https://jamesfuthey.com/",target:"_blank"},"James Futhey",-1),We=j(". \xA0All Rights Reserved. "),qe={setup(e){const t=new Date().getFullYear();return(r,s)=>(F(),z("p",Me,[Ne,u("span",Re,M(O(t)),1),Pe,Ve,We]))}},Ke={class:"container"},He=u("a",{class:"navbar-brand",href:"/"},"Website Analytics",-1),Ue=u("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[u("span",{class:"navbar-toggler-icon"})],-1),Ye={class:"collapse navbar-collapse",id:"navbarColor01"},Ge={class:"navbar-nav me-auto"},je={class:"nav-item"},Ze={class:"d-none d-md-inline-block form-check form-switch float-right"},Je={setup(e){const t=te(),r=G(!1);return ne(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(r.value=!0)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{r.value=s.matches}),U(r,()=>{t.commit("setDark",r.value),document.querySelector("#theme").href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/${r.value?"superhero":"zephyr"}/bootstrap.min.css`,r.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),(s,a)=>(F(),z("nav",{class:Q(["navbar navbar-expand-lg navbar-dark",{"mt-1":r.value,"bg-primary":!r.value}])},[u("div",Ke,[He,Ue,u("div",Ye,[u("ul",Ge,[u("li",je,[u("a",{class:Q(["nav-link cp",{"btn-dark":r.value,nudge:r.value}]),"data-bs-toggle":"modal","data-bs-target":"#embedScript"},"Add to your Website",2)])])]),u("div",Ze,[Oe(u("input",{class:"form-check-input",type:"checkbox",id:"themer","onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c)},null,512),[[Le,r.value]]),u("label",{class:Q(["form-check-label",{"text-white":!r.value}]),for:"themer",style:{"user-select":"none"}},"Dark mode",2)])])],2))}},ae=()=>{const e=te();return Object.fromEntries(Object.keys(e.getters).map(t=>[t,se(()=>e.getters[t])]))},Xe={class:"modal",id:"embedScript",tabindex:"-1"},Qe={class:"modal-dialog modal-lg"},et=u("div",{class:"modal-header"},[u("h5",{class:"modal-title"},"Add to your Website"),u("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),tt={class:"modal-body"},st=u("h5",null,"Embed Code",-1),it=u("p",null,"Embed this script on your website, and your analytics data will appear here.",-1),at={rows:"4",spellcheck:"false",class:"form-control",id:"script","data-clipboard-target":"#script",style:{resize:"none","font-family":"monospace"}},nt=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#script"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),ot=u("br",null,null,-1),rt=u("h5",null,"URL to View Analytics",-1),lt=u("p",null,"You will need the following URL to access (and decrypt) your analytics:",-1),ct={rows:"3",spellcheck:"false",class:"form-control",id:"url","data-clipboard-target":"#url",style:{resize:"none","font-family":"monospace"}},ut=u("small",{class:"d-block mt-1"},[u("a",{class:"cp","data-clipboard-target":"#url"},"Copy to clipboard"),u("span",{class:"d-none"},"\xA0Copied!")],-1),dt=u("p",null,[u("small",null,[u("strong",null,"Save your URL."),j(" If you lose this, you will need to reinstall analytics with a new encryption key.")])],-1),ht=u("div",{class:"modal-footer"},[u("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),ft={setup(e){const{key:t,publicKey:r,dark:s}=ae();let a={};location.search.slice(1).split("&").map(w=>w.split("=")).forEach(w=>a[w[0]]=w[1]);let c="https://analytics.servers.do",p=se(()=>r.value?`&lt;script>window.__analytics_encryption_key = '${r.value}';&lt;/script>
`:"");const m=se(()=>o(`&lt;!-- Servers.do Analytics -->
${p.value}&lt;script src='${c}/a.js'>&lt;/script>`)),d=se(()=>`${c}?host=${a.host}&range=${a.range}&key=${encodeURIComponent(t.value)}&pkey=${r.value}`);function o(w){return window.$("<textarea />").html(w).text()}return(w,h)=>(F(),z("div",Xe,[u("div",Qe,[u("div",{class:Q(["modal-content",{"bg-dark":O(s)}])},[et,u("div",tt,[st,it,u("p",null,[u("textarea",at,M(O(m)),1),nt]),ot,rt,lt,u("p",null,[u("textarea",ct,M(O(d)),1),ut]),dt]),ht],2)])]))}};const mt={class:"row"},pt={class:"col-6"},vt={class:"nav nav-pills mb-1 d-inline-block"},gt={class:"nav-item dropdown ms-auto"},yt={class:"nav-link dropdown-toggle cp","data-bs-toggle":"dropdown",role:"button"},_t=["src"],bt={class:"d-inline pt-2 mb-0 name"},kt={class:"dropdown-menu websites left"},St=["onClick"],wt=u("span",{class:"text-success d-none d-md-inline-block dot"},"\xB7",-1),xt={class:"current-visitors d-none d-md-inline-block"},$t={class:"col-6"},Bt={class:"nav nav-pills mb-1"},Ct={class:"nav-item dropdown ms-auto"},Tt={class:"dropdown-menu right"},Ot=u("div",{class:"dropdown-divider"},null,-1),Lt=u("div",{class:"dropdown-divider"},null,-1),Dt=u("div",{class:"dropdown-divider"},null,-1),Ft={setup(e){const t=G(new Date),r=G(!1),s=G("month"),a=G("month"),c=G("month"),p={to:new Date(new Date().setDate(new Date().getDate()-32)),from:new Date,preventDisableDateSelection:!0},{host:m,domains:d,range:o,rangeString:w,liveVisitors:h}=ae(),b=te();function i(S,$){b.commit("setRange",S),$||(r.value=!1)}const v=S=>S.charAt(0).toUpperCase()+S.slice(1);function n(){var S=prompt("Enter domain name");if(S){if(S=S.toLowerCase().trim().replace("www.",""),S&&window.history.pushState("","",`?host=${S}&range=${o.value}`),S&&!(d.value||[]).includes(S)){let $=d.value;Array.isArray($)||($=[]),$.includes(S)||$.push(S),localStorage.setItem("__analytics_hosts",JSON.stringify($)),b.commit("setDomains",$)}S&&l(S)}}function l(S){window.history.pushState("","",`?host=${S}&range=${o.value}`),b.commit("setHost",S)}function _(S){S==="month"?(s.value="month",a.value="month",c.value="month",b.commit("setRangeString","Custom month:")):S==="year"?(s.value="year",a.value="year",c.value="year",b.commit("setRangeString","Custom year:")):S==="day"&&(s.value="day",a.value="day",c.value="day",b.commit("setRangeString","Custom day:")),document.querySelector(".dropdown-menu.right.show").classList.remove("show"),r.value=!0,setTimeout(()=>{document.querySelector(".vuejs3-datepicker__value").click()},123)}function x(S){if(s.value==="year"){let T=new Date(S).getFullYear();i(T)}else if(s.value==="month"){let $=new Date(S),T=$.getMonth()+1;i(`${$.getFullYear()}-${T<10?"0":""}${T}`)}else if(s.value==="day"){t.value=new Date(S);let $=new Date-new Date(S),T=Math.floor($/864e5)*-1;i(T)}}return(S,$)=>(F(),z("div",mt,[u("div",pt,[u("ul",vt,[u("li",gt,[u("a",yt,[O(m)?(F(),z("img",{key:0,class:"favicon",src:`https://logo.clearbit.com/${O(m)}`,onerror:"this.src='default.png';"},null,8,_t)):Y("",!0),u("h5",bt,M(v(O(m))||"Select a Domain"),1)]),u("div",kt,[(F(!0),z(fe,null,be(O(d),T=>(F(),z("a",{class:"dropdown-item cp",onClick:K=>l(T)},M(v(T)),9,St))),256)),u("a",{class:"dropdown-item cp",onClick:n},"Add Domain")])])]),wt,u("span",xt,"\xA0"+M(O(h)?`${O(h)} current visitor${O(h)==1?"":"s"}`:"No current visitors"),1)]),u("div",$t,[u("ul",Bt,[u("li",Ct,[u("a",{class:Q(["nav-link right cp",{"dropdown-toggle":!r.value}]),"data-bs-toggle":"dropdown",role:"button"},M(O(w)),3),u("div",Tt,[u("a",{class:"dropdown-item cp",onClick:$[0]||($[0]=T=>i(1))},"Latest"),u("a",{class:"dropdown-item cp",onClick:$[1]||($[1]=T=>i(-1))},"Yesterday"),u("a",{class:"dropdown-item cp",onClick:$[2]||($[2]=T=>{_("day")})},"Custom Day"),Ot,u("a",{class:"dropdown-item cp",onClick:$[3]||($[3]=T=>i(7))},"Last 7 Days"),u("a",{class:"dropdown-item cp",onClick:$[4]||($[4]=T=>i(14))},"1 week ago"),u("a",{class:"dropdown-item cp",onClick:$[5]||($[5]=T=>i(21))},"2 weeks ago"),u("a",{class:"dropdown-item cp",onClick:$[6]||($[6]=T=>i(28))},"3 weeks ago"),Lt,u("a",{class:"dropdown-item cp",onClick:$[7]||($[7]=T=>i(30))},"Last 30 Days"),Dt,u("a",{class:"dropdown-item cp",onClick:$[8]||($[8]=T=>{_("month")})},"Custom Month"),u("a",{class:"dropdown-item cp",onClick:$[9]||($[9]=T=>{_("year")})},"Custom Year")])]),r.value?(F(),ke(O(De),{key:0,name:"datepick",value:t.value,"disabled-dates":a.value=="day"?p:null,"initial-view":s.value,"minimum-view":a.value,"maximum-view":c.value,onInput:x},null,8,["value","disabled-dates","initial-view","minimum-view","maximum-view"])):Y("",!0)])])]))}};var R=R||function(e,t){var r={},s=r.lib={},a=function(){},c=s.Base={extend:function(i){a.prototype=this;var v=new a;return i&&v.mixIn(i),v.hasOwnProperty("init")||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var i=this.extend();return i.init.apply(i,arguments),i},init:function(){},mixIn:function(i){for(var v in i)i.hasOwnProperty(v)&&(this[v]=i[v]);i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.init.prototype.extend(this)}},p=s.WordArray=c.extend({init:function(i,v){i=this.words=i||[],this.sigBytes=v!=t?v:4*i.length},toString:function(i){return(i||d).stringify(this)},concat:function(i){var v=this.words,n=i.words,l=this.sigBytes;if(i=i.sigBytes,this.clamp(),l%4)for(var _=0;_<i;_++)v[l+_>>>2]|=(n[_>>>2]>>>24-8*(_%4)&255)<<24-8*((l+_)%4);else if(65535<n.length)for(_=0;_<i;_+=4)v[l+_>>>2]=n[_>>>2];else v.push.apply(v,n);return this.sigBytes+=i,this},clamp:function(){var i=this.words,v=this.sigBytes;i[v>>>2]&=4294967295<<32-8*(v%4),i.length=e.ceil(v/4)},clone:function(){var i=c.clone.call(this);return i.words=this.words.slice(0),i},random:function(i){for(var v=[],n=0;n<i;n+=4)v.push(4294967296*e.random()|0);return new p.init(v,i)}}),m=r.enc={},d=m.Hex={stringify:function(i){var v=i.words;i=i.sigBytes;for(var n=[],l=0;l<i;l++){var _=v[l>>>2]>>>24-8*(l%4)&255;n.push((_>>>4).toString(16)),n.push((_&15).toString(16))}return n.join("")},parse:function(i){for(var v=i.length,n=[],l=0;l<v;l+=2)n[l>>>3]|=parseInt(i.substr(l,2),16)<<24-4*(l%8);return new p.init(n,v/2)}},o=m.Latin1={stringify:function(i){var v=i.words;i=i.sigBytes;for(var n=[],l=0;l<i;l++)n.push(String.fromCharCode(v[l>>>2]>>>24-8*(l%4)&255));return n.join("")},parse:function(i){for(var v=i.length,n=[],l=0;l<v;l++)n[l>>>2]|=(i.charCodeAt(l)&255)<<24-8*(l%4);return new p.init(n,v)}},w=m.Utf8={stringify:function(i){try{return decodeURIComponent(escape(o.stringify(i)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(i){return o.parse(unescape(encodeURIComponent(i)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(i){typeof i=="string"&&(i=w.parse(i)),this._data.concat(i),this._nDataBytes+=i.sigBytes},_process:function(i){var v=this._data,n=v.words,l=v.sigBytes,_=this.blockSize,x=l/(4*_),x=i?e.ceil(x):e.max((x|0)-this._minBufferSize,0);if(i=x*_,l=e.min(4*i,l),i){for(var S=0;S<i;S+=_)this._doProcessBlock(n,S);S=n.splice(0,i),v.sigBytes-=l}return new p.init(S,l)},clone:function(){var i=c.clone.call(this);return i._data=this._data.clone(),i},_minBufferSize:0});s.Hasher=h.extend({cfg:c.extend(),init:function(i){this.cfg=this.cfg.extend(i),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(i){return this._append(i),this._process(),this},finalize:function(i){return i&&this._append(i),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(v,n){return new i.init(n).finalize(v)}},_createHmacHelper:function(i){return function(v,n){return new b.HMAC.init(i,n).finalize(v)}}});var b=r.algo={};return r}(Math);(function(){var e=R,t=e.lib.WordArray;e.enc.Base64={stringify:function(r){var s=r.words,a=r.sigBytes,c=this._map;r.clamp(),r=[];for(var p=0;p<a;p+=3)for(var m=(s[p>>>2]>>>24-8*(p%4)&255)<<16|(s[p+1>>>2]>>>24-8*((p+1)%4)&255)<<8|s[p+2>>>2]>>>24-8*((p+2)%4)&255,d=0;4>d&&p+.75*d<a;d++)r.push(c.charAt(m>>>6*(3-d)&63));if(s=c.charAt(64))for(;r.length%4;)r.push(s);return r.join("")},parse:function(r){var s=r.length,a=this._map,c=a.charAt(64);c&&(c=r.indexOf(c),c!=-1&&(s=c));for(var c=[],p=0,m=0;m<s;m++)if(m%4){var d=a.indexOf(r.charAt(m-1))<<2*(m%4),o=a.indexOf(r.charAt(m))>>>6-2*(m%4);c[p>>>2]|=(d|o)<<24-8*(p%4),p++}return t.create(c,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(h,b,i,v,n,l,_){return h=h+(b&i|~b&v)+n+_,(h<<l|h>>>32-l)+b}function r(h,b,i,v,n,l,_){return h=h+(b&v|i&~v)+n+_,(h<<l|h>>>32-l)+b}function s(h,b,i,v,n,l,_){return h=h+(b^i^v)+n+_,(h<<l|h>>>32-l)+b}function a(h,b,i,v,n,l,_){return h=h+(i^(b|~v))+n+_,(h<<l|h>>>32-l)+b}for(var c=R,p=c.lib,m=p.WordArray,d=p.Hasher,p=c.algo,o=[],w=0;64>w;w++)o[w]=4294967296*e.abs(e.sin(w+1))|0;p=p.MD5=d.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,b){for(var i=0;16>i;i++){var v=b+i,n=h[v];h[v]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var i=this._hash.words,v=h[b+0],n=h[b+1],l=h[b+2],_=h[b+3],x=h[b+4],S=h[b+5],$=h[b+6],T=h[b+7],K=h[b+8],L=h[b+9],E=h[b+10],D=h[b+11],H=h[b+12],I=h[b+13],A=h[b+14],C=h[b+15],g=i[0],f=i[1],k=i[2],y=i[3],g=t(g,f,k,y,v,7,o[0]),y=t(y,g,f,k,n,12,o[1]),k=t(k,y,g,f,l,17,o[2]),f=t(f,k,y,g,_,22,o[3]),g=t(g,f,k,y,x,7,o[4]),y=t(y,g,f,k,S,12,o[5]),k=t(k,y,g,f,$,17,o[6]),f=t(f,k,y,g,T,22,o[7]),g=t(g,f,k,y,K,7,o[8]),y=t(y,g,f,k,L,12,o[9]),k=t(k,y,g,f,E,17,o[10]),f=t(f,k,y,g,D,22,o[11]),g=t(g,f,k,y,H,7,o[12]),y=t(y,g,f,k,I,12,o[13]),k=t(k,y,g,f,A,17,o[14]),f=t(f,k,y,g,C,22,o[15]),g=r(g,f,k,y,n,5,o[16]),y=r(y,g,f,k,$,9,o[17]),k=r(k,y,g,f,D,14,o[18]),f=r(f,k,y,g,v,20,o[19]),g=r(g,f,k,y,S,5,o[20]),y=r(y,g,f,k,E,9,o[21]),k=r(k,y,g,f,C,14,o[22]),f=r(f,k,y,g,x,20,o[23]),g=r(g,f,k,y,L,5,o[24]),y=r(y,g,f,k,A,9,o[25]),k=r(k,y,g,f,_,14,o[26]),f=r(f,k,y,g,K,20,o[27]),g=r(g,f,k,y,I,5,o[28]),y=r(y,g,f,k,l,9,o[29]),k=r(k,y,g,f,T,14,o[30]),f=r(f,k,y,g,H,20,o[31]),g=s(g,f,k,y,S,4,o[32]),y=s(y,g,f,k,K,11,o[33]),k=s(k,y,g,f,D,16,o[34]),f=s(f,k,y,g,A,23,o[35]),g=s(g,f,k,y,n,4,o[36]),y=s(y,g,f,k,x,11,o[37]),k=s(k,y,g,f,T,16,o[38]),f=s(f,k,y,g,E,23,o[39]),g=s(g,f,k,y,I,4,o[40]),y=s(y,g,f,k,v,11,o[41]),k=s(k,y,g,f,_,16,o[42]),f=s(f,k,y,g,$,23,o[43]),g=s(g,f,k,y,L,4,o[44]),y=s(y,g,f,k,H,11,o[45]),k=s(k,y,g,f,C,16,o[46]),f=s(f,k,y,g,l,23,o[47]),g=a(g,f,k,y,v,6,o[48]),y=a(y,g,f,k,T,10,o[49]),k=a(k,y,g,f,A,15,o[50]),f=a(f,k,y,g,S,21,o[51]),g=a(g,f,k,y,H,6,o[52]),y=a(y,g,f,k,_,10,o[53]),k=a(k,y,g,f,E,15,o[54]),f=a(f,k,y,g,n,21,o[55]),g=a(g,f,k,y,K,6,o[56]),y=a(y,g,f,k,C,10,o[57]),k=a(k,y,g,f,$,15,o[58]),f=a(f,k,y,g,I,21,o[59]),g=a(g,f,k,y,x,6,o[60]),y=a(y,g,f,k,D,10,o[61]),k=a(k,y,g,f,l,15,o[62]),f=a(f,k,y,g,L,21,o[63]);i[0]=i[0]+g|0,i[1]=i[1]+f|0,i[2]=i[2]+k|0,i[3]=i[3]+y|0},_doFinalize:function(){var h=this._data,b=h.words,i=8*this._nDataBytes,v=8*h.sigBytes;b[v>>>5]|=128<<24-v%32;var n=e.floor(i/4294967296);for(b[(v+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,b[(v+64>>>9<<4)+14]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,h.sigBytes=4*(b.length+1),this._process(),h=this._hash,b=h.words,i=0;4>i;i++)v=b[i],b[i]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360;return h},clone:function(){var h=d.clone.call(this);return h._hash=this._hash.clone(),h}}),c.MD5=d._createHelper(p),c.HmacMD5=d._createHmacHelper(p)})(Math);(function(){var e=R,t=e.lib,r=t.Base,s=t.WordArray,t=e.algo,a=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,p){for(var m=this.cfg,d=m.hasher.create(),o=s.create(),w=o.words,h=m.keySize,m=m.iterations;w.length<h;){b&&d.update(b);var b=d.update(c).finalize(p);d.reset();for(var i=1;i<m;i++)b=d.finalize(b),d.reset();o.concat(b)}return o.sigBytes=4*h,o}});e.EvpKDF=function(c,p,m){return a.create(m).compute(c,p)}})();R.lib.Cipher||function(e){var t=R,r=t.lib,s=r.Base,a=r.WordArray,c=r.BufferedBlockAlgorithm,p=t.enc.Base64,m=t.algo.EvpKDF,d=r.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(n,l){return this.create(this._ENC_XFORM_MODE,n,l)},createDecryptor:function(n,l){return this.create(this._DEC_XFORM_MODE,n,l)},init:function(n,l,_){this.cfg=this.cfg.extend(_),this._xformMode=n,this._key=l,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(l,_,x){return(typeof _=="string"?v:i).encrypt(n,l,_,x)},decrypt:function(l,_,x){return(typeof _=="string"?v:i).decrypt(n,l,_,x)}}}});r.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var o=t.mode={},w=function(n,l,_){var x=this._iv;x?this._iv=e:x=this._prevBlock;for(var S=0;S<_;S++)n[l+S]^=x[S]},h=(r.BlockCipherMode=s.extend({createEncryptor:function(n,l){return this.Encryptor.create(n,l)},createDecryptor:function(n,l){return this.Decryptor.create(n,l)},init:function(n,l){this._cipher=n,this._iv=l}})).extend();h.Encryptor=h.extend({processBlock:function(n,l){var _=this._cipher,x=_.blockSize;w.call(this,n,l,x),_.encryptBlock(n,l),this._prevBlock=n.slice(l,l+x)}}),h.Decryptor=h.extend({processBlock:function(n,l){var _=this._cipher,x=_.blockSize,S=n.slice(l,l+x);_.decryptBlock(n,l),w.call(this,n,l,x),this._prevBlock=S}}),o=o.CBC=h,h=(t.pad={}).Pkcs7={pad:function(n,l){for(var _=4*l,_=_-n.sigBytes%_,x=_<<24|_<<16|_<<8|_,S=[],$=0;$<_;$+=4)S.push(x);_=a.create(S,_),n.concat(_)},unpad:function(n){n.sigBytes-=n.words[n.sigBytes-1>>>2]&255}},r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:o,padding:h}),reset:function(){d.reset.call(this);var n=this.cfg,l=n.iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var _=n.createEncryptor;else _=n.createDecryptor,this._minBufferSize=1;this._mode=_.call(n,this,l&&l.words)},_doProcessBlock:function(n,l){this._mode.processBlock(n,l)},_doFinalize:function(){var n=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){n.pad(this._data,this.blockSize);var l=this._process(!0)}else l=this._process(!0),n.unpad(l);return l},blockSize:4});var b=r.CipherParams=s.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),o=(t.format={}).OpenSSL={stringify:function(n){var l=n.ciphertext;return n=n.salt,(n?a.create([1398893684,1701076831]).concat(n).concat(l):l).toString(p)},parse:function(n){n=p.parse(n);var l=n.words;if(l[0]==1398893684&&l[1]==1701076831){var _=a.create(l.slice(2,4));l.splice(0,4),n.sigBytes-=16}return b.create({ciphertext:n,salt:_})}},i=r.SerializableCipher=s.extend({cfg:s.extend({format:o}),encrypt:function(n,l,_,x){x=this.cfg.extend(x);var S=n.createEncryptor(_,x);return l=S.finalize(l),S=S.cfg,b.create({ciphertext:l,key:_,iv:S.iv,algorithm:n,mode:S.mode,padding:S.padding,blockSize:n.blockSize,formatter:x.format})},decrypt:function(n,l,_,x){return x=this.cfg.extend(x),l=this._parse(l,x.format),n.createDecryptor(_,x).finalize(l.ciphertext)},_parse:function(n,l){return typeof n=="string"?l.parse(n,this):n}}),t=(t.kdf={}).OpenSSL={execute:function(n,l,_,x){return x||(x=a.random(8)),n=m.create({keySize:l+_}).compute(n,x),_=a.create(n.words.slice(l),4*_),n.sigBytes=4*l,b.create({key:n,iv:_,salt:x})}},v=r.PasswordBasedCipher=i.extend({cfg:i.cfg.extend({kdf:t}),encrypt:function(n,l,_,x){return x=this.cfg.extend(x),_=x.kdf.execute(_,n.keySize,n.ivSize),x.iv=_.iv,n=i.encrypt.call(this,n,l,_.key,x),n.mixIn(_),n},decrypt:function(n,l,_,x){return x=this.cfg.extend(x),l=this._parse(l,x.format),_=x.kdf.execute(_,n.keySize,n.ivSize,l.salt),x.iv=_.iv,i.decrypt.call(this,n,l,_.key,x)}})}();(function(){for(var e=R,t=e.lib.BlockCipher,K=e.algo,r=[],s=[],a=[],c=[],p=[],m=[],d=[],o=[],w=[],h=[],b=[],i=0;256>i;i++)b[i]=128>i?i<<1:i<<1^283;for(var v=0,n=0,i=0;256>i;i++){var l=n^n<<1^n<<2^n<<3^n<<4,l=l>>>8^l&255^99;r[v]=l,s[l]=v;var _=b[v],x=b[_],S=b[x],$=257*b[l]^16843008*l;a[v]=$<<24|$>>>8,c[v]=$<<16|$>>>16,p[v]=$<<8|$>>>24,m[v]=$,$=16843009*S^65537*x^257*_^16843008*v,d[l]=$<<24|$>>>8,o[l]=$<<16|$>>>16,w[l]=$<<8|$>>>24,h[l]=$,v?(v=_^b[b[b[S^_]]],n^=b[b[n]]):v=n=1}var T=[0,1,2,4,8,16,32,64,128,27,54],K=K.AES=t.extend({_doReset:function(){for(var L=this._key,E=L.words,D=L.sigBytes/4,L=4*((this._nRounds=D+6)+1),H=this._keySchedule=[],I=0;I<L;I++)if(I<D)H[I]=E[I];else{var A=H[I-1];I%D?6<D&&I%D==4&&(A=r[A>>>24]<<24|r[A>>>16&255]<<16|r[A>>>8&255]<<8|r[A&255]):(A=A<<8|A>>>24,A=r[A>>>24]<<24|r[A>>>16&255]<<16|r[A>>>8&255]<<8|r[A&255],A^=T[I/D|0]<<24),H[I]=H[I-D]^A}for(E=this._invKeySchedule=[],D=0;D<L;D++)I=L-D,A=D%4?H[I]:H[I-4],E[D]=4>D||4>=I?A:d[r[A>>>24]]^o[r[A>>>16&255]]^w[r[A>>>8&255]]^h[r[A&255]]},encryptBlock:function(L,E){this._doCryptBlock(L,E,this._keySchedule,a,c,p,m,r)},decryptBlock:function(L,E){var D=L[E+1];L[E+1]=L[E+3],L[E+3]=D,this._doCryptBlock(L,E,this._invKeySchedule,d,o,w,h,s),D=L[E+1],L[E+1]=L[E+3],L[E+3]=D},_doCryptBlock:function(L,E,D,H,I,A,C,g){for(var f=this._nRounds,k=L[E]^D[0],y=L[E+1]^D[1],P=L[E+2]^D[2],V=L[E+3]^D[3],W=4,re=1;re<f;re++)var q=H[k>>>24]^I[y>>>16&255]^A[P>>>8&255]^C[V&255]^D[W++],X=H[y>>>24]^I[P>>>16&255]^A[V>>>8&255]^C[k&255]^D[W++],ie=H[P>>>24]^I[V>>>16&255]^A[k>>>8&255]^C[y&255]^D[W++],V=H[V>>>24]^I[k>>>16&255]^A[y>>>8&255]^C[P&255]^D[W++],k=q,y=X,P=ie;q=(g[k>>>24]<<24|g[y>>>16&255]<<16|g[P>>>8&255]<<8|g[V&255])^D[W++],X=(g[y>>>24]<<24|g[P>>>16&255]<<16|g[V>>>8&255]<<8|g[k&255])^D[W++],ie=(g[P>>>24]<<24|g[V>>>16&255]<<16|g[k>>>8&255]<<8|g[y&255])^D[W++],V=(g[V>>>24]<<24|g[k>>>16&255]<<16|g[y>>>8&255]<<8|g[P&255])^D[W++],L[E]=q,L[E+1]=X,L[E+2]=ie,L[E+3]=V},keySize:8});e.AES=t._createHelper(K)})();R.mode.CTR=function(){var e=R.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,s){var a=this._cipher,c=a.blockSize,p=this._iv,m=this._counter;p&&(m=this._counter=p.slice(0),this._iv=void 0);var d=m.slice(0);a.encryptBlock(d,0),m[c-1]=m[c-1]+1|0;for(var o=0;o<c;o++)r[s+o]^=d[o]}});return e.Decryptor=t,e}();(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},t.bitshift=function(r,s){var a=0,c=r.words,p,m=0,d;if(s>0){for(;s>31;)c.splice(0,1),c.push(0),s-=32,m++;if(s==0)return a;for(var o=c.length-m-1;o>=0;o--)p=c[o],c[o]<<=s,c[o]|=a,a=p>>>32-s}else if(s<0){for(;s<-31;)c.splice(0,0,0),c.length--,s+=32,m++;if(s==0)return a;s=-s,d=(1<<s)-1;for(var o=m;o<c.length;o++)p=c[o]&d,c[o]>>>=s,c[o]|=a,a=p<<32-s}return a},t.neg=function(r){for(var s=r.words,a=0;a<s.length;a++)s[a]=~s[a];return r},t.xor=function(r,s){for(var a=0;a<r.words.length;a++)r.words[a]^=s.words[a];return r},t.bitand=function(r,s){for(var a=r.clone(),c=a.words,p=s.words,m=0;m<c.length;m++)c[m]&=p[m];return a}})(R);(function(e){var t;e.hasOwnProperty("ext")?t=e.ext:t=e.ext={},e.lib.Base;var r=e.lib.WordArray;e.algo.AES,t.const_Zero=r.create([0,0,0,0]),t.const_One=r.create([0,0,0,1]),t.const_Rb=r.create([0,0,0,135]),t.const_Rb_Shifted=r.create([2147483648,0,0,67]),t.const_nonMSB=r.create([4294967295,4294967295,2147483647,2147483647]),t.isWordArray=function(s){return s&&typeof s.clamp=="function"&&typeof s.concat=="function"&&typeof s.words=="array"},e.pad.OneZeroPadding={pad:function(s,a){for(var c=a*4,p=c-s.sigBytes%c,m=[],d=0;d<p;d+=4){var o=0;d===0&&(o=2147483648),m.push(o)}var w=r.create(m,p);s.concat(w)},unpad:function(){}},e.pad.NoPadding={pad:function(){},unpad:function(){}},t.leftmostBytes=function(s,a){var c=s.clone();return c.sigBytes=a,c.clamp(),c},t.rightmostBytes=function(s,a){s.clamp();var c=32,p=s.clone(),m=(p.sigBytes-a)*8;if(m>=c){var d=Math.floor(m/c);m-=d*c,p.words.splice(0,d),p.sigBytes-=d*c/8}return m>0&&(t.bitshift(p,m),p.sigBytes-=m/8),p},t.popWords=function(s,a){var c=t.leftmostBytes(s,a*4);return s.words=s.words.slice(a),s.sigBytes-=a*4,c},t.shiftBytes=function(s,a){a=a||16;var c=a%4;a-=c;for(var p=r.create(),m=0;m<a;m+=4)p.words.push(s.words.shift()),s.sigBytes-=4,p.sigBytes+=4;return c>0&&(p.words.push(s.words[0]),p.sigBytes+=c,t.bitshift(s,c*8),s.sigBytes-=c),p},t.xorendBytes=function(s,a){return t.leftmostBytes(s,s.sigBytes-a.sigBytes).concat(t.xor(t.rightmostBytes(s,a.sigBytes),a))},t.dbl=function(s){var a=t.msb(s);return t.bitshift(s,1),t.xor(s,a===1?t.const_Rb:t.const_Zero),s},t.inv=function(s){var a=s.words[4]&1;return t.bitshift(s,-1),t.xor(s,a===1?t.const_Rb_Shifted:t.const_Zero),s},t.equals=function(s,a){if(!a||!a.words||s.sigBytes!==a.sigBytes)return!1;s.clamp(),a.clamp();for(var c=0,p=0;p<s.words.length;p++)c|=s.words[p]^a.words[p];return c===0},t.msb=function(s){return s.words[0]>>>31}})(R);(function(e){var t=e.lib.Base,r=e.lib.WordArray,s=e.algo.AES,a=e.ext,c=e.pad.OneZeroPadding;function p(d,o){var w=s.createEncryptor(d,{iv:r.create(),padding:e.pad.NoPadding}),h=w.finalize(o);return h}var m=e.algo.CMAC=t.extend({init:function(d){var o=p(d,a.const_Zero),w=o.clone();if(a.dbl(w),this._isTwo){var h=o.clone();a.inv(h)}else{var h=w.clone();a.dbl(h)}this._K1=w,this._K2=h,this._K=d,this._const_Bsize=16,this.reset()},reset:function(){this._x=a.const_Zero.clone(),this._counter=0,this._buffer=r.create()},update:function(d){if(!d)return this;var o=this._buffer,w=this._const_Bsize;for(typeof d=="string"&&(d=e.enc.Utf8.parse(d)),o.concat(d);o.sigBytes>w;){var h=a.shiftBytes(o,w);a.xor(this._x,h),this._x.clamp(),this._x=p(this._K,this._x),this._counter++}return this},finalize:function(d){this.update(d);var o=this._buffer,w=this._const_Bsize,h=o.clone();return o.sigBytes===w?a.xor(h,this._K1):(c.pad(h,w/4),a.xor(h,this._K2)),a.xor(h,this._x),this.reset(),p(this._K,h)},_isTwo:!1});e.CMAC=function(d,o){return m.create(d).finalize(o)},e.algo.OMAC1=m,e.algo.OMAC2=m.extend({_isTwo:!0})})(R);(function(e){var t=e.lib.Base,r=e.lib.WordArray;e.algo.AES;var s=e.ext,a=e.pad.OneZeroPadding,c=e.algo.CMAC,p=e.algo.S2V=t.extend({init:function(m){this._blockSize=16,this._cmacAD=c.create(m),this._cmacPT=c.create(m),this.reset()},reset:function(){this._buffer=r.create(),this._cmacAD.reset(),this._cmacPT.reset(),this._d=this._cmacAD.finalize(s.const_Zero),this._empty=!0,this._ptStarted=!1},updateAAD:function(m){return this._ptStarted?this:m?(typeof m=="string"&&(m=e.enc.Utf8.parse(m)),this._d=s.xor(s.dbl(this._d),this._cmacAD.finalize(m)),this._empty=!1,this):this},update:function(m){if(!m)return this;this._ptStarted=!0;var d=this._buffer,o=this._blockSize,w=o/4,h=this._cmacPT;for(typeof m=="string"&&(m=e.enc.Utf8.parse(m)),d.concat(m);d.sigBytes>=2*o;){this._empty=!1;var b=s.popWords(d,w);h.update(b)}return this},finalize:function(m){this.update(m);var d=this._blockSize,o=this._buffer;if(this._empty&&o.sigBytes===0)return this._cmacAD.finalize(s.const_One);var w;return o.sigBytes>=d?w=s.xorendBytes(o,this._d):(a.pad(o,d),w=s.xor(s.dbl(this._d),o)),this._cmacPT.finalize(w)}});e.SIV=t.extend({init:function(m){var d=m.sigBytes/2;this._s2vKey=s.shiftBytes(m,d),this._ctrKey=m},encrypt:function(m,d){!d&&m&&(d=m,m=[]);var o=p.create(this._s2vKey);Array.prototype.forEach.call(m,function(i){o.updateAAD(i)});var w=o.finalize(d),h=s.bitand(w,s.const_nonMSB),b=e.AES.encrypt(d,this._ctrKey,{iv:h,mode:e.mode.CTR,padding:e.pad.NoPadding});return w.concat(b.ciphertext)},decrypt:function(m,d){!d&&m&&(d=m,m=[]);var o=s.shiftBytes(d,16),w=s.bitand(o,s.const_nonMSB),h=e.AES.decrypt({ciphertext:d},this._ctrKey,{iv:w,mode:e.mode.CTR,padding:e.pad.NoPadding}),b=p.create(this._s2vKey);Array.prototype.forEach.call(m,function(v){b.updateAAD(v)});var i=b.finalize(h);return s.equals(o,i)?h:!1}})})(R);const At=new URL("/assets/sqlite.worker.710c9469.js",self.location),zt=new URL("/assets/sql-wasm.dd613b12.wasm",self.location),Et=()=>Math.random().toString(36).substr(2,9);let we=0;async function It(e){const t=e.state.key?R.SIV.create(R.enc.Hex.parse(e.state.key)):null;return function(s){if(t)try{let a=t.decrypt(R.enc.Hex.parse(s)).toString(R.enc.Utf8);a&&a!="false"&&(s=a)}catch{}return s}}async function Mt(){if(window._worker)return window._worker;if(we)return new Promise((t,r)=>{function s(){setTimeout(()=>{if(window._worker){t(window._worker);return}s()},50)}s()});we=1;async function e(){return await Fe.exports.createDbWorker([{from:"inline",config:{serverMode:"full",url:`${location.protocol}//${location.host}/analytics.sqlite3.png`,requestChunkSize:1024*32}}],At.toString(),zt.toString())}return window._worker=await e(),window._worker}async function ee(e){let t=await Mt(),r=Et();console.time("query time "+r);let s=await t.db.query(e);return console.log("query",e,s),console.timeEnd("query time "+r),s}function ve(e){return e||(e=new Date),(typeof e!="object"||!e.toISOString)&&(e=new Date(e)),e.toISOString().slice(0,10)}function oe(e,t){let r=[];if(e.state.host&&r.push(`host = '${e.state.host}'`),e.state.host&&e.state.key){const a=R.SIV.create(R.enc.Hex.parse(e.state.key)).encrypt(e.state.host).toString();r[0]=`(${r[0]} OR host = '${a}')`}return e.state.start&&e.state.end&&!t&&r.push(`date BETWEEN '${ve(e.state.start)}' AND '${ve(e.state.end)}'`),(r.length?" WHERE ":"")+(r.join(" AND ")||"")}async function Nt(e){if(!e.state.host)return[];const t=e.state.key?R.SIV.create(R.enc.Hex.parse(e.state.key)):null;let r=`SELECT pathname, AVG(load_time) as AvgLoadTime from visits${oe(e)} GROUP BY pathname ORDER BY AvgLoadTime DESC LIMIT 10;`,s=await ee(r);return t&&s.forEach(a=>{try{let c=t.decrypt(R.enc.Hex.parse(a.pathname)).toString(R.enc.Utf8);c&&c!="false"&&(a.pathname=c)}catch{}}),s}async function xe(e,t="hour",r=10){if(!e.state.host)return[];const s=e.state.key?R.SIV.create(R.enc.Hex.parse(e.state.key)):null,a=e.state.showVisitors?"count(DISTINCT ip)":"count(*)";let c=t==="hour"||t==="date",p=c?t:a,m=c?"ASC":"DESC",d=c?"":` LIMIT ${r}`,o=`SELECT ${t}, ${a} FROM visits${oe(e)} GROUP BY ${t} ORDER BY ${p} ${m}${d};`,w=await ee(o);return s&&w.forEach(h=>{try{let b=s.decrypt(R.enc.Hex.parse(h[t])).toString(R.enc.Utf8);b&&b!="false"&&(h[t]=b)}catch{}}),w}async function $e(e,t){let r=`SELECT * FROM summaries${oe(e,1)} AND date ${t>1e3&&t<3e3?"LIKE":"="} '${t}${t>1e3&&t<3e3?"-%":""}';`,s={},a=[];(await ee(r)).forEach(p=>{let m=JSON.parse(p.data);Object.keys(m).forEach(d=>{typeof m[d]=="number"?(s[d]||(s[d]=0),s[d]+=m[d]):d==="loadTimes"?(s[d]=[],s[d]||(s[d]=[]),a=a.concat(m[d]),a.map(w=>w.pathname).filter((w,h,b)=>b.indexOf(w)===h).forEach(w=>{let h=a.filter(v=>v.pathname=w),i=h.map(v=>v.AvgLoadTime).reduce((v,n)=>v+n,0)/h.length;s[d].push({pathname:w,AvgLoadTime:i})})):typeof m[d]=="object"&&(s[d]||(s[d]={}),Object.keys(m[d]).forEach(o=>{s[d][o]||(s[d][o]=0),s[d][o]+=m[d][o]}))})}),e.commit("setSummary",s)}const Z={toObject:function(e){return typeof e=="string"?JSON.parse(e):e},toBoolean:function(e){return typeof e=="string"?e==="true":e},toInt:function(e){return typeof e=="string"?parseInt(e):e}},B={id:{type:String,required:!0},data:{type:[String,Array],required:!0},barColors:{type:[String,Array,Function],required:!1},xkey:{type:String,required:!1,default:"key"},ykeys:{type:[String,Array],required:!1,default:function(){return["value"]}},labels:{type:[String,Array],required:!1,default:function(){return["Value"]}},hoverCallback:{type:Function,required:!1},axes:{type:[Boolean,String],required:!1,default:!0},hideHover:{type:String,required:!1},stacked:{type:[Boolean,String],required:!1},resize:{type:[Boolean,String],required:!1},horizontal:{type:[Boolean,String],required:!1,default:!1},grid:{type:[Boolean,String],required:!1,default:!0},gridTextColor:{type:String,required:!1,default:"#888"},gridTextSize:{type:[Number,String],required:!1,default:12},gridTextFamily:{type:String,required:!1,default:"sans-serif"},gridTextWeight:{type:String,required:!1,default:"normal"},colors:{type:[String,Array],required:!1},formatter:{type:Function,required:!1},lineColors:{type:[String,Array,Function],required:!1},xLabels:{type:String,required:!1},lineWidth:{type:[Number,String],required:!1},pointSize:{type:[Number,String],required:!1},pointFillColors:{type:[String,Array],required:!1},pointStrokeColors:{type:[String,Array],required:!1},ymax:{type:String,required:!1},ymin:{type:String,required:!1},smooth:{type:[Boolean,String],required:!1,default:!0},parseTime:{type:[Boolean,String],required:!1,default:!0},postUnits:{type:String,required:!1},preUnits:{type:String,required:!1},dateFormat:{type:Function,required:!1},xLabelFormat:{type:Function,required:!1},yLabelFormat:{type:Function,required:!1},xLabelAngle:{type:String,required:!1},goals:{type:[String,Array],required:!1},goalStrokeWidth:{type:[Number,String],required:!1},goalLineColors:{type:[String,Array],required:!1},events:{type:[String,Array],required:!1},eventStrokeWidth:{type:String,required:!1},eventLineColors:{type:[String,Array],required:!1},fillOpacity:{type:String,required:!1},behaveLikeLine:{type:[Boolean,String],required:!1,default:!1}},Rt={id:B.id,data:B.data,barColors:B.barColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,hoverCallback:B.hoverCallback,grid:B.grid,horizontal:B.horizontal,axes:B.axes,hideHover:B.hideHover,stacked:B.stacked,resize:B.resize,ymax:B.ymax,ymin:B.ymin,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight},Pt={id:B.id,data:B.data,colors:B.colors,formatter:B.formatter,resize:B.resize},ue={id:B.id,data:B.data,resize:B.resize,lineColors:B.lineColors,xkey:B.xkey,ykeys:B.ykeys,labels:B.labels,xLabels:B.xLabels,grid:B.grid,gridTextColor:B.gridTextColor,gridTextSize:B.gridTextSize,gridTextFamily:B.gridTextFamily,gridTextWeight:B.gridTextWeight,lineWidth:B.lineWidth,pointSize:B.pointSize,pointFillColors:B.pointFillColors,pointStrokeColors:B.pointStrokeColors,ymax:B.ymax,ymin:B.ymin,smooth:B.smooth,hideHover:B.hideHover,parseTime:B.parseTime,postUnits:B.postUnits,preUnits:B.preUnits,dateFormat:B.dateFormat,xLabelFormat:B.xLabelFormat,yLabelFormat:B.yLabelFormat,xLabelAngle:B.xLabelAngle,goals:B.goals,goalStrokeWidth:B.goalStrokeWidth,goalLineColors:B.goalLineColors,events:B.events,eventStrokeWidth:B.eventStrokeWidth,eventLineColors:B.eventLineColors,fillOpacity:B.fillOpacity,hoverCallback:B.hoverCallback},Be={behaveLikeLine:B.behaveLikeLine};for(var ge in ue)ue.hasOwnProperty(ge)&&(Be[ge]=ue[ge]);const de={addOption(e,t){this[e]&&(t[e]=this[e])},addOptionAsObject(e,t){this[e]&&(t[e]=Z.toObject(this[e]))}};var Vt={bar:{props:Rt,methods:de},donut:{props:Pt,methods:de},line:{props:ue,methods:de},area:{props:Be,methods:de}},ye=(e,t)=>{const r=e.__vccOpts||e;for(const[s,a]of t)r[s]=a;return r};const Wt={name:"area-chart",mixins:[Vt.area],data(){return{chart:null}},watch:{data(e){this.$nextTick(()=>{this.chart.options.labels=Z.toObject(this.labels),this.chart.options.xkey=this.xkey,this.chart.options.ykeys=Z.toObject(this.ykeys),this.lineColors&&(this.chart.options.lineColors=Z.toObject(this.lineColors)),this.chart.setData(Z.toObject(this.data))})}},mounted(){let e={element:this.id,data:Z.toObject(this.data),resize:Z.toBoolean(this.resize),labels:Z.toObject(this.labels),xkey:this.xkey,ykeys:Z.toObject(this.ykeys),grid:Z.toBoolean(this.grid),gridTextColor:this.gridTextColor,gridTextSize:Z.toInt(this.gridTextSize),gridTextFamily:this.gridTextFamily,gridTextWeight:this.gridTextWeight,lineWidth:this.lineWidth,pointSize:this.pointSize,ymax:this.ymax,ymin:this.ymin,smooth:Z.toBoolean(this.smooth),hideHover:this.hideHover,parseTime:Z.toBoolean(this.parseTime),postUnits:this.postUnits,preUnits:this.preUnits,xLabelAngle:this.xLabelAngle,goalStrokeWidth:this.goalStrokeWidth,eventStrokeWidth:this.eventStrokeWidth,fillOpacity:this.fillOpacity,behaveLikeLine:this.behaveLikeLine};this.addOptionAsObject("lineColors",e),this.addOption("xLabels",e),this.addOptionAsObject("pointFillColors",e),this.addOptionAsObject("pointStrokeColors",e),this.addOption("dateFormat",e),this.addOption("xLabelFormat",e),this.addOption("yLabelFormat",e),this.addOptionAsObject("goals",e),this.addOptionAsObject("goalLineColors",e),this.addOptionAsObject("events",e),this.addOptionAsObject("eventLineColors",e),this.addOption("hoverCallback",e),this.chart=Morris.Area(e)}},qt=["id"];function Kt(e,t,r,s,a,c){return F(),z("div",{id:e.id},null,8,qt)}var Ht=ye(Wt,[["render",Kt]]);const Ut={id:"visits"},Yt={key:0,class:"spinner-border spinme",role:"status"},Gt={key:1},jt={setup(e){const t=te();let{start:r,end:s,host:a,range:c,summary:p,showVisitors:m}=ae();const d=G([]),o=G(!0),w=G(null),h=se(()=>c.value<2),b=se(()=>h.value?"hour":"date"),i=S=>h.value?new Date(S).toLocaleString():`${new Date(S).toLocaleString(navigator.language||"en-us",{weekday:"long"})},
${new Date(S).toLocaleDateString()}`,v=G("day");async function n(){if(!a.value)return o.value=!1;if(c.value>1e3?v.value="month":v.value=h.value?"hour":"day",c.value.length===7||c.value>1e3){let C=[],g=JSON.parse(JSON.stringify(p.value)),{pageviewsTimeseries:f,visitorsTimeseries:k}=g;if(!f||!f)return;Object.keys(m.value?k:f).forEach(y=>{C.push({date:y,value:(m.value?k:f)[y]})}),d.value=C,o.value=!1;return}const S=oe(t);let $=S.split(" ").pop().replace("'","").replace("'",""),T=m.value?"count(DISTINCT ip)":"count(*)",K=h.value?"hour":"date";const L=`SELECT ${K}, ${T} FROM visits${S} GROUP BY ${K} ORDER BY ${K} ASC;`;let E=await ee(L);E.forEach(C=>{h.value&&(C.hour=+new Date(`${$}T${C.hour<10?"0":""}${C.hour}:00:00Z`)),C.value=C["count(DISTINCT ip)"]||C["count(*)"],delete C["count(DISTINCT ip)"],delete C["count(*)"]}),d.value=E,o.value=!1;const D=`SELECT hour, count(*) FROM visits${oe(t,1)} AND date = '${ve()}' GROUP BY hour`,I=(await ee(D)).pop();let A=0;I&&(A=I["count(*)"]),t.commit("setLiveVisitors",A)}function l(S,$,T,K){return K.date&&(w.value=K.date),T}function _(S,$){t.commit("setRange",S)}function x(){if(console.log("chart clicked",w.value),w.value){let S=new Date-new Date(w.value),$=Math.floor(S/864e5)*-1;$>-33&&$<2&&_($)}}return ne(n),U(a,n),U(c,n),U(p,n),U(m,n),(S,$)=>(F(),z("div",Ut,[o.value?(F(),z("div",Yt)):d.value.length?(F(),ke(Ht,{key:2,id:"line",data:d.value,xkey:O(b),ykey:"value",resize:"true",labels:O(m)?'[ "Visitors" ]':'[ "Pageviews" ]',"line-color":"#2847b7","fill-opacity":"0.16","line-width":"4",dateFormat:i,smooth:!1,xLabelAngle:"45",removed:"","data-xLabelFormat":"labelFormat","data-xLabels":"xLabel",hoverCallback:l,onClick:x,grid:"true","grid-text-weight":"bold"},null,8,["data","xkey","labels"])):(F(),z("div",Gt,"No data for selected period"))]))}};var Zt=ye(jt,[["__scopeId","data-v-d8b3d90e"]]);const Jt={key:0,class:"card-header"},Xt={class:"card-body"},Qt={key:0,class:"card-title"},es={key:1,class:"spinner-border spinme",role:"status"},ts={key:1,class:"card-footer"},_e={props:{header:String,title:String,body:String,footer:String,loading:Boolean},setup(e){const{dark:t}=ae();return(r,s)=>(F(),z("div",{class:Q(["card min-357",{"bg-dark":O(t)}])},[e.header?(F(),z("div",Jt,[me(r.$slots,"header",{},()=>[j(M(e.header),1)])])):Y("",!0),u("div",Xt,[e.title?(F(),z("h5",Qt,M(e.title),1)):Y("",!0),e.loading?(F(),z("div",es)):Y("",!0),me(r.$slots,"default",{},()=>[j(M(e.body),1)])]),e.footer?(F(),z("div",ts,[me(r.$slots,"footer",{},()=>[j(M(e.footer),1)])])):Y("",!0)],2))}};const ss={class:"col-6 col-md-3"},is={class:"card-title"},he={props:{title:String,underline:Boolean,muted:{type:Boolean,default:!0}},setup(e){const t=e,r=te();let s=G("-");const{host:a,range:c,summary:p}=ae();function m(w){return`${(w*100).toFixed(2)}%`}function d(w){return(w-(w%=60))/60+"m "+parseInt(w)}async function o(){if(!r.state.host)return;if(c.value.length===7||c.value>1e3){t.title==="Visitors"?s.value=p.value.visitors:t.title==="Total Pageviews"?s.value=p.value.pageviews:t.title==="Bounce Rate"?s.value=m(p.value.onePageVisits/p.value.visitors):t.title==="Session Length"&&(s.value=d(p.value.sessionLength));return}const w=oe(r);if(t.title==="Visitors"){const h=`SELECT count(DISTINCT ip) from visits${w}`;let b=await ee(h);s.value=b[0]["count(DISTINCT ip)"]}else if(t.title==="Total Pageviews"){const h=`SELECT count(*) from VISITS${w}`;let b=await ee(h);s.value=b[0]["count(*)"]}else if(t.title==="Bounce Rate"){let h=`SELECT count(DISTINCT ip) from visits${w}`,b=await ee(h),i=b[0]["count(DISTINCT ip)"];h=`SELECT count(DISTINCT ip) from visits${w} AND is_new = 1`,b=await ee(h);let v=b[0]["count(DISTINCT ip)"];s.value=i===0?0:m(v/i)}else if(t.title==="Session Length"){const h=`SELECT AVG(x.MaxValue) FROM (SELECT ip, max(session_length) as MaxValue from visits${w} GROUP BY ip) x`;let b=await ee(h);s.value=d(b[0]["AVG(x.MaxValue)"])||0}}return ne(o),U(a,o),U(c,o),U(p,o),(w,h)=>(F(),z("div",ss,[u("h6",{class:Q(["card-subtitle mb-2",{"text-muted":e.muted,"text-decoration-underline":e.underline,"link-color":e.underline}])},M(e.title),3),u("h4",is,M(O(s)),1)]))}},as={class:"mt-2 pseudotable"},ns={key:0,class:"spinner-border spinme",role:"status"},os={key:1,class:"mb-1"},rs={class:"mb-1"},ls=j("\xA0 "),cs={key:0,style:{display:"inline-block","margin-left":"-3px"}},us=j("\xA0\u2009 "),ds={key:1},hs={key:2,style:{display:"inline-block"}},fs=["src"],ms=j("\xA0\u2009 "),ps={key:3,style:{display:"inline-block"}},vs=["src"],gs=j("\xA0\u2009 "),ys={key:4,style:{display:"inline-block"}},_s=["src"],bs=j("\xA0\u2009 "),ks={key:5,style:{display:"inline-block"}},Ss=["href"],ws={key:6},xs={class:"float-right text-right pt-1"},J={props:{column:String,iconify:Boolean,favicons:Boolean,browserIcons:Boolean,osIcons:Boolean,links:Boolean,linkPrefix:String,limit:Number,defaultText:String,valueColumn:String,loadTimes:Boolean,valueFormatter:Function,keyFormatter:Function},setup(e){const{column:t,iconify:r,favicons:s,browserIcons:a,osIcons:c,links:p,linkPrefix:m,limit:d,defaultText:o,valueColumn:w,loadTimes:h,valueFormatter:b,keyFormatter:i}=e,v=te(),{host:n,range:l,summary:_,showVisitors:x}=ae(),S=se(()=>w||(x.value?"count(DISTINCT ip)":"count(*)")),$=G([]),T=G(0),K=G(!0);async function L(){if(l.value.length===7||l.value>1e3){let f=JSON.parse(JSON.stringify(_.value)),k=await It(v),y=S.value,P=t+(x.value?"__visitors":"");h&&(P="loadTimes");let V=f[P];if(V){let W=[];h?W=V:Object.keys(V).forEach(q=>{let X={};parseInt(q)==q&&(q=parseInt(q)),q=="null"&&(q=null),X[y]=V[q],X[t]=q,W.push(X)});let re=W.filter(q=>!q[P]);if(re.length>1){let q=re.map(le=>le[y]).reduce((le,Ce)=>le+=Ce),X=W.filter(le=>le[t]),ie={};ie[t]=null,ie[y]=q,X.unshift(ie),W=X}W.sort((q,X)=>X[y]-q[y]),W.forEach(q=>q[t]=k(q[t])),W.length>10&&(W=W.slice(0,10)),$.value=W;try{T.value=W[0][y]}catch{T.value=0}K.value=!1}return}let C=h?await Nt(v):await xe(v,t,d||10),g=C.filter(f=>!f[t]);if(g.length>1){let f=g.map(P=>P[S.value]).reduce((P,V)=>P+=V),k=C.filter(P=>P[t]),y={};y[t]=null,y[S.value]=f,k.unshift(y),C=k}C.sort((f,k)=>k[S.value]-f[S.value]),$.value=C;try{T.value=C[0][S.value]}catch{T.value=0}K.value=!1}function E(C,g=48,f="web"){const k="avant,basilisk,brave,browsh,chrome,chromium,deno,dolphin,edge,electron,epic,falkon,firefox,geckoview,hermes,icecat,jsdom,konqueror,maxthon,midori,netsurf,node.js,nw.js,opera,otter,puffin,qutebrowser,safari,seamonkey,servo,silk,spidermonkey,tor,uc,v8,vivaldi,web,webkit,yandex".split(","),y=C.toLowerCase().trim().split(" ");let P=k.filter(V=>y.includes(V));return P.length&&(f=P[0]),`https://cdnjs.cloudflare.com/ajax/libs/browser-logos/72.0.0/${f}/${f}_${g}x${g}.png`}function D(C){const g="AIX,AND,AMG,ATV,ARL,BTR,SBA,BEO,BLB,QNX,CAI,CES,COS,CYN,DEB,DEE,DFB,FED,FOS,FIR,BSD,FYD,GNT,GTV,HPX,HAI,IPA,HAR,KOS,KNO,KBT,LIN,LBT,MAC,MAE,MAG,MDR,SMG,MIN,MOR,NBS,WII,NDS,OS2,OBS,OWR,PCL,PSP,PS3,RHT,ROS,ROK,RSO,REM,REX,SAB,SSE,SAF,SLW,SOS,SYL,SYM,SYS,S40,S60,SY3,TDX,TIZ,UBT,WAS,WHS,WIN,WCE,WIO,WMO,WPH,WRT,XBX,XBT,YNS,IOS,POS,WOS".split(","),f="aix,android,amigaos,tvos,arch linux,backtrack,bada,beos,blackberry os,blackberry tablet os,caixa m\xE1gica,centos,chrome os,cyanogenmod,debian,deepin,dragonfly,fedora,firefox os,fire os,freebsd,fydeos,gentoo,google tv,hp-ux,haiku os,ipados,harmonyos,kaios,knoppix,kubuntu,linux,lubuntu,mac,maemo,mageia,mandriva,meego,mint,morphos,netbsd,nintendo,nintendo mobile,os/2,openbsd,openwrt,pclinuxos,playstation portable,playstation,red hat,risc os,roku os,rosa,remix os,rex,sabayon,suse,sailfish os,slackware,solaris,syllable,symbian,symbian os,symbian os series 40,symbian os series 60,symbian^3,threadx,tizen,ubuntu,watchos,whale os,windows,windows ce,windows iot,windows mobile,windows phone,windows rt,xbox,xubuntu,yunos,ios,palmos,webos".split(","),k="16,24,32,48,64,128,256,512".split(",");let y="",P=k[3];C=C.toLowerCase().trim();let V=f.map(W=>C.includes(W)).indexOf(!0);return V>0&&(y=g[V]),y?`https://cdn.jsdelivr.net/npm/@egoistdeveloper/operating-system-logos/src/${P}x${P}/${y}.png`:"/default.png"}function H(C){return C=(C+"").toLowerCase().trim(),{desktop:"bi bi-pc-display-horizontal",laptop:"bi bi-laptop",tablet:"bi bi-tablet",mobile:"bi bi-phone",returning:"bi bi-arrow-repeat",new:"bi bi-person-plus","normal users":"bi bi-person-square","headless browsers":"bi bi-robot"}[C]}function I(C){return C=(C+"").toLowerCase().trim(),C.indexOf("http")===0&&(C=new URL(C).hostname),C}function A(C,g=40){return C&&C.length>g&&(C=C.substring(0,g)+"..."),C}return ne(L),U(n,L),U(l,L),U(_,L),U(x,L),(C,g)=>(F(),z("div",as,[K.value?(F(),z("div",ns)):$.value.length?(F(!0),z(fe,{key:2},be($.value,f=>(F(),z("div",rs,[u("div",{class:"shaded d-inline-block bg-grey text-nowrap pt-1 pb-1",style:Ae(`width: ${f[O(S)]/T.value*85}%`)},[ls,e.iconify&&H(e.keyFormatter?e.keyFormatter(f[e.column]):f[e.column])?(F(),z("div",cs,[u("i",{class:Q(H(e.keyFormatter?e.keyFormatter(f[e.column]):f[e.column]))},null,2),us])):Y("",!0),f[e.column]?Y("",!0):(F(),z("span",ds,M(e.defaultText||"None"),1)),e.favicons?(F(),z("div",hs,[f[e.column]&&e.favicons?(F(),z("img",{key:0,src:`https://logo.clearbit.com/${I(f[e.column])}`,onerror:"this.onerror=null; this.src='default.png';"},null,8,fs)):Y("",!0),ms])):Y("",!0),e.browserIcons?(F(),z("div",ps,[f[e.column]&&e.browserIcons?(F(),z("img",{key:0,src:`${E(f[e.column])}`},null,8,vs)):Y("",!0),gs])):Y("",!0),e.osIcons?(F(),z("div",ys,[f[e.column]&&e.osIcons?(F(),z("img",{key:0,src:`${D(f[e.column])}`},null,8,_s)):Y("",!0),bs])):Y("",!0),e.links?(F(),z("div",ks,[f[e.column]&&e.links?(F(),z("a",{key:0,class:"d-inline-block text-truncate",href:`${f[e.column].indexOf("http")?"http://":""}${e.linkPrefix||""}${f[e.column]}`,target:"_blank"},M(A(f[e.column])),9,Ss)):Y("",!0)])):Y("",!0),f[e.column]&&!e.links?(F(),z("span",ws,M(e.keyFormatter?e.keyFormatter(f[e.column]):f[e.column]),1)):Y("",!0)],4),u("span",xs,M(e.valueFormatter?e.valueFormatter(f[O(S)]):f[O(S)]),1)]))),256)):(F(),z("div",os," No data for selected period "))]))}},$s={name:"svg-map",data(){return{id:"svg-map-"+Math.random().toString(36).substr(2,9)}},props:{countries:{type:Object},dark:{type:Boolean},showVisitors:{type:Boolean}},methods:{createMap(){let e={};this.showVisitors?e.visitors={name:"visitors",format:"{0}",thousandSeparator:","}:e.pageviews={name:"pageviews",format:"{0}",thousandSeparator:","},new svgMap({targetElementID:this.id,colorMax:this.dark?"#4c9be8":"#3459E6",colorMin:"#c7d2fc",colorNoData:this.dark?"rgb(78, 93, 108)":"#E2E2E2",data:{data:e,applyData:this.showVisitors?"visitors":"pageviews",values:this.countries||{}}})}},computed:{bundle(){let{countries:e,dark:t}=this;return{countries:e,dark:t}}},mounted(){this.createMap()},watch:{bundle(e){this.$refs.svgMap.innerHTML="",this.$nextTick(()=>{this.createMap()})}}},Bs=["id"];function Cs(e,t,r,s,a,c){return F(),z("div",{id:a.id,ref:"svgMap"},null,8,Bs)}var Ts=ye($s,[["render",Cs]]);const Os={class:"container mt-5"},Ls={class:"row"},Ds={class:"col-md-12"},Fs={class:"row"},As={class:"row mt-3"},zs={class:"col-md-6"},Es={class:"card-body"},Is=Se('<h5 class="card-title float-left" style="margin-bottom:-37px;">Sources</h5><ul class="nav nav-tabs float-right"><li class="nav-item ms-auto"><a class="nav-link active" data-bs-toggle="tab" href="#referrers"><span class="d-none d-sm-inline">Referrers</span><span class="d-inline d-sm-none">All</span></a></li><li class="nav-item ms-auto"><a class="nav-link" data-bs-toggle="tab" href="#referrer_urls">URLs</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#medium">Medium</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#source">Source</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#campaign">Campaign</a></li></ul>',2),Ms={class:"tab-content mt-5"},Ns={class:"tab-pane fade active show",id:"referrers"},Rs=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Ps={class:"text-muted w-495 d-inline-block text-right"},Vs={class:"tab-pane fade show",id:"referrer_urls"},Ws=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),qs={class:"text-muted w-495 d-inline-block text-right"},Ks={class:"tab-pane fade show",id:"medium"},Hs=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Us={class:"text-muted w-495 d-inline-block text-right"},Ys={class:"tab-pane fade show",id:"source"},Gs=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),js={class:"text-muted w-495 d-inline-block text-right"},Zs={class:"tab-pane fade show",id:"campaign"},Js=u("small",{class:"text-muted w-495 d-inline-block"},"Source",-1),Xs={class:"text-muted w-495 d-inline-block text-right"},Qs={class:"col-md-6 mt-3 mt-sm-0"},ei={class:"card-body"},ti=Se('<h5 class="card-title float-left" style="margin-bottom:-37px;">Pages</h5><ul class="nav nav-tabs float-right"><li class="nav-item ms-auto"><a class="nav-link active" data-bs-toggle="tab" href="#pages">Top Pages</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#loadtimes">Load Times</a></li></ul>',2),si={class:"tab-content mt-5"},ii={class:"tab-pane fade show active",id:"pages"},ai=u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1),ni={class:"text-muted w-495 d-inline-block text-right"},oi={class:"tab-pane fade show",id:"loadtimes"},ri=u("small",{class:"text-muted w-495 d-inline-block"},"Page URL",-1),li=u("small",{class:"text-muted w-495 d-inline-block text-right"},"Avg. Load Time",-1),ci={class:"row mt-3"},ui={class:"col-md-6"},di={class:"col-md-6 mt-3 mt-sm-0"},hi=u("h5",{class:"card-title float-left",style:{"margin-bottom":"-37px"}},"Users",-1),fi=u("ul",{class:"nav nav-tabs float-right"},[u("li",{class:"nav-item ms-auto"},[u("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#size"},[u("span",{class:"d-none d-sm-inline"},"Device "),j("Type")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link d-none d-sm-inline-block","data-bs-toggle":"tab",href:"#new"},"Returning")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#browser"},"Browser")]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#language"},[j("Lang"),u("span",{class:"d-none d-sm-inline"},"uage")])]),u("li",{class:"nav-item"},[u("a",{class:"nav-link","data-bs-toggle":"tab",href:"#os"},"OS")])],-1),mi={class:"tab-content mt-5"},pi={class:"tab-pane fade show active",id:"size"},vi=u("small",{class:"text-muted w-495 d-inline-block"},"Device Type",-1),gi={class:"text-muted w-495 d-inline-block text-right"},yi=u("hr",null,null,-1),_i={class:"tab-pane fade",id:"new"},bi=u("small",{class:"text-muted w-495 d-inline-block"},"New vs. Returning",-1),ki={class:"text-muted w-495 d-inline-block text-right"},Si={class:"tab-pane fade",id:"browser"},wi=u("small",{class:"text-muted w-495 d-inline-block"},"Browser",-1),xi={class:"text-muted w-495 d-inline-block text-right"},$i={class:"tab-pane fade",id:"language"},Bi=u("small",{class:"text-muted w-495 d-inline-block"},"Language",-1),Ci={class:"text-muted w-495 d-inline-block text-right"},Ti={class:"tab-pane fade",id:"os"},Oi=u("small",{class:"text-muted w-495 d-inline-block"},"OS",-1),Li={class:"text-muted w-495 d-inline-block text-right"},Di={setup(e){const t=l=>Math.max(0,l.toFixed(2)),r=l=>(l||"").charAt(0).toUpperCase()+(l||"").slice(1),s=l=>l?"New":"Returning",a=l=>l?"Headless Browsers":"Normal Users",c=l=>{let _={aa:"Afar",ab:"Abkhazian",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bh:"Bihari languages",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan; Valencian",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi; Dhivehi; Maldivian",dz:"Dzongkha",ee:"Ewe",el:"Greek, Modern (1453-)",en:"English",eo:"Esperanto",es:"Spanish; Castilian",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fulah",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Gaelic; Scomttish Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian; Haitian Creole",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ie:"Interlingue; Occidental",ig:"Igbo",ii:"Sichuan Yi; Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu; Gikuyu",kj:"Kuanyama; Kwanyama",kk:"Kazakh",kl:"Kalaallisut; Greenlandic",km:"Central Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kirghiz; Kyrgyz",la:"Latin",lb:"Luxembourgish; Letzeburgesch",lg:"Ganda",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Bokm\xE5l, Norwegian; Norwegian Bokm\xE5l",nd:"Ndebele, North; North Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch; Flemish",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",no:"Norwegian",nr:"Ndebele, South; South Ndebele",nv:"Navajo; Navaho",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",om:"Oromo",or:"Oriya",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",pi:"Pali",pl:"Polish",ps:"Pushto; Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ro:"Romanian; Moldavian; Moldovan",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Sotho, Southern",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap\xFCk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zh:"Chinese",zu:"Zulu"},x=l;try{x=x.toLowerCase().split("-")[0]}catch{}try{x=_[x]}catch{}return(!x||x=="undefined")&&(x="Unknown"),x+" ("+l+")"},p=te(),m=G({}),{range:d,host:o,dark:w,summary:h,showVisitors:b}=ae(),i=se(()=>b.value?"Visitors":"Pageviews");async function v(){if(d.value.length===7||d.value>1e3){let x=JSON.parse(JSON.stringify(h.value)),S=b.value?x.country_code__visitors:x.country_code;if(S){let $={};Object.keys(S).forEach(T=>{b.value?$[T]={visitors:S[T]}:$[T]={pageviews:S[T]}}),m.value=$}return}let l=await xe(p,"country_code",999),_={};l.forEach(x=>{b.value?_[x.country_code]={visitors:x["count(DISTINCT ip)"]}:_[x.country_code]={pageviews:x["count(*)"]}}),m.value=_}function n(){(typeof d.value=="string"&&d.value.length===7||d.value>1e3&&d.value<3e3)&&$e(p,d.value)}return ne(v),ne(n),U(o,v),U(o,n),U(d,v),U(d,n),U(h,v),U(b,v),(l,_)=>(F(),z("div",Os,[N(Ft),u("div",Ls,[u("div",Ds,[N(_e,null,{default:pe(()=>[u("div",Fs,[N(he,{title:"Visitors",muted:!1,underline:!O(b),onClick:_[0]||(_[0]=x=>O(p).commit("setShowVisitors",!0))},null,8,["underline"]),N(he,{title:"Total Pageviews",muted:!1,underline:O(b),onClick:_[1]||(_[1]=x=>O(p).commit("setShowVisitors",!1))},null,8,["underline"]),N(he,{title:"Bounce Rate"}),N(he,{title:"Session Length"})]),N(Zt)]),_:1})])]),u("div",As,[u("div",zs,[u("div",{class:Q(["card min-357",{"bg-dark":O(w)}])},[u("div",Es,[Is,u("div",Ms,[u("div",Ns,[Rs,u("small",Ps,M(O(i)),1),N(J,{column:"referer_host",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",Vs,[Ws,u("small",qs,M(O(i)),1),N(J,{column:"referer_url",favicons:!0,links:!0,defaultText:"Direct / None"})]),u("div",Ks,[Hs,u("small",Us,M(O(i)),1),N(J,{column:"utm_medium"})]),u("div",Ys,[Gs,u("small",js,M(O(i)),1),N(J,{column:"utm_source"})]),u("div",Zs,[Js,u("small",Xs,M(O(i)),1),N(J,{column:"utm_campaign"})])])])],2)]),u("div",Qs,[u("div",{class:Q(["card min-357",{"bg-dark":O(w)}])},[u("div",ei,[ti,u("div",si,[u("div",ii,[ai,u("small",ni,M(O(i)),1),N(J,{column:"pathname",linkPrefix:O(o),links:!0,defaultText:"None"},null,8,["linkPrefix"])]),u("div",oi,[ri,li,N(J,{column:"pathname",valueColumn:"AvgLoadTime",linkPrefix:O(o),links:!0,loadTimes:!0,valueFormatter:t},null,8,["linkPrefix"])])])])],2)])]),u("div",ci,[u("div",ui,[N(_e,{title:"Countries"},{default:pe(()=>[N(Ts,{countries:m.value,dark:O(w),showVisitors:O(b)},null,8,["countries","dark","showVisitors"])]),_:1})]),u("div",di,[N(_e,null,{default:pe(()=>[hi,fi,u("div",mi,[u("div",pi,[vi,u("small",gi,M(O(i)),1),N(J,{column:"device_type",iconify:!0,keyFormatter:r}),yi,N(J,{column:"bot",iconify:!0,defaultText:"Normal Users",keyFormatter:a})]),u("div",_i,[bi,u("small",ki,M(O(i)),1),N(J,{column:"is_new",iconify:!0,defaultText:"Returning",keyFormatter:s})]),u("div",Si,[wi,u("small",xi,M(O(i)),1),N(J,{column:"browser",browserIcons:!0})]),u("div",$i,[Bi,u("small",Ci,M(O(i)),1),N(J,{column:"lang",keyFormatter:c})]),u("div",Ti,[Oi,u("small",Li,M(O(i)),1),N(J,{column:"os",osIcons:!0})])])]),_:1})])])]))}};const Fi={setup(e){const t=te();function r(){let s=localStorage.getItem("__analytics_encryption_key"),a=localStorage.getItem("__analytics_public_key"),c=localStorage.getItem("__analytics_hosts");if(c)try{c=JSON.parse(c)}catch{}Array.isArray(c)||(c=null);let p={};location.search.slice(1).split("&").map(d=>d.split("=")).forEach(d=>p[d[0]]=d[1]);async function m(){let d="/keypair";location.hostname==="localhost"&&(d="https://analytics.servers.do/keypair");let w=await(await fetch(d)).json(),{public_key:h,private_key:b}=w;localStorage.setItem("__analytics_encryption_key",b),localStorage.setItem("__analytics_public_key",h),t.commit("setPublicKey",h),t.commit("setKey",b)}if(p.key){try{p.key=decodeURIComponent(p.key)}catch{}localStorage.setItem("__analytics_encryption_key",p.key),t.commit("setKey",p.key)}else s&&t.commit("setKey",s);if(p.pkey){try{p.pkey=decodeURIComponent(p.pkey)}catch{}localStorage.setItem("__analytics_public_key",p.pkey),t.commit("setPublicKey",p.pkey)}else a?t.commit("setPublicKey",a):m();p.host&&((!c||!Array.isArray(c))&&(c=[]),c.includes(p.host)||c.push(p.host),localStorage.setItem("__analytics_hosts",JSON.stringify(c))),c&&(c.sort((d,o)=>d.localeCompare(o)),t.commit("setDomains",c)),t.commit("setHost",p.host||""),t.commit("setRange",p.range)}return r(),addEventListener("popstate",s=>{console.log("onpopstate location: "+document.location),r()}),(s,a)=>(F(),z(fe,null,[N(Je),N(Di),N(qe),N(ft)],64))}};ze(Fi).use(Ie).mount("#app");
